(self["webpackChunk_jupyterlab_application_top"]=self["webpackChunk_jupyterlab_application_top"]||[]).push([[4470],{27902:(e,t,n)=>{"use strict";n.r(t);n.d(t,{DEFAULT_CONTEXT_ITEM_RANK:()=>y,default:()=>F});var i=n(30244);var s=n(48287);var o=n(66646);var r=n(82688);var a=n(90600);var l=n(85284);var d=n(83444);var c=n(21760);var h=n(78464);var u=n(34236);var p=n(5592);var m=n(93247);var g=n(90044);var f=n(1143);var v=n(44914);const _="TopBar";const b={id:"@jupyterlab/application-extension:top-bar",description:"Adds a toolbar to the top area (next to the main menu bar).",autoStart:true,requires:[a.ISettingRegistry,s.IToolbarWidgetRegistry],optional:[c.ITranslator],activate:(e,t,n,i)=>{const o=(i!==null&&i!==void 0?i:c.nullTranslator).load("jupyterlab");const r=new h.Toolbar;r.id="jp-top-bar";r.node.setAttribute("aria-label",o.__("Topbar toolbar"));(0,s.setToolbar)(r,(0,s.createToolbarFactory)(n,t,_,b.id,i!==null&&i!==void 0?i:c.nullTranslator),r);e.shell.add(r,"top",{rank:900})}};const y=100;var w;(function(e){e.activateNextTab="application:activate-next-tab";e.activatePreviousTab="application:activate-previous-tab";e.activateNextTabBar="application:activate-next-tab-bar";e.activatePreviousTabBar="application:activate-previous-tab-bar";e.close="application:close";e.closeOtherTabs="application:close-other-tabs";e.closeRightTabs="application:close-right-tabs";e.closeAll="application:close-all";e.setMode="application:set-mode";e.showPropertyPanel="property-inspector:show-panel";e.resetLayout="application:reset-layout";e.toggleContextMenu="application:toggle-context-menu";e.toggleHeader="application:toggle-header";e.toggleMode="application:toggle-mode";e.toggleLeftArea="application:toggle-left-area";e.toggleRightArea="application:toggle-right-area";e.toggleSideTabBar="application:toggle-side-tabbar";e.toggleSidebarWidget="application:toggle-sidebar-widget";e.togglePresentationMode="application:toggle-presentation-mode";e.toggleFullscreenMode="application:toggle-fullscreen-mode";e.tree="router:tree";e.switchSidebar="sidebar:switch"})(w||(w={}));const C={id:"@jupyterlab/application-extension:commands",description:"Adds commands related to the shell.",autoStart:true,requires:[c.ITranslator],optional:[i.ILabShell,s.ICommandPalette],activate:(e,t,n,s)=>{var r;const{commands:a,shell:l}=e;const d=t.load("jupyterlab");const c=d.__("Main Area");a.addCommand(i.JupyterFrontEndContextMenu.contextMenu,{label:d.__("Shift+Right Click for Browser Menu"),isEnabled:()=>false,execute:()=>void 0});const h=()=>{const t=e=>!!e.dataset.id;const n=e.contextMenuHitTest(t);if(!n){return l.currentWidget}return(0,u.find)(l.widgets("main"),(e=>e.id===n.dataset.id))||l.currentWidget};const p=e=>{e.forEach((e=>e.close()))};const m=(e,t)=>{if(e.type==="tab-area"){return e.widgets.includes(t)?e:null}if(e.type==="split-area"){for(const n of e.children){const e=m(n,t);if(e){return e}}}return null};const g=e=>{var t;const i=n===null||n===void 0?void 0:n.saveLayout();const s=i===null||i===void 0?void 0:i.mainArea;if(!s||o.PageConfig.getOption("mode")!=="multiple-document"){return null}const r=(t=s.dock)===null||t===void 0?void 0:t.main;return r?m(r,e):null};const f=e=>{const{id:t}=e;const n=g(e);const i=n?n.widgets||[]:[];const s=i.findIndex((e=>e.id===t));if(s<0){return[]}return i.slice(s+1)};const v=e=>{let t;if(e!="left"&&e!="right"){throw Error(`Unsupported sidebar: ${e}`)}if(e==="left"){t=document.querySelector(".lm-TabBar-tab.lm-mod-current")}else{const e=document.querySelectorAll(".lm-TabBar-tab.lm-mod-current");t=e[e.length-1]}const n=t===null||t===void 0?void 0:t.getAttribute("data-id");if(n){return n===null||n===void 0?void 0:n.toString()}else{return""}};function _(e){if(e){e.focus()}}a.addCommand(w.close,{label:()=>d.__("Close Tab"),isEnabled:()=>{const e=h();return!!e&&e.title.closable},execute:()=>{const e=h();if(e){e.close()}}});a.addCommand(w.closeOtherTabs,{label:()=>d.__("Close All Other Tabs"),isEnabled:()=>(0,u.some)(l.widgets("main"),((e,t)=>t===1)),execute:()=>{const e=h();if(!e){return}const{id:t}=e;for(const n of l.widgets("main")){if(n.id!==t){n.close()}}}});a.addCommand(w.closeRightTabs,{label:()=>d.__("Close Tabs to Right"),isEnabled:()=>!!h()&&f(h()).length>0,execute:()=>{const e=h();if(!e){return}p(f(e))}});(r=l.currentChanged)===null||r===void 0?void 0:r.connect((()=>{[w.close,w.closeOtherTabs,w.closeRightTabs].forEach((e=>a.notifyCommandChanged(e)))}));if(n){a.addCommand(w.activateNextTab,{label:d.__("Activate Next Tab"),execute:()=>{n.activateNextTab()}});a.addCommand(w.activatePreviousTab,{label:d.__("Activate Previous Tab"),execute:()=>{n.activatePreviousTab()}});a.addCommand(w.activateNextTabBar,{label:d.__("Activate Next Tab Bar"),execute:()=>{n.activateNextTabBar()}});a.addCommand(w.activatePreviousTabBar,{label:d.__("Activate Previous Tab Bar"),execute:()=>{n.activatePreviousTabBar()}});a.addCommand(w.closeAll,{label:d.__("Close All Tabs"),execute:()=>{n.closeAll()}});a.addCommand(w.toggleHeader,{label:d.__("Show Header"),execute:()=>{if(n.mode==="single-document"){n.toggleTopInSimpleModeVisibility()}},isToggled:()=>n.isTopInSimpleModeVisible(),isVisible:()=>n.mode==="single-document"});a.addCommand(w.toggleLeftArea,{label:d.__("Show Left Sidebar"),execute:()=>{if(n.leftCollapsed){n.expandLeft()}else{n.collapseLeft();if(n.currentWidget){n.activateById(n.currentWidget.id)}}},isToggled:()=>!n.leftCollapsed,isEnabled:()=>!n.isEmpty("left")});a.addCommand(w.toggleRightArea,{label:d.__("Show Right Sidebar"),execute:()=>{if(n.rightCollapsed){n.expandRight()}else{n.collapseRight();if(n.currentWidget){n.activateById(n.currentWidget.id)}}},isToggled:()=>!n.rightCollapsed,isEnabled:()=>!n.isEmpty("right")});a.addCommand(w.toggleSidebarWidget,{label:e=>e===undefined||e.side===undefined||e.index===undefined?d.__("Toggle Sidebar Element"):e.side==="right"?d.__("Toggle Element %1 in Right Sidebar",parseInt(e.index,10)+1):d.__("Toggle Element %1 in Left Sidebar",parseInt(e.index,10)+1),execute:e=>{const t=parseInt(e.index,10);if(e.side!="left"&&e.side!="right"){throw Error(`Unsupported sidebar: ${e.side}`)}const i=Array.from(n.widgets(e.side));if(t>=i.length){return}const s=i[t].id;const o=document.querySelector("[data-id='"+s+"']");if(v(e.side)===s){if(e.side=="left"){n.collapseLeft();_(o)}if(e.side=="right"){n.collapseRight();_(o)}}else{n.activateById(s);_(o)}}});a.addCommand(w.toggleSideTabBar,{label:e=>e.side==="right"?d.__("Show Right Activity Bar"):d.__("Show Left Activity Bar"),execute:e=>{if(e.side==="right"){n.toggleSideTabBarVisibility("right")}else{n.toggleSideTabBarVisibility("left")}},isToggled:e=>e.side==="right"?n.isSideTabBarVisible("right"):n.isSideTabBarVisible("left"),isEnabled:e=>e.side==="right"?!n.isEmpty("right"):!n.isEmpty("left")});a.addCommand(w.togglePresentationMode,{label:()=>d.__("Presentation Mode"),execute:()=>{n.presentationMode=!n.presentationMode},isToggled:()=>n.presentationMode,isVisible:()=>true});a.addCommand(w.toggleFullscreenMode,{label:d.__("Fullscreen Mode"),execute:()=>{if(document.fullscreenElement===null||document.fullscreenElement===undefined){document.documentElement.requestFullscreen().catch((e=>{console.error("Failed to enter fullscreen mode.",e)}))}else if(document.fullscreenElement!==null){document.exitFullscreen().catch((e=>{console.error("Failed to exit fullscreen mode.",e)}))}},isToggled:()=>document.fullscreenElement!==null});a.addCommand(w.setMode,{label:e=>e["mode"]?d.__("Set %1 mode.",e["mode"]):d.__("Set the layout `mode`."),caption:d.__('The layout `mode` can be "single-document" or "multiple-document".'),isVisible:e=>{const t=e["mode"];return t==="single-document"||t==="multiple-document"},execute:e=>{const t=e["mode"];if(t==="single-document"||t==="multiple-document"){n.mode=t;return}throw new Error(`Unsupported application shell mode: ${t}`)}});a.addCommand(w.toggleMode,{label:d.__("Simple Interface"),isToggled:()=>n.mode==="single-document",execute:()=>{const e=n.mode==="multiple-document"?{mode:"single-document"}:{mode:"multiple-document"};return a.execute(w.setMode,e)}});a.addCommand(w.resetLayout,{label:d.__("Reset Default Layout"),execute:()=>{if(n.presentationMode){a.execute(w.togglePresentationMode).catch((e=>{console.error("Failed to undo presentation mode.",e)}))}if(document.fullscreenElement!==null||document.fullscreenElement!==undefined){a.execute(w.toggleFullscreenMode).catch((e=>{console.error("Failed to exit fullscreen mode.",e)}))}if(n.mode==="single-document"&&!n.isTopInSimpleModeVisible()){a.execute(w.toggleHeader).catch((e=>{console.error("Failed to display title header.",e)}))}["left","right"].forEach((e=>{if(!n.isSideTabBarVisible(e)&&!n.isEmpty(e)){a.execute(w.toggleSideTabBar,{side:e}).catch((t=>{console.error(`Failed to show ${e} activity bar.`,t)}))}}))}})}if(s){[w.activateNextTab,w.activatePreviousTab,w.activateNextTabBar,w.activatePreviousTabBar,w.close,w.closeAll,w.closeOtherTabs,w.closeRightTabs,w.toggleHeader,w.toggleLeftArea,w.toggleRightArea,w.togglePresentationMode,w.toggleFullscreenMode,w.toggleMode,w.resetLayout].forEach((e=>s.addItem({command:e,category:c})));["right","left"].forEach((e=>{s.addItem({command:w.toggleSideTabBar,category:c,args:{side:e}})}))}}};const x={id:"@jupyterlab/application-extension:main",description:"Initializes the application and provides the URL tree path handler.",requires:[i.IRouter,s.IWindowResolver,c.ITranslator,i.JupyterFrontEnd.ITreeResolver],optional:[i.IConnectionLost],provides:i.ITreePathUpdater,activate:(e,t,n,r,a,l)=>{const d=r.load("jupyterlab");if(!(e instanceof i.JupyterLab)){throw new Error(`${x.id} must be activated in JupyterLab.`)}let c="";let h="";function u(e){void a.paths.then((()=>{h=e;if(!c){const n=o.PageConfig.getUrl({treePath:e});const i=o.URLExt.parse(n).pathname;t.navigate(i,{skipRouting:true});o.PageConfig.setOption("treePath",e)}}))}const p=n.name;console.debug(`Starting application in workspace: "${p}"`);if(e.registerPluginErrors.length!==0){const t=v.createElement("pre",null,e.registerPluginErrors.map((e=>e.message)).join("\n"));void(0,s.showErrorMessage)(d.__("Error Registering Plugins"),{message:t})}e.shell.modeChanged.connect(((e,n)=>{const i=o.PageConfig.getUrl({mode:n});const s=o.URLExt.parse(i).pathname;t.navigate(s,{skipRouting:true});o.PageConfig.setOption("mode",n)}));void a.paths.then((()=>{e.shell.currentPathChanged.connect(((e,n)=>{const i=n.newValue;const s=i||h;const r=o.PageConfig.getUrl({treePath:s});const a=o.URLExt.parse(r).pathname;t.navigate(a,{skipRouting:true});o.PageConfig.setOption("treePath",s);c=i}))}));l=l||i.ConnectionLost;e.serviceManager.connectionFailure.connect(((e,t)=>l(e,t,r)));const m=e.serviceManager.builder;const g=()=>m.build().then((()=>(0,s.showDialog)({title:d.__("Build Complete"),body:v.createElement("div",null,d.__("Build successfully completed, reload page?"),v.createElement("br",null),d.__("You will lose any unsaved changes.")),buttons:[s.Dialog.cancelButton({label:d.__("Reload Without Saving"),actions:["reload"]}),s.Dialog.okButton({label:d.__("Save and Reload")})],hasClose:true}))).then((({button:{accept:n,actions:i}})=>{if(n){void e.commands.execute("docmanager:save").then((()=>{t.reload()})).catch((e=>{void(0,s.showErrorMessage)(d.__("Save Failed"),{message:v.createElement("pre",null,e.message)})}))}else if(i.includes("reload")){t.reload()}})).catch((e=>{void(0,s.showErrorMessage)(d.__("Build Failed"),{message:v.createElement("pre",null,e.message)})}));if(m.isAvailable&&m.shouldCheck){void m.getStatus().then((e=>{if(e.status==="building"){return g()}if(e.status!=="needed"){return}const t=v.createElement("div",null,d.__("JupyterLab build is suggested:"),v.createElement("br",null),v.createElement("pre",null,e.message));void(0,s.showDialog)({title:d.__("Build Recommended"),body:t,buttons:[s.Dialog.cancelButton(),s.Dialog.okButton({label:d.__("Build")})]}).then((e=>e.button.accept?g():undefined))}))}return u},autoStart:true};const S={id:"@jupyterlab/application-extension:context-menu",description:"Populates the context menu.",autoStart:true,requires:[a.ISettingRegistry,c.ITranslator],optional:[s.ICommandPalette],activate:(e,t,n,i)=>{const s=n.load("jupyterlab");function o(t){const n=new h.RankedMenu({...t,commands:e.commands});if(t.label){n.title.label=s.__(t.label)}return n}e.started.then((()=>z.loadSettingsContextMenu(e.contextMenu,e.commands,t,o,n))).then((()=>{if(i){i===null||i===void 0?void 0:i.addItem({category:s.__("Settings"),command:w.toggleContextMenu})}})).catch((e=>{console.error("Failed to load context menu items from settings registry.",e)}))}};const k={id:"@jupyterlab/application-extension:dirty",description:"Adds safeguard dialog when closing the browser tab with unsaved modifications.",autoStart:true,requires:[c.ITranslator],activate:(e,t)=>{if(!(e instanceof i.JupyterLab)){throw new Error(`${k.id} must be activated in JupyterLab.`)}const n=t.load("jupyterlab");const s=n.__("Are you sure you want to exit JupyterLab?\n\nAny unsaved changes will be lost.");window.addEventListener("beforeunload",(t=>{if(e.status.isDirty){return t.returnValue=s}}))}};const j={id:"@jupyterlab/application-extension:layout",description:"Provides the shell layout restorer.",requires:[l.IStateDB,i.ILabShell,a.ISettingRegistry],optional:[c.ITranslator],activate:(e,t,n,r,a)=>{const l=(a!==null&&a!==void 0?a:c.nullTranslator).load("jupyterlab");const d=e.started;const h=e.commands;const u=o.PageConfig.getOption("mode");const m=new i.LayoutRestorer({connector:t,first:d,registry:h,mode:u});r.load(D.id).then((t=>{var i,s;const o=t.composite["layout"];void n.restoreLayout(u,m,{"multiple-document":(i=o.multiple)!==null&&i!==void 0?i:{},"single-document":(s=o.single)!==null&&s!==void 0?s:{}}).then((()=>{n.layoutModified.connect((()=>{void m.save(n.saveLayout())}));t.changed.connect(g);z.activateSidebarSwitcher(e,n,t,l)}))})).catch((e=>{console.error("Fail to load settings for the layout restorer.");console.error(e)}));return m;async function g(e){if(!p.JSONExt.deepEqual(e.composite["layout"],{single:n.userLayout["single-document"],multiple:n.userLayout["multiple-document"]})){const e=await(0,s.showDialog)({title:l.__("Information"),body:l.__("User layout customization has changed. You may need to reload JupyterLab to see the changes."),buttons:[s.Dialog.cancelButton(),s.Dialog.okButton({label:l.__("Reload")})]});if(e.button.accept){location.reload()}}}},autoStart:true,provides:i.ILayoutRestorer};const I={id:"@jupyterlab/application-extension:router",description:"Provides the URL router",requires:[i.JupyterFrontEnd.IPaths],activate:(e,t)=>{const{commands:n}=e;const s=t.urls.base;const o=new i.Router({base:s,commands:n});void e.started.then((()=>{void o.route();window.addEventListener("popstate",(()=>{void o.route()}))}));return o},autoStart:true,provides:i.IRouter};const E={id:"@jupyterlab/application-extension:tree-resolver",description:"Provides the tree route resolver",autoStart:true,requires:[i.IRouter],provides:i.JupyterFrontEnd.ITreeResolver,activate:(e,t)=>{const{commands:n}=e;const i=new g.DisposableSet;const s=new p.PromiseDelegate;const r=new RegExp("/(lab|doc)(/workspaces/[a-zA-Z0-9-_]+)?(/tree/.*)?");i.add(n.addCommand(w.tree,{execute:async e=>{var t;if(i.isDisposed){return}const n=o.URLExt.queryStringToObject((t=e.search)!==null&&t!==void 0?t:"");const r=n["file-browser-path"]||"";delete n["file-browser-path"];i.dispose();s.resolve({browser:r,file:o.PageConfig.getOption("treePath")})}}));i.add(t.register({command:w.tree,pattern:r}));const a=()=>{if(i.isDisposed){return}i.dispose();s.resolve(null)};t.routed.connect(a);i.add(new g.DisposableDelegate((()=>{t.routed.disconnect(a)})));return{paths:s.promise}}};const T={id:"@jupyterlab/application-extension:notfound",description:"Defines the behavior for not found URL (aka route).",requires:[i.JupyterFrontEnd.IPaths,i.IRouter,c.ITranslator],activate:(e,t,n,i)=>{const o=i.load("jupyterlab");const r=t.urls.notFound;if(!r){return}const a=n.base;const l=o.__("The path: %1 was not found. JupyterLab redirected to: %2",r,a);n.navigate("");void(0,s.showErrorMessage)(o.__("Path Not Found"),{message:l})},autoStart:true};const M={id:"@jupyterlab/application-extension:faviconbusy",description:"Handles the favicon depending on the application status.",requires:[i.ILabStatus],activate:async(e,t)=>{t.busySignal.connect(((e,t)=>{const n=document.querySelector(`link[rel="icon"]${t?".idle.favicon":".busy.favicon"}`);if(!n){return}const i=document.querySelector(`link${t?".busy.favicon":".idle.favicon"}`);if(!i){return}if(n!==i){n.rel="";i.rel="icon";i.parentNode.replaceChild(i,i)}}))},autoStart:true};const D={id:"@jupyterlab/application-extension:shell",description:"Provides the JupyterLab shell. It has an extended API compared to `app.shell`.",optional:[a.ISettingRegistry],activate:(e,t)=>{if(!(e.shell instanceof i.LabShell)){throw new Error(`${D.id} did not find a LabShell instance.`)}if(t){void t.load(D.id).then((t=>{e.shell.updateConfig(t.composite);t.changed.connect((()=>{e.shell.updateConfig(t.composite)}))}))}return e.shell},autoStart:true,provides:i.ILabShell};const A={id:"@jupyterlab/application-extension:status",description:"Provides the application status.",activate:e=>{if(!(e instanceof i.JupyterLab)){throw new Error(`${A.id} must be activated in JupyterLab.`)}return e.status},autoStart:true,provides:i.ILabStatus};const P={id:"@jupyterlab/application-extension:info",description:"Provides the application information.",activate:e=>{if(!(e instanceof i.JupyterLab)){throw new Error(`${P.id} must be activated in JupyterLab.`)}return e.info},autoStart:true,provides:i.JupyterLab.IInfo};const L={id:"@jupyterlab/application-extension:paths",description:"Provides the application paths.",activate:e=>{if(!(e instanceof i.JupyterLab)){throw new Error(`${L.id} must be activated in JupyterLab.`)}return e.paths},autoStart:true,provides:i.JupyterFrontEnd.IPaths};const R={id:"@jupyterlab/application-extension:property-inspector",description:"Provides the property inspector.",autoStart:true,requires:[i.ILabShell,c.ITranslator],optional:[i.ILayoutRestorer],provides:r.IPropertyInspectorProvider,activate:(e,t,n,i)=>{const s=n.load("jupyterlab");const o=new r.SideBarPropertyInspectorProvider({shell:t,translator:n});o.title.icon=h.buildIcon;o.title.caption=s.__("Property Inspector");o.id="jp-property-inspector";t.add(o,"right",{rank:100,type:"Property Inspector"});e.commands.addCommand(w.showPropertyPanel,{label:s.__("Property Inspector"),execute:()=>{t.activateById(o.id)}});if(i){i.add(o,"jp-property-inspector")}return o}};const N={id:"@jupyterlab/application-extension:logo",description:"Sets the application logo.",autoStart:true,requires:[i.ILabShell],activate:(e,t)=>{const n=new f.Widget;h.jupyterIcon.element({container:n.node,elementPosition:"center",margin:"2px 2px 2px 8px",height:"auto",width:"16px"});n.id="jp-MainLogo";t.add(n,"top",{rank:0})}};const O={id:"@jupyterlab/application-extension:mode-switch",description:"Adds the interface mode switch",requires:[i.ILabShell,c.ITranslator],optional:[d.IStatusBar,a.ISettingRegistry],activate:(e,t,n,i,s)=>{if(i===null){return}const o=n.load("jupyterlab");const r=new h.Switch;r.id="jp-single-document-mode";r.valueChanged.connect(((e,n)=>{t.mode=n.newValue?"single-document":"multiple-document"}));t.modeChanged.connect(((e,t)=>{r.value=t==="single-document"}));if(s){const n=s.load(D.id);const i=e=>{const n=e.get("startMode").composite;if(n){t.mode=n==="single"?"single-document":"multiple-document"}};Promise.all([n,e.restored]).then((([e])=>{i(e)})).catch((e=>{console.error(e.message)}))}const a=()=>{const t=e.commands.keyBindings.find((e=>e.command==="application:toggle-mode"));if(t){const e=t.keys.map(m.CommandRegistry.formatKeystroke).join(", ");r.caption=o.__("Simple Interface (%1)",e)}else{r.caption=o.__("Simple Interface")}};a();e.commands.keyBindingChanged.connect((()=>{a()}));r.label=o.__("Simple");i.registerStatusItem(O.id,{priority:1,item:r,align:"left",rank:-1})},autoStart:true};const B=[S,k,x,C,j,I,E,T,M,D,A,P,O,L,R,N,b];const F=B;var z;(function(e){async function t(e){const t=await(0,s.showDialog)({title:e.__("Information"),body:e.__("Context menu customization has changed. You will need to reload JupyterLab to see the changes."),buttons:[s.Dialog.cancelButton(),s.Dialog.okButton({label:e.__("Reload")})]});if(t.button.accept){location.reload()}}async function n(e,n,i,o,r){var l;const d=r.load("jupyterlab");const c=S.id;let h=null;let u={};function m(e){var t,n;u={};const s=Object.keys(i.plugins).map((e=>{var t,n;const s=(n=(t=i.plugins[e].schema["jupyter.lab.menus"])===null||t===void 0?void 0:t.context)!==null&&n!==void 0?n:[];u[e]=s;return s})).concat([(n=(t=e["jupyter.lab.menus"])===null||t===void 0?void 0:t.context)!==null&&n!==void 0?n:[]]).reduceRight(((e,t)=>a.SettingRegistry.reconcileItems(e,t,true)),[]);e.properties.contextMenu.default=a.SettingRegistry.reconcileItems(s,e.properties.contextMenu.default,true).sort(((e,t)=>{var n,i;return((n=e.rank)!==null&&n!==void 0?n:Infinity)-((i=t.rank)!==null&&i!==void 0?i:Infinity)}))}i.transform(c,{compose:e=>{var t,n,i,s;if(!h){h=p.JSONExt.deepCopy(e.schema);m(h)}const o=(i=(n=(t=h.properties)===null||t===void 0?void 0:t.contextMenu)===null||n===void 0?void 0:n.default)!==null&&i!==void 0?i:[];const r={...e.data.user,contextMenu:(s=e.data.user.contextMenu)!==null&&s!==void 0?s:[]};const l={...e.data.composite,contextMenu:a.SettingRegistry.reconcileItems(o,r.contextMenu,false)};e.data={composite:l,user:r};return e},fetch:e=>{if(!h){h=p.JSONExt.deepCopy(e.schema);m(h)}return{data:e.data,id:e.id,raw:e.raw,schema:h,version:e.version}}});const g=await i.load(c);const f=e=>{const t=document.body;const n=t.hasAttribute("data-jp-suppress-context-menu");const i=e.get("disabled").composite;if(n&&!i){t.removeAttribute("data-jp-suppress-context-menu")}else if(i&&!n){t.setAttribute("data-jp-suppress-context-menu","true")}};const v=(l=g.composite.contextMenu)!==null&&l!==void 0?l:[];a.SettingRegistry.filterDisabledItems(v).forEach((t=>{s.MenuFactory.addContextItem({rank:y,...t},e,o)}));g.changed.connect((()=>{var e;const n=(e=g.composite.contextMenu)!==null&&e!==void 0?e:[];if(!p.JSONExt.deepEqual(v,n)){void t(d)}f(g)}));i.pluginChanged.connect((async(n,r)=>{var l,h,m,g;if(r!==c){const n=(l=u[r])!==null&&l!==void 0?l:[];const c=(m=(h=i.plugins[r].schema["jupyter.lab.menus"])===null||h===void 0?void 0:h.context)!==null&&m!==void 0?m:[];if(!p.JSONExt.deepEqual(n,c)){if(u[r]){await t(d)}else{u[r]=p.JSONExt.deepCopy(c);const t=(g=a.SettingRegistry.reconcileItems(c,v,false,false))!==null&&g!==void 0?g:[];a.SettingRegistry.filterDisabledItems(t).forEach((t=>{s.MenuFactory.addContextItem({rank:y,...t},e,o)}))}}}}));f(g);n.addCommand(w.toggleContextMenu,{label:d.__("Enable Context Menu"),isToggleable:true,isToggled:()=>!g.get("disabled").composite,execute:()=>void g.set("disabled",!g.get("disabled").composite)})}e.loadSettingsContextMenu=n;function i(e,t,n,i){e.commands.addCommand(w.switchSidebar,{label:i.__("Switch Sidebar Side"),execute:()=>{const i=e.contextMenuHitTest((e=>!!e.dataset.id));if(!i){return}const s=i.dataset["id"];const o=document.getElementById("jp-left-stack");const r=document.getElementById(s);let a=null;if(o&&r&&o.contains(r)){const e=(0,u.find)(t.widgets("left"),(e=>e.id===s));if(e){a=t.move(e,"right");t.activateById(e.id)}}else{const e=(0,u.find)(t.widgets("right"),(e=>e.id===s));if(e){a=t.move(e,"left");t.activateById(e.id)}}if(a){n.set("layout",{single:a["single-document"],multiple:a["multiple-document"]}).catch((e=>{console.error("Failed to save user layout customization.",e)}))}}});e.commands.commandExecuted.connect(((e,t)=>{if(t.id===w.resetLayout){n.remove("layout").catch((e=>{console.error("Failed to remove user layout customization.",e)}))}}))}e.activateSidebarSwitcher=i})(z||(z={}))},20979:(e,t,n)=>{"use strict";var i=n(10395);var s=n(40662);var o=n(24800);var r=n(3579);var a=n(58130);var l=n(85072);var d=n.n(l);var c=n(97825);var h=n.n(c);var u=n(77659);var p=n.n(u);var m=n(55056);var g=n.n(m);var f=n(10540);var v=n.n(f);var _=n(41113);var b=n.n(_);var y=n(24118);var w={};w.styleTagTransform=b();w.setAttributes=g();w.insert=p().bind(null,"head");w.domAPI=h();w.insertStyleElement=v();var C=d()(y.A,w);const x=y.A&&y.A.locals?y.A.locals:undefined},16214:(e,t,n)=>{"use strict";n.r(t);n.d(t,{ConnectionLost:()=>o,IConnectionLost:()=>q,ILabShell:()=>O,ILabStatus:()=>$,ILayoutRestorer:()=>b,IMimeDocumentTracker:()=>x,IRouter:()=>K,ITreePathUpdater:()=>J,JupyterFrontEnd:()=>p,JupyterFrontEndContextMenu:()=>g,JupyterLab:()=>W,LabShell:()=>B,LabStatus:()=>H,LayoutRestorer:()=>w,Router:()=>U,addSemanticCommand:()=>G,createRendermimePlugin:()=>k,createRendermimePlugins:()=>S,createSemanticCommand:()=>Y});var i=n(48287);var s=n(21760);const o=async function(e,t,n){n=n||s.nullTranslator;const o=n.load("jupyterlab");const a=o.__("Server Connection Error");const l=o.__("A connection to the Jupyter server could not be established.\n"+"JupyterLab will continue trying to reconnect.\n"+"Check your network connection or Jupyter server configuration.\n");if(!r.displayConnectionLost){return}if(r.serverConnectionLost){await r.serverConnectionLost;return}const d=(0,i.showDialog)({title:a,body:l,checkbox:{label:o.__("Do not show this message again in this session."),caption:o.__("If checked, you will not see a dialog informing you about an issue with server connection in this session.")},buttons:[i.Dialog.cancelButton({label:o.__("Close")})]}).then((e=>{if(e.isChecked){r.displayConnectionLost=false}return})).catch((e=>{console.error("An error occurred while showing the dialog: ",e)})).finally((()=>{r.serverConnectionLost=undefined}));r.serverConnectionLost=d};var r;(function(e){e.displayConnectionLost=true})(r||(r={}));var a=n(97494);var l=n(24805);var d=n(78464);var c=n(95286);var h=n(5592);var u=n(2336);class p extends c.Application{constructor(e){super(e);this._formatChanged=new u.Signal(this);e.shell.addClass("jp-ThemedContainer");this.contextMenu=new d.ContextMenuSvg({commands:this.commands,renderer:e.contextMenuRenderer,groupByTarget:false,sortBySelector:false});const t=new Promise((e=>{requestAnimationFrame((()=>{e()}))}));this.commandLinker=e.commandLinker||new i.CommandLinker({commands:this.commands});this.docRegistry=e.docRegistry||new a.DocumentRegistry;this.restored=e.restored||this.started.then((()=>t)).catch((()=>t));this.serviceManager=e.serviceManager||new l.ServiceManager}get format(){return this._format}set format(e){if(this._format!==e){this._format=e;document.body.dataset["format"]=e;this._formatChanged.emit(e)}}get formatChanged(){return this._formatChanged}contextMenuHitTest(e){if(!this._contextMenuEvent||!(this._contextMenuEvent.target instanceof Node)){return undefined}let t=this._contextMenuEvent.target;do{if(t instanceof HTMLElement&&e(t)){return t}t=t.parentNode}while(t&&t.parentNode&&t!==t.parentNode);return undefined}evtContextMenu(e){this._contextMenuEvent=e;if(e.shiftKey||m.suppressContextMenu(e.target)){return}const t=this.contextMenu.open(e);if(t){const t=this.contextMenu.menu.items;if(t.length===1&&t[0].command===g.contextMenu){this.contextMenu.menu.close();return}e.preventDefault();e.stopPropagation()}}}(function(e){function t(e,t){const n=new RegExp(`^${t.urls.doc}`);const i=e.match(n);if(i){return true}else{return false}}e.inDocMode=t;e.IPaths=new h.Token("@jupyterlab/application:IPaths",`A service providing information about various\n  URLs and server paths for the current application. Use this service if you want to\n  assemble URLs to use the JupyterLab REST API.`);e.ITreeResolver=new h.Token("@jupyterlab/application:ITreeResolver","A service to resolve the tree path.")})(p||(p={}));var m;(function(e){function t(e){return e.closest("[data-jp-suppress-context-menu]")!==null}e.suppressContextMenu=t})(m||(m={}));var g;(function(e){e.contextMenu="__internal:context-menu-info"})(g||(g={}));var f=n(66646);var v=n(61314);var _=n(94466);const b=new h.Token("@jupyterlab/application:ILayoutRestorer","A service providing application layout restoration functionality. Use this to have your activities restored across page loads.");const y="layout-restorer:data";class w{constructor(e){this._deferred=new Array;this._deferredMainArea=null;this._firstDone=false;this._promisesDone=false;this._promises=[];this._restored=new h.PromiseDelegate;this._trackers=new Set;this._widgets=new Map;this._mode="multiple-document";this._connector=e.connector;this._first=e.first;this._registry=e.registry;if(e.mode){this._mode=e.mode}void this._first.then((()=>{this._firstDone=true})).then((()=>Promise.all(this._promises))).then((()=>{this._promisesDone=true;this._trackers.clear()})).then((()=>{this._restored.resolve(void 0)}))}get isDeferred(){return this._deferred.length>0}get restored(){return this._restored.promise}add(e,t){C.nameProperty.set(e,t);this._widgets.set(t,e);e.disposed.connect(this._onWidgetDisposed,this)}async fetch(){var e;const t={fresh:true,mainArea:null,downArea:null,leftArea:null,rightArea:null,topArea:null,relativeSizes:null};const n=this._connector.fetch(y);try{const[i]=await Promise.all([n,this.restored]);if(!i){return t}const{main:s,down:o,left:r,right:a,relativeSizes:l,top:d}=i;const c=false;let h=null;if(this._mode==="multiple-document"){h=this._rehydrateMainArea(s)}else{this._deferredMainArea=s}const u=this._rehydrateDownArea(o);const p=this._rehydrateSideArea(r);const m=this._rehydrateSideArea(a);return{fresh:c,mainArea:h,downArea:u,leftArea:p,rightArea:m,relativeSizes:l||null,topArea:(e=d)!==null&&e!==void 0?e:null}}catch(i){return t}}async restore(e,t){if(this._firstDone){throw new Error("restore() must be called before `first` has resolved.")}const{namespace:n}=e;if(this._trackers.has(n)){throw new Error(`The tracker "${n}" is already restored.`)}const{args:i,command:s,name:o,when:r}=t;this._trackers.add(n);e.widgetAdded.connect(((e,t)=>{const i=o(t);if(i){this.add(t,`${n}:${i}`)}}),this);e.widgetUpdated.connect(((e,t)=>{const i=o(t);if(i){const e=`${n}:${i}`;C.nameProperty.set(t,e);this._widgets.set(e,t)}}));const a=this._first;if(this._mode=="multiple-document"){const t=e.restore({args:i||(()=>h.JSONExt.emptyObject),command:s,connector:this._connector,name:o,registry:this._registry,when:r?[a].concat(r):a}).catch((e=>{console.error(e)}));this._promises.push(t);return t}e.defer({args:i||(()=>h.JSONExt.emptyObject),command:s,connector:this._connector,name:o,registry:this._registry,when:r?[a].concat(r):a});this._deferred.push(e)}async restoreDeferred(){if(!this.isDeferred){return null}const e=Promise.resolve();const t=this._deferred.map((t=>e.then((()=>t.restore()))));this._deferred.length=0;await Promise.all(t);return this._rehydrateMainArea(this._deferredMainArea)}save(e){var t;if(!this._promisesDone){const e="save() was called prematurely.";console.warn(e);return Promise.reject(e)}const n={};n.main=this.isDeferred?this._deferredMainArea:this._dehydrateMainArea(e.mainArea);if(this.isDeferred){const i=(t=e.mainArea)===null||t===void 0?void 0:t.currentWidget;if(i){const e=C.nameProperty.get(i);n.main={...n.main,current:e||undefined}}}n.down=this._dehydrateDownArea(e.downArea);n.left=this._dehydrateSideArea(e.leftArea);n.right=this._dehydrateSideArea(e.rightArea);n.relativeSizes=e.relativeSizes;n.top={...e.topArea};return this._connector.save(y,n)}_dehydrateMainArea(e){if(!e){return null}return C.serializeMain(e)}_rehydrateMainArea(e){if(!e){return null}return C.deserializeMain(e,this._widgets)}_dehydrateDownArea(e){if(!e){return null}const t={size:e.size};if(e.currentWidget){const n=C.nameProperty.get(e.currentWidget);if(n){t.current=n}}if(e.widgets){t.widgets=e.widgets.map((e=>C.nameProperty.get(e))).filter((e=>!!e))}return t}_rehydrateDownArea(e){var t;if(!e){return{currentWidget:null,size:0,widgets:null}}const n=this._widgets;const i=e.current&&n.has(`${e.current}`)?n.get(`${e.current}`):null;const s=!Array.isArray(e.widgets)?null:e.widgets.map((e=>n.has(`${e}`)?n.get(`${e}`):null)).filter((e=>!!e));return{currentWidget:i,size:(t=e.size)!==null&&t!==void 0?t:0,widgets:s}}_dehydrateSideArea(e){if(!e){return null}const t={collapsed:e.collapsed,visible:e.visible};if(e.currentWidget){const n=C.nameProperty.get(e.currentWidget);if(n){t.current=n}}if(e.widgets){t.widgets=e.widgets.map((e=>C.nameProperty.get(e))).filter((e=>!!e))}if(e.widgetStates){t.widgetStates=e.widgetStates}return t}_rehydrateSideArea(e){var t,n;if(!e){return{collapsed:true,currentWidget:null,visible:true,widgets:null,widgetStates:{["null"]:{sizes:null,expansionStates:null}}}}const i=this._widgets;const s=(t=e.collapsed)!==null&&t!==void 0?t:false;const o=e.current&&i.has(`${e.current}`)?i.get(`${e.current}`):null;const r=!Array.isArray(e.widgets)?null:e.widgets.map((e=>i.has(`${e}`)?i.get(`${e}`):null)).filter((e=>!!e));const a=e.widgetStates;return{collapsed:s,currentWidget:o,widgets:r,visible:(n=e.visible)!==null&&n!==void 0?n:true,widgetStates:a}}_onWidgetDisposed(e){const t=C.nameProperty.get(e);this._widgets.delete(t)}}var C;(function(e){e.nameProperty=new _.AttachedProperty({name:"name",create:e=>""});function t(n){if(!n||!n.type){return null}if(n.type==="tab-area"){return{type:"tab-area",currentIndex:n.currentIndex,widgets:n.widgets.map((t=>e.nameProperty.get(t))).filter((e=>!!e))}}return{type:"split-area",orientation:n.orientation,sizes:n.sizes,children:n.children.map(t).filter((e=>!!e))}}function n(n){const i={dock:n&&n.dock&&t(n.dock.main)||null};if(n){if(n.currentWidget){const t=e.nameProperty.get(n.currentWidget);if(t){i.current=t}}}return i}e.serializeMain=n;function i(e,t){if(!e){return null}const n=e.type||"unknown";if(n==="unknown"||n!=="tab-area"&&n!=="split-area"){console.warn(`Attempted to deserialize unknown type: ${n}`);return null}if(n==="tab-area"){const{currentIndex:n,widgets:i}=e;const s={type:"tab-area",currentIndex:n||0,widgets:i&&i.map((e=>t.get(e))).filter((e=>!!e))||[]};if(s.currentIndex>s.widgets.length-1){s.currentIndex=0}return s}const{orientation:s,sizes:o,children:r}=e;const a={type:"split-area",orientation:s,sizes:o||[],children:r&&r.map((e=>i(e,t))).filter((e=>!!e))||[]};return a}function s(e,t){if(!e){return null}const n=e.current||null;const s=e.dock||null;return{currentWidget:n&&t.has(n)&&t.get(n)||null,dock:s?{main:i(s,t)}:null}}e.deserializeMain=s})(C||(C={}));const x=new h.Token("@jupyterlab/application:IMimeDocumentTracker","A widget tracker for documents rendered using a mime renderer extension. Use this if you want to list and interact with documents rendered by such extensions.");function S(e){const t=[];const n="application-mimedocuments";const s=new i.WidgetTracker({namespace:n});e.forEach((e=>{let n=e.default;if(!e.hasOwnProperty("__esModule")){n=e}if(!Array.isArray(n)){n=[n]}n.forEach((e=>{t.push(k(s,e))}))}));t.push({id:"@jupyterlab/application-extension:mimedocument",description:"Provides a mime document widget tracker.",optional:[b],provides:x,autoStart:true,activate:(e,t)=>{if(t){void t.restore(s,{command:"docmanager:open",args:e=>({path:e.context.path,factory:j.factoryNameProperty.get(e)}),name:e=>`${e.context.path}:${j.factoryNameProperty.get(e)}`})}return s}});return t}function k(e,t){return{id:t.id,description:t.description,requires:[v.IRenderMimeRegistry,s.ITranslator],autoStart:true,activate:(n,i,s)=>{if(t.rank!==undefined){i.addFactory(t.rendererFactory,t.rank)}else{i.addFactory(t.rendererFactory)}if(!t.documentWidgetFactoryOptions){return}const o=n.docRegistry;let r=[];if(Array.isArray(t.documentWidgetFactoryOptions)){r=t.documentWidgetFactoryOptions}else{r=[t.documentWidgetFactoryOptions]}if(t.fileTypes){t.fileTypes.forEach((e=>{if(e.icon){e={...e,icon:d.LabIcon.resolve({icon:e.icon})}}n.docRegistry.addFileType(e)}))}r.forEach((n=>{const r=n.toolbarFactory?e=>n.toolbarFactory(e.content.renderer):undefined;const l=new a.MimeDocumentFactory({renderTimeout:t.renderTimeout,dataType:t.dataType,rendermime:i,modelName:n.modelName,name:n.name,primaryFileType:o.getFileType(n.primaryFileType),fileTypes:n.fileTypes,defaultFor:n.defaultFor,defaultRendered:n.defaultRendered,toolbarFactory:r,translator:s,factory:t.rendererFactory});o.addWidgetFactory(l);l.widgetCreated.connect(((t,n)=>{j.factoryNameProperty.set(n,l.name);n.context.pathChanged.connect((()=>{void e.save(n)}));void e.add(n)}))}))}}}var j;(function(e){e.factoryNameProperty=new _.AttachedProperty({name:"factoryName",create:()=>undefined})})(j||(j={}));var I=n(34236);var E=n(42856);var T=n(26568);var M=n(1143);const D="jp-LabShell";const A="jp-SideBar";const P="jp-mod-current";const L="jp-mod-active";const R=900;const N="jp-Activity";const O=new h.Token("@jupyterlab/application:ILabShell","A service for interacting with the JupyterLab shell. The top-level ``application`` object also has a reference to the shell, but it has a restricted interface in order to be agnostic to different shell implementations on the application. Use this to get more detailed information about currently active widgets and layout state.");class B extends M.Widget{constructor(e){super();this._dockChildHook=(e,t)=>{switch(t.type){case"child-added":t.child.addClass(N);this._tracker.add(t.child);break;case"child-removed":t.child.removeClass(N);this._tracker.remove(t.child);break;default:break}return true};this._activeChanged=new u.Signal(this);this._cachedLayout=null;this._currentChanged=new u.Signal(this);this._currentPath="";this._currentPathChanged=new u.Signal(this);this._modeChanged=new u.Signal(this);this._isRestored=false;this._layoutModified=new u.Signal(this);this._layoutDebouncer=new T.Debouncer((()=>{this._layoutModified.emit(undefined)}),0);this._restored=new h.PromiseDelegate;this._tracker=new M.FocusTracker;this._topHandlerHiddenByUser=false;this._idTypeMap=new Map;this._mainOptionsCache=new Map;this._sideOptionsCache=new Map;this._delayedWidget=new Array;this.addClass(D);this.id="main";if((e===null||e===void 0?void 0:e.waitForRestore)===false){this._userLayout={"multiple-document":{},"single-document":{}}}const t=this._skipLinkWidget=new F.SkipLinkWidget(this);this._skipLinkWidget.show();const n=new M.Panel;n.addClass("jp-skiplink-wrapper");n.addWidget(t);const i=this._headerPanel=new M.BoxPanel;const o=this._menuHandler=new F.PanelHandler;o.panel.node.setAttribute("role","navigation");const r=this._topHandler=new F.PanelHandler;r.panel.node.setAttribute("role","banner");const l=this._bottomPanel=new M.BoxPanel;l.node.setAttribute("role","contentinfo");const c=new M.BoxPanel;const p=this._vsplitPanel=new F.RestorableSplitPanel;const m=this._dockPanel=new d.DockPanelSvg({hiddenMode:M.Widget.HiddenMode.Display});E.MessageLoop.installMessageHook(m,this._dockChildHook);const g=this._hsplitPanel=new F.RestorableSplitPanel;const f=this._downPanel=new d.TabPanelSvg({tabsMovable:true});const v=this._leftHandler=new F.SideBarHandler;const _=this._rightHandler=new F.SideBarHandler;const b=new M.BoxLayout;i.id="jp-header-panel";o.panel.id="jp-menu-panel";r.panel.id="jp-top-panel";l.id="jp-bottom-panel";c.id="jp-main-content-panel";p.id="jp-main-vsplit-panel";m.id="jp-main-dock-panel";g.id="jp-main-split-panel";f.id="jp-down-stack";v.sideBar.addClass(A);v.sideBar.addClass("jp-mod-left");v.sideBar.node.setAttribute("role","complementary");v.stackedPanel.id="jp-left-stack";_.sideBar.addClass(A);_.sideBar.addClass("jp-mod-right");_.sideBar.node.setAttribute("role","complementary");_.stackedPanel.id="jp-right-stack";m.node.setAttribute("role","main");c.spacing=0;p.spacing=1;m.spacing=5;g.spacing=1;i.direction="top-to-bottom";p.orientation="vertical";c.direction="left-to-right";g.orientation="horizontal";l.direction="bottom-to-top";M.SplitPanel.setStretch(v.stackedPanel,0);M.SplitPanel.setStretch(f,0);M.SplitPanel.setStretch(m,1);M.SplitPanel.setStretch(_.stackedPanel,0);M.BoxPanel.setStretch(v.sideBar,0);M.BoxPanel.setStretch(g,1);M.BoxPanel.setStretch(_.sideBar,0);M.SplitPanel.setStretch(p,1);g.addWidget(v.stackedPanel);g.addWidget(m);g.addWidget(_.stackedPanel);p.addWidget(g);p.addWidget(f);c.addWidget(v.sideBar);c.addWidget(p);c.addWidget(_.sideBar);b.direction="top-to-bottom";b.spacing=0;p.setRelativeSizes([3,1]);g.setRelativeSizes([1,2.5,1]);M.BoxLayout.setStretch(i,0);M.BoxLayout.setStretch(o.panel,0);M.BoxLayout.setStretch(r.panel,0);M.BoxLayout.setStretch(c,1);M.BoxLayout.setStretch(l,0);b.addWidget(n);b.addWidget(i);b.addWidget(r.panel);b.addWidget(c);b.addWidget(l);this._headerPanel.hide();this._bottomPanel.hide();this._downPanel.hide();this.layout=b;this._tracker.currentChanged.connect(this._onCurrentChanged,this);this._tracker.activeChanged.connect(this._onActiveChanged,this);this._dockPanel.layoutModified.connect(this._onLayoutModified,this);this._vsplitPanel.updated.connect(this._onLayoutModified,this);this._downPanel.currentChanged.connect(this._onLayoutModified,this);this._downPanel.tabBar.tabMoved.connect(this._onTabPanelChanged,this);this._downPanel.stackedPanel.widgetRemoved.connect(this._onTabPanelChanged,this);this._leftHandler.updated.connect(this._onLayoutModified,this);this._rightHandler.updated.connect(this._onLayoutModified,this);this._hsplitPanel.updated.connect(this._onLayoutModified,this);const y=this._titleHandler=new F.TitleHandler(this);this.add(y,"top",{rank:100});if(this._dockPanel.mode==="multiple-document"){this._topHandler.addWidget(this._menuHandler.panel,100);y.hide()}else{b.insertWidget(3,this._menuHandler.panel)}this.translator=s.nullTranslator;this.currentChanged.connect(((e,t)=>{let n=t.newValue;let i=t.oldValue;if(i){i.title.changed.disconnect(this._updateTitlePanelTitle,this);if(i instanceof a.DocumentWidget){i.context.pathChanged.disconnect(this._updateCurrentPath,this)}}if(n){n.title.changed.connect(this._updateTitlePanelTitle,this);this._updateTitlePanelTitle();if(n instanceof a.DocumentWidget){n.context.pathChanged.connect(this._updateCurrentPath,this)}}this._updateCurrentPath()}))}get activeChanged(){return this._activeChanged}get activeWidget(){return this._tracker.activeWidget}get addButtonEnabled(){return this._dockPanel.addButtonEnabled}set addButtonEnabled(e){this._dockPanel.addButtonEnabled=e}get addRequested(){return this._dockPanel.addRequested}get currentChanged(){return this._currentChanged}get currentPath(){return this._currentPath}get currentPathChanged(){return this._currentPathChanged}get currentWidget(){return this._tracker.currentWidget}get layoutModified(){return this._layoutModified}get leftCollapsed(){return!this._leftHandler.sideBar.currentTitle}get rightCollapsed(){return!this._rightHandler.sideBar.currentTitle}get presentationMode(){return this.hasClass("jp-mod-presentationMode")}set presentationMode(e){this.toggleClass("jp-mod-presentationMode",e)}get mode(){return this._dockPanel.mode}set mode(e){const t=this._dockPanel;if(e===t.mode){return}const n=this.currentWidget;if(e==="single-document"){this._cachedLayout=t.saveLayout();t.mode=e;if(this.currentWidget){t.activateWidget(this.currentWidget)}this.layout.insertWidget(3,this._menuHandler.panel);this._titleHandler.show();this._updateTitlePanelTitle();if(this._topHandlerHiddenByUser){this._topHandler.panel.hide()}}else{const i=Array.from(t.widgets());t.mode=e;if(this._cachedLayout){F.normalizeAreaConfig(t,this._cachedLayout.main);t.restoreLayout(this._cachedLayout);this._cachedLayout=null}if(this._layoutRestorer.isDeferred){this._layoutRestorer.restoreDeferred().then((e=>{if(e){const{currentWidget:t,dock:n}=e;if(n){this._dockPanel.restoreLayout(n)}if(t){this.activateById(t.id)}}})).catch((e=>{console.error("Failed to restore the deferred layout.");console.error(e)}))}i.forEach((e=>{if(!e.parent){this._addToMainArea(e,{...this._mainOptionsCache.get(e),activate:false})}}));this._mainOptionsCache.clear();if(n){t.activateWidget(n)}this.add(this._menuHandler.panel,"top",{rank:100});this._titleHandler.hide()}this.node.dataset.shellMode=e;this._downPanel.fit();this._modeChanged.emit(e)}get modeChanged(){return this._modeChanged}get restored(){return this._restored.promise}get translator(){var e;return(e=this._translator)!==null&&e!==void 0?e:s.nullTranslator}set translator(e){if(e!==this._translator){this._translator=e;d.TabBarSvg.translator=e;const t=e.load("jupyterlab");this._menuHandler.panel.node.setAttribute("aria-label",t.__("main menu"));this._leftHandler.sideBar.node.setAttribute("aria-label",t.__("main sidebar"));this._leftHandler.sideBar.contentNode.setAttribute("aria-label",t.__("main sidebar"));this._rightHandler.sideBar.node.setAttribute("aria-label",t.__("alternate sidebar"));this._rightHandler.sideBar.contentNode.setAttribute("aria-label",t.__("alternate sidebar"));this._topHandler.panel.node.setAttribute("aria-label",t.__("Top Bar"));this._bottomPanel.node.setAttribute("aria-label",t.__("Bottom Panel"));this._dockPanel.node.setAttribute("aria-label",t.__("Main Content"))}}get userLayout(){return h.JSONExt.deepCopy(this._userLayout)}activateById(e){if(this._leftHandler.has(e)){this._leftHandler.activate(e);return}if(this._rightHandler.has(e)){this._rightHandler.activate(e);return}const t=this._downPanel.tabBar.titles.findIndex((t=>t.owner.id===e));if(t>=0){this._downPanel.currentIndex=t;return}const n=this._dockPanel;const i=(0,I.find)(n.widgets(),(t=>t.id===e));if(i){n.activateWidget(i)}}activateArea(e="main"){switch(e){case"main":{const e=this._currentTabBar();if(!e){return}if(e.currentTitle){e.currentTitle.owner.activate()}}return;case"left":case"right":case"header":case"top":case"menu":case"bottom":console.debug(`Area: ${e} activation not yet implemented`);break;default:throw new Error(`Invalid area: ${e}`)}}activateNextTab(){const e=this._currentTabBar();if(!e){return}const t=e.currentIndex;if(t===-1){return}if(t<e.titles.length-1){e.currentIndex+=1;if(e.currentTitle){e.currentTitle.owner.activate()}return}if(t===e.titles.length-1){const e=this._adjacentBar("next");if(e){e.currentIndex=0;if(e.currentTitle){e.currentTitle.owner.activate()}}}}activatePreviousTab(){const e=this._currentTabBar();if(!e){return}const t=e.currentIndex;if(t===-1){return}if(t>0){e.currentIndex-=1;if(e.currentTitle){e.currentTitle.owner.activate()}return}if(t===0){const e=this._adjacentBar("previous");if(e){const t=e.titles.length;e.currentIndex=t-1;if(e.currentTitle){e.currentTitle.owner.activate()}}}}activateNextTabBar(){const e=this._adjacentBar("next");if(e){if(e.currentTitle){e.currentTitle.owner.activate()}}}activatePreviousTabBar(){const e=this._adjacentBar("previous");if(e){if(e.currentTitle){e.currentTitle.owner.activate()}}}add(e,t="main",n){var i;if(!this._userLayout){this._delayedWidget.push({widget:e,area:t,options:n});return}let s;if((n===null||n===void 0?void 0:n.type)&&this._userLayout[this.mode][n.type]){s=this._userLayout[this.mode][n.type];this._idTypeMap.set(e.id,n.type)}else{s=this._userLayout[this.mode][e.id]}if(n===null||n===void 0?void 0:n.type){this._idTypeMap.set(e.id,n.type);e.disposed.connect((()=>{this._idTypeMap.delete(e.id)}))}t=(i=s===null||s===void 0?void 0:s.area)!==null&&i!==void 0?i:t;n=n||(s===null||s===void 0?void 0:s.options)?{...n,...s===null||s===void 0?void 0:s.options}:undefined;switch(t||"main"){case"bottom":return this._addToBottomArea(e,n);case"down":return this._addToDownArea(e,n);case"header":return this._addToHeaderArea(e,n);case"left":return this._addToLeftArea(e,n);case"main":return this._addToMainArea(e,n);case"menu":return this._addToMenuArea(e,n);case"right":return this._addToRightArea(e,n);case"top":return this._addToTopArea(e,n);default:throw new Error(`Invalid area: ${t}`)}}move(e,t,n){var i;const s=(i=this._idTypeMap.get(e.id))!==null&&i!==void 0?i:e.id;for(const o of["single-document","multiple-document"].filter((e=>!n||e===n))){this._userLayout[o][s]={...this._userLayout[o][s],area:t}}this.add(e,t);return this._userLayout}collapseLeft(){this._leftHandler.collapse();this._onLayoutModified()}collapseRight(){this._rightHandler.collapse();this._onLayoutModified()}dispose(){if(this.isDisposed){return}this._layoutDebouncer.dispose();super.dispose()}expandLeft(){this._leftHandler.expand();this._onLayoutModified()}expandRight(){this._rightHandler.expand();this._onLayoutModified()}closeAll(){Array.from(this._dockPanel.widgets()).forEach((e=>e.close()));this._downPanel.stackedPanel.widgets.forEach((e=>e.close()))}isSideTabBarVisible(e){switch(e){case"left":return this._leftHandler.isVisible;case"right":return this._rightHandler.isVisible}}isTopInSimpleModeVisible(){return!this._topHandlerHiddenByUser}isEmpty(e){switch(e){case"bottom":return this._bottomPanel.widgets.length===0;case"down":return this._downPanel.stackedPanel.widgets.length===0;case"header":return this._headerPanel.widgets.length===0;case"left":return this._leftHandler.stackedPanel.widgets.length===0;case"main":return this._dockPanel.isEmpty;case"menu":return this._menuHandler.panel.widgets.length===0;case"right":return this._rightHandler.stackedPanel.widgets.length===0;case"top":return this._topHandler.panel.widgets.length===0;default:return true}}async restoreLayout(e,t,n={}){var i,s,o,r;this._userLayout={"single-document":(i=n["single-document"])!==null&&i!==void 0?i:{},"multiple-document":(s=n["multiple-document"])!==null&&s!==void 0?s:{}};this._delayedWidget.forEach((({widget:e,area:t,options:n})=>{this.add(e,t,n)}));this._delayedWidget.length=0;this._layoutRestorer=t;const a=await t.fetch();const{mainArea:l,downArea:d,leftArea:c,rightArea:h,topArea:u,relativeSizes:p}=a;if(l){const{currentWidget:t,dock:n}=l;if(n&&e==="multiple-document"){this._dockPanel.restoreLayout(n)}if(e){this.mode=e}if(t){this.activateById(t.id)}}else{if(e){this.mode=e}}if((u===null||u===void 0?void 0:u.simpleVisibility)!==undefined){this._topHandlerHiddenByUser=!u.simpleVisibility;if(this.mode==="single-document"){this._topHandler.panel.setHidden(this._topHandlerHiddenByUser)}}if(d){const{currentWidget:e,widgets:t,size:n}=d;const i=(o=t===null||t===void 0?void 0:t.map((e=>e.id)))!==null&&o!==void 0?o:[];this._downPanel.tabBar.titles.filter((e=>!i.includes(e.owner.id))).map((e=>e.owner.close()));const s=this._downPanel.tabBar.titles.map((e=>e.owner.id));t===null||t===void 0?void 0:t.filter((e=>!s.includes(e.id))).map((e=>this._downPanel.addWidget(e)));while(!I.ArrayExt.shallowEqual(i,this._downPanel.tabBar.titles.map((e=>e.owner.id)))){this._downPanel.tabBar.titles.forEach(((e,t)=>{const n=i.findIndex((t=>e.owner.id==t));if(n>=0&&n!=t){this._downPanel.tabBar.insertTab(n,e)}}))}if(e){const t=this._downPanel.stackedPanel.widgets.findIndex((t=>t.id===e.id));if(t){this._downPanel.currentIndex=t;(r=this._downPanel.currentWidget)===null||r===void 0?void 0:r.activate()}}if(n&&n>0){this._vsplitPanel.setRelativeSizes([1-n,n])}else{this._downPanel.stackedPanel.widgets.forEach((e=>e.close()));this._downPanel.hide()}}if(c){this._leftHandler.rehydrate(c)}else{if(e==="single-document"){this.collapseLeft()}}if(h){this._rightHandler.rehydrate(h)}else{if(e==="single-document"){this.collapseRight()}}if(p){this._hsplitPanel.setRelativeSizes(p)}if(!this._isRestored){E.MessageLoop.flush();this._restored.resolve(a)}}saveLayout(){const e={mainArea:{currentWidget:this._tracker.currentWidget,dock:this.mode==="single-document"?this._cachedLayout||this._dockPanel.saveLayout():this._dockPanel.saveLayout()},downArea:{currentWidget:this._downPanel.currentWidget,widgets:Array.from(this._downPanel.stackedPanel.widgets),size:this._vsplitPanel.relativeSizes()[1]},leftArea:this._leftHandler.dehydrate(),rightArea:this._rightHandler.dehydrate(),topArea:{simpleVisibility:!this._topHandlerHiddenByUser},relativeSizes:this._hsplitPanel.relativeSizes()};return e}toggleTopInSimpleModeVisibility(){if(this.mode==="single-document"){if(this._topHandler.panel.isVisible){this._topHandlerHiddenByUser=true;this._topHandler.panel.hide()}else{this._topHandlerHiddenByUser=false;this._topHandler.panel.show();this._updateTitlePanelTitle()}this._onLayoutModified()}}toggleSideTabBarVisibility(e){if(e==="right"){if(this._rightHandler.isVisible){this._rightHandler.hide()}else{this._rightHandler.show()}}else{if(this._leftHandler.isVisible){this._leftHandler.hide()}else{this._leftHandler.show()}}}updateConfig(e){if(e.hiddenMode){switch(e.hiddenMode){case"display":this._dockPanel.hiddenMode=M.Widget.HiddenMode.Display;break;case"scale":this._dockPanel.hiddenMode=M.Widget.HiddenMode.Scale;break;case"contentVisibility":this._dockPanel.hiddenMode=M.Widget.HiddenMode.ContentVisibility;break}}}widgets(e){switch(e!==null&&e!==void 0?e:"main"){case"main":return this._dockPanel.widgets();case"left":return(0,I.map)(this._leftHandler.sideBar.titles,(e=>e.owner));case"right":return(0,I.map)(this._rightHandler.sideBar.titles,(e=>e.owner));case"header":return this._headerPanel.children();case"top":return this._topHandler.panel.children();case"menu":return this._menuHandler.panel.children();case"bottom":return this._bottomPanel.children();default:throw new Error(`Invalid area: ${e}`)}}onAfterAttach(e){this.node.dataset.shellMode=this.mode}_updateTitlePanelTitle(){let e=this.currentWidget;const t=this._titleHandler.inputElement;t.value=e?e.title.label:"";t.title=e?e.title.caption:""}_updateCurrentPath(){let e=this.currentWidget;let t="";if(e&&e instanceof a.DocumentWidget){t=e.context.path}this._currentPathChanged.emit({newValue:t,oldValue:this._currentPath});this._currentPath=t}_addToLeftArea(e,t){if(!e.id){console.error("Widgets added to app shell must have unique id property.");return}t=t||this._sideOptionsCache.get(e)||{};this._sideOptionsCache.set(e,t);const n="rank"in t?t.rank:R;this._leftHandler.addWidget(e,n);this._onLayoutModified()}_addToMainArea(e,t){if(!e.id){console.error("Widgets added to app shell must have unique id property.");return}t=t||{};const n=this._dockPanel;const i=t.mode||"tab-after";let s=this.currentWidget;if(t.ref){s=(0,I.find)(n.widgets(),(e=>e.id===t.ref))||null}const{title:o}=e;o.dataset={...o.dataset,id:e.id};if(o.icon instanceof d.LabIcon){o.icon=o.icon.bindprops({stylesheet:"mainAreaTab"})}else if(typeof o.icon==="string"||!o.icon){o.iconClass=(0,d.classes)(o.iconClass,"jp-Icon")}n.addWidget(e,{mode:i,ref:s});if(n.mode==="single-document"){this._mainOptionsCache.set(e,t)}if(t.activate!==false){n.activateWidget(e)}}_addToRightArea(e,t){if(!e.id){console.error("Widgets added to app shell must have unique id property.");return}t=t||this._sideOptionsCache.get(e)||{};const n="rank"in t?t.rank:R;this._sideOptionsCache.set(e,t);this._rightHandler.addWidget(e,n);this._onLayoutModified()}_addToTopArea(e,t){var n;if(!e.id){console.error("Widgets added to app shell must have unique id property.");return}t=t||{};const i=(n=t.rank)!==null&&n!==void 0?n:R;this._topHandler.addWidget(e,i);this._onLayoutModified();if(this._topHandler.panel.isHidden){this._topHandler.panel.show()}}_addToMenuArea(e,t){var n;if(!e.id){console.error("Widgets added to app shell must have unique id property.");return}t=t||{};const i=(n=t.rank)!==null&&n!==void 0?n:R;this._menuHandler.addWidget(e,i);this._onLayoutModified();if(this._menuHandler.panel.isHidden){this._menuHandler.panel.show()}}_addToHeaderArea(e,t){if(!e.id){console.error("Widgets added to app shell must have unique id property.");return}this._headerPanel.addWidget(e);this._onLayoutModified();if(this._headerPanel.isHidden){this._headerPanel.show()}}_addToBottomArea(e,t){if(!e.id){console.error("Widgets added to app shell must have unique id property.");return}this._bottomPanel.addWidget(e);this._onLayoutModified();if(this._bottomPanel.isHidden){this._bottomPanel.show()}}_addToDownArea(e,t){if(!e.id){console.error("Widgets added to app shell must have unique id property.");return}t=t||{};const{title:n}=e;n.dataset={...n.dataset,id:e.id};if(n.icon instanceof d.LabIcon){n.icon=n.icon.bindprops({stylesheet:"mainAreaTab"})}else if(typeof n.icon==="string"||!n.icon){n.iconClass=(0,d.classes)(n.iconClass,"jp-Icon")}this._downPanel.addWidget(e);this._onLayoutModified();if(this._downPanel.isHidden){this._downPanel.show()}}_adjacentBar(e){const t=this._currentTabBar();if(!t){return null}const n=Array.from(this._dockPanel.tabBars());const i=n.length;const s=n.indexOf(t);if(e==="previous"){return s>0?n[s-1]:s===0?n[i-1]:null}return s<i-1?n[s+1]:s===i-1?n[0]:null}_currentTabBar(){const e=this._tracker.currentWidget;if(!e){return null}const t=e.title;const n=this._dockPanel.tabBars();return(0,I.find)(n,(e=>e.titles.indexOf(t)>-1))||null}_onActiveChanged(e,t){if(t.newValue){t.newValue.title.className+=` ${L}`}if(t.oldValue){t.oldValue.title.className=t.oldValue.title.className.replace(L,"")}this._activeChanged.emit(t)}_onCurrentChanged(e,t){if(t.newValue){t.newValue.title.className+=` ${P}`}if(t.oldValue){t.oldValue.title.className=t.oldValue.title.className.replace(P,"")}this._currentChanged.emit(t);this._onLayoutModified()}_onTabPanelChanged(){if(this._downPanel.stackedPanel.widgets.length===0){this._downPanel.hide()}this._onLayoutModified()}_onLayoutModified(){void this._layoutDebouncer.invoke()}}var F;(function(e){function t(e,t){return e.rank-t.rank}e.itemCmp=t;function n(e,t){if(!t){return}if(t.type==="tab-area"){t.widgets=t.widgets.filter((t=>!t.isDisposed&&t.parent===e));return}t.children.forEach((t=>{n(e,t)}))}e.normalizeAreaConfig=n;class i{constructor(){this._panelChildHook=(e,t)=>{switch(t.type){case"child-added":{const e=t.child;if(this._items.find((t=>t.widget===e))){break}const n=this._items[this._items.length-1].rank;this._items.push({widget:e,rank:n})}break;case"child-removed":{const e=t.child;I.ArrayExt.removeFirstWhere(this._items,(t=>t.widget===e))}break;default:break}return true};this._items=new Array;this._panel=new M.Panel;E.MessageLoop.installMessageHook(this._panel,this._panelChildHook)}get panel(){return this._panel}addWidget(t,n){t.parent=null;const i={widget:t,rank:n};const s=I.ArrayExt.upperBound(this._items,i,e.itemCmp);I.ArrayExt.insert(this._items,s,i);this._panel.insertWidget(s,t)}}e.PanelHandler=i;class s{constructor(){this._isHiddenByUser=false;this._items=new Array;this._updated=new u.Signal(this);this._sideBar=new M.TabBar({insertBehavior:"none",removeBehavior:"none",allowDeselect:true,orientation:"vertical"});this._stackedPanel=new M.StackedPanel;this._sideBar.hide();this._stackedPanel.hide();this._lastCurrent=null;this._sideBar.currentChanged.connect(this._onCurrentChanged,this);this._sideBar.tabActivateRequested.connect(this._onTabActivateRequested,this);this._stackedPanel.widgetRemoved.connect(this._onWidgetRemoved,this)}get isVisible(){return this._sideBar.isVisible}get sideBar(){return this._sideBar}get stackedPanel(){return this._stackedPanel}get updated(){return this._updated}_onHandleMoved(){return this._refreshVisibility()}_onExpansionToggle(e,t){return this._refreshVisibility()}expand(){const e=this._lastCurrent||this._items.length>0&&this._items[0].widget;if(e){this.activate(e.id)}}activate(e){const t=this._findWidgetByID(e);if(t){this._sideBar.currentTitle=t.title;t.activate()}}has(e){return this._findWidgetByID(e)!==null}collapse(){this._sideBar.currentTitle=null}addWidget(e,t){var n,i,s,o;e.parent=null;e.hide();const r={widget:e,rank:t};const a=this._findInsertIndex(r);I.ArrayExt.insert(this._items,a,r);this._stackedPanel.insertWidget(a,e);const l=this._sideBar.insertTab(a,e.title);l.dataset={id:e.id};if(l.icon instanceof d.LabIcon){l.icon=l.icon.bindprops({stylesheet:"sideBar"})}else if(typeof l.icon==="string"&&l.icon!=""){l.iconClass=(0,d.classes)(l.iconClass,"jp-Icon","jp-Icon-20")}else if(!l.icon&&!l.label){l.icon=d.tabIcon.bindprops({stylesheet:"sideBar"})}(i=(n=e.content)===null||n===void 0?void 0:n.expansionToggled)===null||i===void 0?void 0:i.connect(this._onExpansionToggle,this);(o=(s=e.content)===null||s===void 0?void 0:s.handleMoved)===null||o===void 0?void 0:o.connect(this._onHandleMoved,this);this._refreshVisibility()}dehydrate(){const e=this._sideBar.currentTitle===null;const t=Array.from(this._stackedPanel.widgets);const n=t[this._sideBar.currentIndex];const i={};this._stackedPanel.widgets.forEach((e=>{if(e.id&&e.content instanceof M.SplitPanel){i[e.id]={sizes:e.content.relativeSizes(),expansionStates:e.content.widgets.map((e=>e.isVisible))}}}));return{collapsed:e,currentWidget:n,visible:!this._isHiddenByUser,widgets:t,widgetStates:i}}rehydrate(e){if(e.currentWidget){this.activate(e.currentWidget.id)}if(e.collapsed){this.collapse()}if(!e.visible){this.hide()}if(e.widgetStates){this._stackedPanel.widgets.forEach((t=>{var n;if(t.id&&t.content instanceof M.SplitPanel){const i=(n=e.widgetStates[t.id])!==null&&n!==void 0?n:{};t.content.widgets.forEach(((e,n)=>{var s;const o=((s=i.expansionStates)!==null&&s!==void 0?s:[])[n];if(typeof o==="boolean"&&t.content instanceof M.AccordionPanel){o?t.content.expand(n):t.content.collapse(n)}}));if(i.sizes){t.content.setRelativeSizes(i.sizes)}}}))}}hide(){this._isHiddenByUser=true;this._refreshVisibility()}show(){this._isHiddenByUser=false;this._refreshVisibility()}_findInsertIndex(t){return I.ArrayExt.upperBound(this._items,t,e.itemCmp)}_findWidgetIndex(e){return I.ArrayExt.findFirstIndex(this._items,(t=>t.widget===e))}_findWidgetByTitle(e){const t=(0,I.find)(this._items,(t=>t.widget.title===e));return t?t.widget:null}_findWidgetByID(e){const t=(0,I.find)(this._items,(t=>t.widget.id===e));return t?t.widget:null}_refreshVisibility(){this._stackedPanel.setHidden(this._sideBar.currentTitle===null);this._sideBar.setHidden(this._isHiddenByUser||this._sideBar.titles.length===0);this._updated.emit()}_onCurrentChanged(e,t){const n=t.previousTitle?this._findWidgetByTitle(t.previousTitle):null;const i=t.currentTitle?this._findWidgetByTitle(t.currentTitle):null;if(n){n.hide()}if(i){i.show()}this._lastCurrent=i||n;this._refreshVisibility()}_onTabActivateRequested(e,t){t.title.owner.activate()}_onWidgetRemoved(e,t){if(t===this._lastCurrent){this._lastCurrent=null}I.ArrayExt.removeAt(this._items,this._findWidgetIndex(t));this._sideBar.removeTab(t.title);this._refreshVisibility()}}e.SideBarHandler=s;class o extends M.Widget{constructor(e){super();this.addClass("jp-skiplink");this.id="jp-skiplink";this._shell=e;this._createSkipLink("Skip to main panel","main")}handleEvent(e){var t,n;switch(e.type){case"click":if(e.target instanceof HTMLElement){this._shell.activateArea((n=(t=e.target)===null||t===void 0?void 0:t.dataset)===null||n===void 0?void 0:n.targetarea)}break}}onAfterAttach(e){super.onAfterAttach(e);this.node.addEventListener("click",this)}onBeforeDetach(e){this.node.removeEventListener("click",this);super.onBeforeDetach(e)}_createSkipLink(e,t){const n=document.createElement("a");n.href="#";n.tabIndex=0;n.text=e;n.className="skip-link";n.dataset["targetarea"]=t;this.node.appendChild(n)}}e.SkipLinkWidget=o;class r extends M.Widget{constructor(e){super();this._selected=false;const t=document.createElement("input");t.type="text";this.node.appendChild(t);this._shell=e;this.id="jp-title-panel-title"}onAfterAttach(e){super.onAfterAttach(e);this.inputElement.addEventListener("keyup",this);this.inputElement.addEventListener("click",this);this.inputElement.addEventListener("blur",this)}onBeforeDetach(e){super.onBeforeDetach(e);this.inputElement.removeEventListener("keyup",this);this.inputElement.removeEventListener("click",this);this.inputElement.removeEventListener("blur",this)}handleEvent(e){switch(e.type){case"keyup":void this._evtKeyUp(e);break;case"click":this._evtClick(e);break;case"blur":this._selected=false;break}}async _evtKeyUp(e){if(e.key=="Enter"){const e=this._shell.currentWidget;if(e==null){return}const t=e.title.label;const n=this.inputElement;const i=n.value;n.blur();if(i!==t){e.title.label=i}else{n.value=t}}}_evtClick(e){if(e.button!==0||this._selected){return}const t=this.inputElement;e.preventDefault();e.stopPropagation();this._selected=true;const n=t.value.indexOf(".");if(n===-1){t.select()}else{t.setSelectionRange(0,n)}}get inputElement(){return this.node.children[0]}}e.TitleHandler=r;class a extends M.SplitPanel{constructor(e={}){super(e);this._updated=new u.Signal(this)}get updated(){return this._updated}onUpdateRequest(e){super.onUpdateRequest(e);this._updated.emit()}}e.RestorableSplitPanel=a})(F||(F={}));var z=n(90044);class H{constructor(e){this._busyCount=0;this._dirtyCount=0;this._busySignal=new u.Signal(e);this._dirtySignal=new u.Signal(e)}get busySignal(){return this._busySignal}get dirtySignal(){return this._dirtySignal}get isBusy(){return this._busyCount>0}get isDirty(){return this._dirtyCount>0}setDirty(){const e=this.isDirty;this._dirtyCount++;if(this.isDirty!==e){this._dirtySignal.emit(this.isDirty)}return new z.DisposableDelegate((()=>{const e=this.isDirty;this._dirtyCount=Math.max(0,this._dirtyCount-1);if(this.isDirty!==e){this._dirtySignal.emit(this.isDirty)}}))}setBusy(){const e=this.isBusy;this._busyCount++;if(this.isBusy!==e){this._busySignal.emit(this.isBusy)}return new z.DisposableDelegate((()=>{const e=this.isBusy;this._busyCount--;if(this.isBusy!==e){this._busySignal.emit(this.isBusy)}}))}}class W extends p{constructor(e={shell:new B}){super({...e,shell:e.shell||new B,serviceManager:e.serviceManager||new l.ServiceManager({standby:()=>!this._info.isConnected||"when-hidden"})});this.name=f.PageConfig.getOption("appName")||"JupyterLab";this.namespace=f.PageConfig.getOption("appNamespace")||this.name;this.registerPluginErrors=[];this.status=new H(this);this.version=f.PageConfig.getOption("appVersion")||"unknown";this._allPluginsActivated=new h.PromiseDelegate;this._info=new W.Info(e);this.restored=this.shell.restored.then((async()=>{const e=[];const t=this.activateDeferredPlugins().catch((e=>{console.error("Error when activating deferred plugins\n:",e)}));e.push(t);if(this._info.deferred){const t=Promise.all(this._info.deferred.matches.map((e=>this.activatePlugin(e)))).catch((e=>{console.error("Error when activating customized list of deferred plugins:\n",e)}));e.push(t)}Promise.all(e).then((()=>{this._allPluginsActivated.resolve()})).catch((()=>undefined))})).catch((()=>undefined));const t=W.defaultPaths.urls;const n=W.defaultPaths.directories;const i=e.paths&&e.paths.urls||{};const s=e.paths&&e.paths.directories||{};this._paths={urls:Object.keys(t).reduce(((e,n)=>{if(n in i){const t=i[n];e[n]=t}else{e[n]=t[n]}return e}),{}),directories:Object.keys(W.defaultPaths.directories).reduce(((e,t)=>{if(t in s){const n=s[t];e[t]=n}else{e[t]=n[t]}return e}),{})};if(this._info.devMode){this.shell.addClass("jp-mod-devMode")}this.docRegistry.addModelFactory(new a.Base64ModelFactory);if(e.mimeExtensions){for(const t of S(e.mimeExtensions)){this.registerPlugin(t)}}}get info(){return this._info}get paths(){return this._paths}get allPluginsActivated(){return this._allPluginsActivated.promise}registerPluginModule(e){let t=e.default;if(!e.hasOwnProperty("__esModule")){t=e}if(!Array.isArray(t)){t=[t]}t.forEach((e=>{try{this.registerPlugin(e)}catch(t){this.registerPluginErrors.push(t)}}))}registerPluginModules(e){e.forEach((e=>{this.registerPluginModule(e)}))}evtKeydown(e){const t=new h.PromiseDelegate;this.commands.holdKeyBindingExecution(e,t.promise);this.commands.processKeydownEvent(e);const n=e.target;if(!n){return t.resolve(true)}let i=null;let s=null;const o=()=>{if(i){n.removeEventListener("beforeinput",i)}if(s){n.removeEventListener("keyup",s)}};const r=Promise.race([new Promise((e=>{i=t=>{switch(t.inputType){case"historyUndo":case"historyRedo":{if(t.target instanceof Element&&t.target.closest("[data-jp-undoer]")){t.preventDefault();o();return e(false)}break}case"insertLineBreak":{if(t.target instanceof Element&&t.target.closest(".jp-Cell")){t.preventDefault();o();return e(false)}break}}o();return e(true)};n.addEventListener("beforeinput",i,{once:true})})),new Promise((t=>{s=n=>{if(n.code===e.code){o();return t(false)}};n.addEventListener("keyup",s,{once:true})})),new Promise((e=>{setTimeout((()=>{o();return e(false)}),V.INPUT_GUARD_TIMEOUT)}))]);r.then((e=>{t.resolve(!e)})).catch(console.warn)}}(function(e){e.IInfo=new h.Token("@jupyterlab/application:IInfo","A service providing metadata about the current application, including disabled extensions and whether dev mode is enabled.");class t{constructor({connectionStatus:t,...n}={}){var i,s,o,r,a,d,c;this._connectionStatus=t!==null&&t!==void 0?t:new l.ConnectionStatus;this._availablePlugins=(i=n.availablePlugins)!==null&&i!==void 0?i:e.defaultInfo.availablePlugins;this._devMode=(s=n.devMode)!==null&&s!==void 0?s:e.defaultInfo.devMode;this._deferred=JSON.parse(JSON.stringify((o=n.deferred)!==null&&o!==void 0?o:e.defaultInfo.deferred));this._disabled=JSON.parse(JSON.stringify((r=n.disabled)!==null&&r!==void 0?r:e.defaultInfo.disabled));this._filesCached=(a=n.filesCached)!==null&&a!==void 0?a:e.defaultInfo.filesCached;this._mimeExtensions=JSON.parse(JSON.stringify((d=n.mimeExtensions)!==null&&d!==void 0?d:e.defaultInfo.mimeExtensions));this.isConnected=(c=n.isConnected)!==null&&c!==void 0?c:e.defaultInfo.isConnected}get availablePlugins(){return this._availablePlugins}get devMode(){return this._devMode}get deferred(){return this._deferred}get disabled(){return this._disabled}get filesCached(){return this._filesCached}get isConnected(){return this._connectionStatus.isConnected}set isConnected(e){this._connectionStatus.isConnected=e}get mimeExtensions(){return this._mimeExtensions}}e.Info=t;e.defaultInfo={devMode:f.PageConfig.getOption("devMode").toLowerCase()==="true",deferred:{patterns:[],matches:[]},disabled:{patterns:[],matches:[]},mimeExtensions:[],availablePlugins:[],filesCached:f.PageConfig.getOption("cacheFiles").toLowerCase()==="true",isConnected:true};e.defaultPaths={urls:{base:f.PageConfig.getOption("baseUrl"),notFound:f.PageConfig.getOption("notFoundUrl"),app:f.PageConfig.getOption("appUrl"),doc:f.PageConfig.getOption("docUrl"),static:f.PageConfig.getOption("staticUrl"),settings:f.PageConfig.getOption("settingsUrl"),themes:f.PageConfig.getOption("themesUrl"),translations:f.PageConfig.getOption("translationsApiUrl"),hubHost:f.PageConfig.getOption("hubHost")||undefined,hubPrefix:f.PageConfig.getOption("hubPrefix")||undefined,hubUser:f.PageConfig.getOption("hubUser")||undefined,hubServerName:f.PageConfig.getOption("hubServerName")||undefined},directories:{appSettings:f.PageConfig.getOption("appSettingsDir"),schemas:f.PageConfig.getOption("schemasDir"),static:f.PageConfig.getOption("staticDir"),templates:f.PageConfig.getOption("templatesDir"),themes:f.PageConfig.getOption("themesDir"),userSettings:f.PageConfig.getOption("userSettingsDir"),serverRoot:f.PageConfig.getOption("serverRoot"),workspaces:f.PageConfig.getOption("workspacesDir")}}})(W||(W={}));var V;(function(e){e.INPUT_GUARD_TIMEOUT=10})(V||(V={}));class U{constructor(e){this.stop=new h.Token("@jupyterlab/application:Router#stop");this._routed=new u.Signal(this);this._rules=new Map;this.base=e.base;this.commands=e.commands}get current(){var e,t;const{base:n}=this;const i=f.URLExt.parse(window.location.href);const{search:s,hash:o}=i;const r=(t=(e=i.pathname)===null||e===void 0?void 0:e.replace(n,"/"))!==null&&t!==void 0?t:"";const a=r+s+o;return{hash:o,path:r,request:a,search:s}}get routed(){return this._routed}navigate(e,t={}){const{base:n}=this;const{history:i}=window;const{hard:s}=t;const o=document.location.href;const r=e&&e.indexOf(n)===0?e:f.URLExt.join(n,e);if(r===o){return s?this.reload():undefined}i.pushState({},"",r);if(s){return this.reload()}if(!t.skipRouting){requestAnimationFrame((()=>{void this.route()}))}}register(e){var t;const{command:n,pattern:i}=e;const s=(t=e.rank)!==null&&t!==void 0?t:100;const o=this._rules;o.set(i,{command:n,rank:s});return new z.DisposableDelegate((()=>{o.delete(i)}))}reload(){window.location.reload()}route(){const{commands:e,current:t,stop:n}=this;const{request:i}=t;const s=this._routed;const o=this._rules;const r=[];o.forEach(((e,t)=>{if(i===null||i===void 0?void 0:i.match(t)){r.push(e)}}));const a=r.sort(((e,t)=>t.rank-e.rank));const l=new h.PromiseDelegate;const d=async()=>{if(!a.length){s.emit(t);l.resolve(undefined);return}const{command:o}=a.pop();try{const i=this.current.request;const s=await e.execute(o,t);if(s===n){a.length=0;console.debug(`Routing ${i} was short-circuited by ${o}`)}}catch(r){console.warn(`Routing ${i} to ${o} failed`,r)}void d()};void d();return l.promise}}const q=new h.Token("@jupyterlab/application:IConnectionLost",`A service for invoking the dialog shown\n  when JupyterLab has lost its connection to the server. Use this if, for some reason,\n  you want to bring up the "connection lost" dialog under new circumstances.`);const $=new h.Token("@jupyterlab/application:ILabStatus",`A service for interacting with the application busy/dirty\n  status. Use this if you want to set the application "busy" favicon, or to set\n  the application "dirty" status, which asks the user for confirmation before leaving the application page.`);const K=new h.Token("@jupyterlab/application:IRouter","The URL router used by the application. Use this to add custom URL-routing for your extension (e.g., to invoke a command if the user navigates to a sub-path).");const J=new h.Token("@jupyterlab/application:ITreePathUpdater","A service to update the tree path.");function G(e){const{id:t,commands:n,shell:i,semanticCommands:o,default:r,overrides:a,trans:l}=e;n.addCommand(t,{...Y({commands:n,shell:i},o,r!==null&&r!==void 0?r:{},l!==null&&l!==void 0?l:s.nullTranslator.load("jupyterlab")),...a});const d=Array.isArray(o)?o:[o];const c=(e,n)=>{if(n.id){if(n.id===t&&n.type==="removed"){e.commandChanged.disconnect(c)}else{const i=d.reduce(((e,t)=>e.concat(t.ids)),[]);if(i.includes(n.id)){switch(n.type){case"changed":case"many-changed":e.notifyCommandChanged(t);break;case"removed":for(const e of d){e.remove(n.id)}break}}}}};n.commandChanged.connect(c)}function Y(e,t,n,s){const{commands:o,shell:r}=e;const a=Array.isArray(t)?t:[t];return{label:d("label"),caption:d("caption"),isEnabled:()=>{var e;const t=l("isEnabled");return t.length>0&&!t.some((e=>e===false))||((e=n.isEnabled)!==null&&e!==void 0?e:false)},isToggled:()=>{var e;const t=l("isToggled");return t.some((e=>e===true))||((e=n.isToggled)!==null&&e!==void 0?e:false)},isVisible:()=>{var e;const t=l("isVisible");return t.length>0&&!t.some((e=>e===false))||((e=n.isVisible)!==null&&e!==void 0?e:true)},execute:async()=>{const e=r.currentWidget;const t=a.map((t=>e!==null?t.getActiveCommandId(e):null));const s=t.filter((e=>e!==null&&o.isEnabled(e)));let l=null;if(s.length>0){for(const t of s){const n={[i.SemanticCommand.WIDGET]:e.id};l=await o.execute(t,n);if(typeof l==="boolean"&&l===false){break}}}else if(n.execute){l=await o.execute(n.execute)}return l}};function l(e){const t=r.currentWidget;const n=a.map((e=>t!==null?e.getActiveCommandId(t):null));const i=n.filter((e=>e!==null)).map((t=>o[e](t)));return i}function d(e){return()=>{var t;const i=l(e).map(((t,n)=>e=="caption"&&n>0?t.toLocaleLowerCase():t));switch(i.length){case 0:return(t=n[e])!==null&&t!==void 0?t:"";case 1:return i[0];default:{const e=i.some((e=>/$/.test(e)));const t=i.slice(undefined,-1).map((e=>e.replace(/$/,""))).join(", ");const n=i.slice(-1)[0].replace(/$/,"")+(e?"":"");return s.__("%1 and %2",t,n)}}}}}},3579:(e,t,n)=>{"use strict";var i=n(2898);var s=n(40244);var o=n(10395);var r=n(40662);var a=n(97913);var l=n(79010);var d=n(85072);var c=n.n(d);var h=n(97825);var u=n.n(h);var p=n(77659);var m=n.n(p);var g=n(55056);var f=n.n(g);var v=n(10540);var _=n.n(v);var b=n(41113);var y=n.n(b);var w=n(30966);var C={};C.styleTagTransform=y();C.setAttributes=f();C.insert=m().bind(null,"head");C.domAPI=u();C.insertStyleElement=_();var x=c()(w.A,C);const S=w.A&&w.A.locals?w.A.locals:undefined},97472:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>De,kernelSettings:()=>Te,toggleHeader:()=>xe});var i=n(30244);var s=n(48287);var o=n(66646);var r=n(90600);var a=n(85284);var l=n(21760);var d=n(78464);var c=n(5592);var h=n(90044);var u=n(26568);var p=n(24805);const m="help:open";const g="/lab/api/news";const f="/lab/api/update";const v="https://jupyterlab.readthedocs.io/en/stable/privacy_policies.html";async function _(e,t={}){const n=p.ServerConnection.makeSettings();const i=o.URLExt.join(n.baseUrl,e);let s;try{s=await p.ServerConnection.makeRequest(i,t,n)}catch(a){throw new p.ServerConnection.NetworkError(a)}const r=await s.json();if(!s.ok){throw new p.ServerConnection.ResponseError(s,r.message)}return r}const b={id:"@jupyterlab/apputils-extension:announcements",description:"Add the announcement feature. It will fetch news on the internet and check for application updates.",autoStart:true,optional:[p.IConfigSectionManager,r.ISettingRegistry,l.ITranslator],activate:(e,t,n,i)=>{var o,r;const a=b.id.replace(/[^\w]/g,"");void Promise.all([e.restored,(o=n===null||n===void 0?void 0:n.load("@jupyterlab/apputils-extension:notification"))!==null&&o!==void 0?o:Promise.resolve(null),(r=t===null||t===void 0?void 0:t.create({name:a}))!==null&&r!==void 0?r:Promise.resolve(null)]).then((async([t,n,o])=>{const r=(i!==null&&i!==void 0?i:l.nullTranslator).load("jupyterlab");s.Notification.manager.changed.connect(((e,t)=>{var n;if(t.type!=="removed"){return}const{id:i,tags:s}=(n=t.notification.options.data)!==null&&n!==void 0?n:{};if((s!==null&&s!==void 0?s:[]).some((e=>["news","update"].includes(e)))&&i){const e={};e[i]={seen:true,dismissed:true};o===null||o===void 0?void 0:o.update(e).catch((e=>{console.error(`Failed to update the announcements config:\n${e}`)}))}}));const a=n===null||n===void 0?void 0:n.get("fetchNews").composite;if(a==="none"){const t=s.Notification.emit(r.__("Would you like to get notified about official Jupyter news?"),"default",{autoClose:false,actions:[{label:r.__("Open privacy policy"),caption:v,callback:t=>{t.preventDefault();if(e.commands.hasCommand(m)){void e.commands.execute(m,{text:r.__("Privacy policies"),url:v})}else{window.open(v,"_blank","noreferrer")}},displayType:"link"},{label:r.__("Yes"),callback:()=>{s.Notification.dismiss(t);o===null||o===void 0?void 0:o.update({}).then((()=>d())).catch((e=>{console.error(`Failed to get the news:\n${e}`)}));n===null||n===void 0?void 0:n.set("fetchNews","true").catch((e=>{console.error(`Failed to save setting 'fetchNews':\n${e}`)}))}},{label:r.__("No"),callback:()=>{s.Notification.dismiss(t);n===null||n===void 0?void 0:n.set("fetchNews","false").catch((e=>{console.error(`Failed to save setting 'fetchNews':\n${e}`)}))}}]})}else{await d()}async function d(){var e,t,i,a;if(((e=n===null||n===void 0?void 0:n.get("fetchNews").composite)!==null&&e!==void 0?e:"false")==="true"){try{const e=await _(g);for(const{link:n,message:i,type:a,options:l}of e.news){const e=l.data["id"];const d=(t=o===null||o===void 0?void 0:o.data[e])!==null&&t!==void 0?t:{seen:false,dismissed:false};if(!d.dismissed){l.actions=[{label:r.__("Hide"),caption:r.__("Never show this notification again."),callback:()=>{const t={};t[e]={seen:true,dismissed:true};o===null||o===void 0?void 0:o.update(t).catch((e=>{console.error(`Failed to update the announcements config:\n${e}`)}))}}];if((n===null||n===void 0?void 0:n.length)===2){l.actions.push({label:n[0],caption:n[1],callback:()=>{window.open(n[1],"_blank","noreferrer")},displayType:"link"})}if(!d.seen){l.autoClose=5e3;const t={};t[e]={seen:true};o===null||o===void 0?void 0:o.update(t).catch((e=>{console.error(`Failed to update the announcements config:\n${e}`)}))}s.Notification.emit(i,a,l)}}}catch(l){console.log("Failed to get the announcements.",l)}}if((i=n===null||n===void 0?void 0:n.get("checkForUpdates").composite)!==null&&i!==void 0?i:true){const e=await _(f);if(e.notification){const{link:t,message:i,type:l,options:d}=e.notification;const c=d.data["id"];const h=(a=o===null||o===void 0?void 0:o.data[c])!==null&&a!==void 0?a:{seen:false,dismissed:false};if(!h.dismissed){let e;d.actions=[{label:r.__("Ignore all updates"),caption:r.__("Do not prompt me if a new JupyterLab version is available."),callback:()=>{n===null||n===void 0?void 0:n.set("checkForUpdates",false).then((()=>{s.Notification.dismiss(e)})).catch((e=>{console.error("Failed to set the `checkForUpdates` setting.",e)}))}}];if((t===null||t===void 0?void 0:t.length)===2){d.actions.push({label:t[0],caption:t[1],callback:()=>{window.open(t[1],"_blank","noreferrer")},displayType:"accent"})}if(!h.seen){d.autoClose=5e3;const e={};e[c]={seen:true};o===null||o===void 0?void 0:o.update(e).catch((e=>{console.error(`Failed to update the announcements config:\n${e}`)}))}e=s.Notification.emit(i,l,d)}}}}}))}};var y=n(59574);var w;(function(e){e.licenses="apputils:licenses";e.licenseReport="apputils:license-report";e.refreshLicenses="apputils:licenses-refresh"})(w||(w={}));const C={id:"@jupyterlab/apputils-extension:licenses-client",description:"The licenses client plugin for fetching licenses.",autoStart:true,provides:s.ILicensesClient,activate:e=>{const t=o.URLExt.join(o.PageConfig.getBaseUrl(),o.PageConfig.getOption("licensesUrl"))+"/";const n=e.serviceManager.serverSettings;return new s.Licenses.LicensesClient({licensesUrl:t,serverSettings:n})}};const x={id:"@jupyterlab/apputils-extension:licenses-plugin",description:"Adds licenses reporting tools.",requires:[s.ILicensesClient,l.ITranslator],optional:[i.ILayoutRestorer,y.IMainMenu,s.ICommandPalette],autoStart:true,activate:(e,t,n,i,r,a)=>{const{commands:l,shell:c}=e;const h=n.load("jupyterlab");const u=h.__("Help");const p=h.__("Download All Licenses as");const m=h.__("Refresh Licenses");const g="help-licenses";const f=new s.WidgetTracker({namespace:g});const v=h.__("Licenses");let _=0;function b(e){const n=new s.Licenses.Model({...e,client:t,trans:h});const i=new s.Licenses({model:n});i.id=`${g}-${++_}`;i.title.label=v;i.title.icon=d.copyrightIcon;const o=new s.MainAreaWidget({content:i,reveal:n.licensesReady});o.toolbar.addItem("refresh-licenses",new d.CommandToolbarButton({id:w.refreshLicenses,args:{noLabel:1},commands:l}));o.toolbar.addItem("spacer",d.Toolbar.createSpacerItem());for(const t of Object.keys(s.Licenses.REPORT_FORMATS)){const e=new d.CommandToolbarButton({id:w.licenseReport,args:{format:t,noLabel:1},commands:l});o.toolbar.addItem(`download-${t}`,e)}return o}function y(e){return s.Licenses.REPORT_FORMATS[e]||s.Licenses.REPORT_FORMATS[s.Licenses.DEFAULT_FORMAT]}l.addCommand(w.licenses,{label:v,execute:e=>{if(!o.PageConfig.getOption("licensesUrl")){console.warn("No license API available from the server");return}const t=b(e);c.add(t,"main",{type:"Licenses"});void f.add(t);t.content.model.trackerDataChanged.connect((()=>{void f.save(t)}));return t}});l.addCommand(w.refreshLicenses,{label:e=>e.noLabel?"":m,caption:m,icon:d.refreshIcon,execute:async()=>{var e;return(e=f.currentWidget)===null||e===void 0?void 0:e.content.model.initLicenses()}});l.addCommand(w.licenseReport,{label:e=>{if(e.noLabel){return""}const t=y(`${e.format}`);return`${p} ${t.title}`},caption:e=>{const t=y(`${e.format}`);return`${p} ${t.title}`},icon:e=>{const t=y(`${e.format}`);return t.icon},execute:async e=>{var t;const n=y(`${e.format}`);return await((t=f.currentWidget)===null||t===void 0?void 0:t.content.model.download({format:n.id}))}});if(a){a.addItem({command:w.licenses,category:u})}if(r){const e=r.helpMenu;e.addGroup([{command:w.licenses}],0)}if(i){void i.restore(f,{command:w.licenses,name:e=>"licenses",args:e=>{const{currentBundleName:t,currentPackageIndex:n,packageFilter:i}=e.content.model;const s={currentBundleName:t,currentPackageIndex:n,packageFilter:i};return s}})}}};var S=n(83444);var k=n(1143);var j=n(44914);var I=n(5338);const E="jp-Notification-Toast-Close";const T="jp-Notification-Toast-Close-Margin";const M=140;var D;(function(e){e.dismiss="apputils:dismiss-notification";e.display="apputils:display-notifications";e.notify="apputils:notify";e.update="apputils:update-notification"})(D||(D={}));const A=4;function P(e){const{manager:t,onClose:n,trans:i}=e;const[s,o]=j.useState([]);const[r,a]=j.useState(null);j.useEffect((()=>{async function e(){o(await Promise.all(t.notifications.map((async e=>Object.freeze({...e})))))}if(s.length!==t.count){void e()}t.changed.connect(e);return()=>{t.changed.disconnect(e)}}),[t]);j.useEffect((()=>{O.getIcons().then((e=>{a(e)})).catch((e=>{console.error(`Failed to get react-toastify icons:\n${e}`)}))}),[]);return j.createElement(d.UseSignal,{signal:t.changed},(()=>j.createElement(j.Fragment,null,j.createElement("h2",{className:"jp-Notification-Header jp-Toolbar"},j.createElement("span",{className:"jp-Toolbar-item"},t.count>0?i._n("%1 notification","%1 notifications",t.count):i.__("No notifications")),j.createElement("span",{className:"jp-Toolbar-item jp-Toolbar-spacer"}),j.createElement(d.ToolbarButtonComponent,{noFocusOnClick:false,onClick:()=>{t.dismiss()},icon:d.deleteIcon,tooltip:i.__("Dismiss all notifications"),enabled:t.count>0}),j.createElement(d.ToolbarButtonComponent,{noFocusOnClick:false,onClick:n,icon:d.closeIcon,tooltip:i.__("Hide notifications")})),j.createElement("ol",{className:"jp-Notification-List"},s.map((e=>{var n;const{id:s,message:o,type:a,options:l}=e;const c=a==="in-progress"?"default":a;const h=()=>{t.dismiss(s)};const u=a==="default"?null:a==="in-progress"?(n=r===null||r===void 0?void 0:r.spinner)!==null&&n!==void 0?n:null:r&&r[a];return j.createElement("li",{className:"jp-Notification-List-Item",key:e.id,onClick:e=>{e.stopPropagation()}},j.createElement("div",{className:`Toastify__toast Toastify__toast-theme--light Toastify__toast--${c} jp-Notification-Toast-${c}`},j.createElement("div",{className:"Toastify__toast-body"},u&&j.createElement("div",{className:"Toastify__toast-icon"},u({theme:"light",type:c})),j.createElement("div",null,O.createContent(o,h,l.actions))),j.createElement(O.CloseButton,{close:h,closeIcon:d.deleteIcon.react,title:i.__("Dismiss notification"),closeIconMargin:true})))}))))))}class L extends d.VDomModel{constructor(e){super();this.manager=e;this._highlight=false;this._listOpened=false;this._doNotDisturbMode=false;this._count=e.count;this.manager.changed.connect(this.onNotificationChanged,this)}get count(){return this._count}get doNotDisturbMode(){return this._doNotDisturbMode}set doNotDisturbMode(e){this._doNotDisturbMode=e}get highlight(){return this._highlight}get listOpened(){return this._listOpened}set listOpened(e){this._listOpened=e;if(this._listOpened||this._highlight){this._highlight=false}this.stateChanged.emit()}onNotificationChanged(e,t){this._count=this.manager.count;const{autoClose:n}=t.notification.options;const i=this.doNotDisturbMode||typeof n==="number"&&n<=0;if(!this._listOpened&&t.type!=="removed"&&i){this._highlight=true}this.stateChanged.emit()}}function R(e){return j.createElement(S.GroupItem,{spacing:A,onClick:()=>{e.onClick()},title:e.count>0?e.trans._n("%1 notification","%1 notifications",e.count):e.trans.__("No notifications")},j.createElement(S.TextItem,{className:"jp-Notification-Status-Text",source:`${e.count}`}),j.createElement(d.bellIcon.react,{top:"2px",stylesheet:"statusBar"}))}const N={id:"@jupyterlab/apputils-extension:notification",description:"Add the notification center and its status indicator.",autoStart:true,optional:[S.IStatusBar,r.ISettingRegistry,l.ITranslator],activate:(e,t,n,i)=>{O.translator=i!==null&&i!==void 0?i:l.nullTranslator;const o=O.translator.load("jupyterlab");const r=new L(s.Notification.manager);r.doNotDisturbMode=false;if(n){void Promise.all([n.load(N.id),e.restored]).then((([e])=>{const t=()=>{r.doNotDisturbMode=e.get("doNotDisturbMode").composite};t();e.changed.connect(t)}))}e.commands.addCommand(D.notify,{label:o.__("Emit a notification"),caption:o.__("Notification is described by {message: string, type?: string, options?: {autoClose?: number | false, actions: {label: string, commandId: string, args?: ReadOnlyJSONObject, caption?: string, className?: string}[], data?: ReadOnlyJSONValue}}."),execute:t=>{var n;const{message:i,type:o}=t;const r=(n=t.options)!==null&&n!==void 0?n:{};return s.Notification.manager.notify(i,o!==null&&o!==void 0?o:"default",{...r,actions:r.actions?r.actions.map((t=>({...t,callback:()=>{e.commands.execute(t.commandId,t.args).catch((e=>{console.error(`Failed to executed '${t.commandId}':\n${e}`)}))}}))):null})}});e.commands.addCommand(D.update,{label:o.__("Update a notification"),caption:o.__("Notification is described by {id: string, message: string, type?: string, options?: {autoClose?: number | false, actions: {label: string, commandId: string, args?: ReadOnlyJSONObject, caption?: string, className?: string}[], data?: ReadOnlyJSONValue}}."),execute:t=>{const{id:n,message:i,type:o,...r}=t;return s.Notification.manager.update({id:n,message:i,type:o!==null&&o!==void 0?o:"default",...r,actions:r.actions?r.actions.map((t=>({...t,callback:()=>{e.commands.execute(t.commandId,t.args).catch((e=>{console.error(`Failed to executed '${t.commandId}':\n${e}`)}))}}))):null})}});e.commands.addCommand(D.dismiss,{label:o.__("Dismiss a notification"),execute:e=>{const{id:t}=e;s.Notification.manager.dismiss(t)}});let a=null;r.listOpened=false;const c=s.ReactWidget.create(j.createElement(P,{manager:s.Notification.manager,onClose:()=>{a===null||a===void 0?void 0:a.dispose()},trans:o}));c.addClass("jp-Notification-Center");async function h(e,t){var n;if(r.doNotDisturbMode||a!==null&&!a.isDisposed){return}const{message:i,type:s,options:o,id:l}=t.notification;if(typeof o.autoClose==="number"&&o.autoClose<=0){return}switch(t.type){case"added":await O.createToast(l,i,s,o);break;case"updated":{const t=await O.toast();const r=o.actions;const a=(n=o.autoClose)!==null&&n!==void 0?n:r&&r.length>0?false:null;if(t.isActive(l)){const n=()=>{t.dismiss(l);e.dismiss(l)};t.update(l,{type:s==="in-progress"?null:s,isLoading:s==="in-progress",autoClose:a,render:O.createContent(i,n,o.actions)})}else{await O.createToast(l,i,s,o)}}break;case"removed":await O.toast().then((e=>{e.dismiss(l)}));break}}s.Notification.manager.changed.connect(h);const u=()=>{if(a){a.dispose();a=null}else{a=(0,S.showPopup)({body:c,anchor:p,align:"right",hasDynamicSize:true,startHidden:true});O.toast().then((e=>{e.dismiss()})).catch((e=>{console.error(`Failed to dismiss all toasts:\n${e}`)})).finally((()=>{a===null||a===void 0?void 0:a.launch();c.node.focus();a===null||a===void 0?void 0:a.disposed.connect((()=>{r.listOpened=false;a=null}))}))}r.listOpened=a!==null};e.commands.addCommand(D.display,{label:o.__("Show Notifications"),execute:u});const p=s.ReactWidget.create(j.createElement(d.UseSignal,{signal:r.stateChanged},(()=>{if(r.highlight||a&&!a.isDisposed){p.addClass("jp-mod-selected")}else{p.removeClass("jp-mod-selected")}return j.createElement(R,{count:r.count,highlight:r.highlight,trans:o,onClick:u})})));p.addClass("jp-Notification-Status");if(t){t.registerStatusItem(N.id,{item:p,align:"right",rank:-1})}else{p.addClass("jp-ThemedContainer");p.node.style.position="fixed";p.node.style.bottom="0";p.node.style.right="10px";k.Widget.attach(p,document.body);p.show()}}};var O;(function(e){e.translator=l.nullTranslator;let t=null;function i(e){var t;return j.createElement("button",{className:`jp-Button jp-mod-minimal ${E}${e.closeIconMargin?` ${T}`:""}`,title:(t=e.title)!==null&&t!==void 0?t:"",onClick:e.close},j.createElement(e.closeIcon,{className:"jp-icon-hover",tag:"span"}))}e.CloseButton=i;function o(t){const n=e.translator.load("jupyterlab");return j.createElement(i,{close:t.closeToast,closeIcon:d.closeIcon.react,title:n.__("Hide notification")})}let r=null;async function a(){if(r===null){r=new c.PromiseDelegate}else{await r.promise}if(t===null){t=await n.e(1210).then(n.t.bind(n,91210,23));const e=document.body.appendChild(document.createElement("div"));e.id="react-toastify-container";e.classList.add("jp-ThemedContainer");const i=(0,I.H)(e);i.render(j.createElement(t.ToastContainer,{draggable:false,closeOnClick:false,hideProgressBar:true,newestOnTop:true,pauseOnFocusLoss:true,pauseOnHover:true,position:"bottom-right",className:"jp-toastContainer",transition:t.Slide,closeButton:o}));r.resolve()}return t.toast}e.toast=a;async function h(){if(t===null){await a()}return t.Icons}e.getIcons=h;const u={accent:"jp-mod-accept",link:"jp-mod-link",warn:"jp-mod-warn",default:""};function p({action:e,closeToast:t}){var n,i;const s=n=>{e.callback(n);if(!n.defaultPrevented){t()}};const o=["jp-toast-button",u[(n=e.displayType)!==null&&n!==void 0?n:"default"]].join(" ");return j.createElement(d.Button,{title:(i=e.caption)!==null&&i!==void 0?i:e.label,className:o,onClick:s,small:true},e.label)}function m(e,t,n){var i;const s=e.length>M?e.slice(0,M)+"":e;return j.createElement(j.Fragment,null,j.createElement("div",{className:"jp-toast-message"},s.split("\n").map(((e,t)=>j.createElement(j.Fragment,{key:`part-${t}`},t>0?j.createElement("br",null):null,e)))),((i=n===null||n===void 0?void 0:n.length)!==null&&i!==void 0?i:0)>0&&j.createElement("div",{className:"jp-toast-buttonBar"},j.createElement("div",{className:"jp-toast-spacer"}),n.map(((e,n)=>j.createElement(p,{key:"button-"+n,action:e,closeToast:t})))))}e.createContent=m;async function g(e,t,n,i={}){const{actions:o,autoClose:r,data:l}=i;const d=await a();const c={autoClose:r!==null&&r!==void 0?r:o&&o.length>0?false:undefined,data:l,className:`jp-Notification-Toast-${n}`,toastId:e,type:n==="in-progress"?null:n,isLoading:n==="in-progress"};return d((({closeToast:n})=>m(t,(()=>{if(n)n();s.Notification.manager.dismiss(e)}),o)),c)}e.createToast=g})(O||(O={}));var B=n(34236);var F=n(93247);var z;(function(e){e.activate="apputils:activate-command-palette"})(z||(z={}));const H="@jupyterlab/apputils-extension:palette";class W{constructor(e,t){this.translator=t||l.nullTranslator;const n=this.translator.load("jupyterlab");this._palette=e;this._palette.title.label="";this._palette.title.caption=n.__("Command Palette")}set placeholder(e){this._palette.inputNode.placeholder=e}get placeholder(){return this._palette.inputNode.placeholder}activate(){this._palette.activate()}addItem(e){const t=this._palette.addItem(e);return new h.DisposableDelegate((()=>{this._palette.removeItem(t)}))}}(function(e){function t(t,n,i){const{commands:o,shell:r}=t;const a=n.load("jupyterlab");const l=V.createPalette(t,n);const d=new s.ModalCommandPalette({commandPalette:l});let c=false;l.node.setAttribute("role","region");l.node.setAttribute("aria-label",a.__("Command Palette Section"));r.add(l,"left",{rank:300,type:"Command Palette"});if(i){const e=i.load(H);const n=e=>{const t=e.get("modal").composite;if(c&&!t){l.parent=null;d.detach();r.add(l,"left",{rank:300,type:"Command Palette"})}else if(!c&&t){l.parent=null;d.palette=l;l.show();d.attach()}c=t};Promise.all([e,t.restored]).then((([e])=>{n(e);e.changed.connect((e=>{n(e)}))})).catch((e=>{console.error(e.message)}))}const h=()=>{const e=(0,B.find)(t.commands.keyBindings,(e=>e.command===z.activate));if(e){const t=e.keys.map(F.CommandRegistry.formatKeystroke).join(", ");l.title.caption=a.__("Commands (%1)",t)}else{l.title.caption=a.__("Commands")}};h();t.commands.keyBindingChanged.connect((()=>{h()}));o.addCommand(z.activate,{execute:()=>{if(c){d.activate()}else{r.activateById(l.id)}},label:a.__("Activate Command Palette")});l.inputNode.placeholder=a.__("SEARCH");return new e(l,n)}e.activate=t;function n(e,t,n){const i=V.createPalette(e,n);t.add(i,"command-palette")}e.restore=n})(W||(W={}));var V;(function(e){let t;function n(e,n){if(!t){t=new k.CommandPalette({commands:e.commands,renderer:d.CommandPaletteSvg.defaultRenderer});t.id="command-palette";t.title.icon=d.paletteIcon;const i=n.load("jupyterlab");t.title.label=i.__("Commands")}return t}e.createPalette=n})(V||(V={}));class U extends a.DataConnector{constructor(e){super();this._throttlers=Object.create(null);this._connector=e}fetch(e){const t=this._throttlers;if(!(e in t)){t[e]=new u.Throttler((()=>this._connector.fetch(e)),100)}return t[e].invoke()}async list(e="all"){const{isDisabled:t}=o.PageConfig.Extension;const{ids:n,values:i}=await this._connector.list(e==="ids"?"ids":undefined);if(e==="all"){return{ids:n,values:i}}if(e==="ids"){return{ids:n}}return{ids:n.filter((e=>!t(e))),values:i.filter((({id:e})=>!t(e)))}}async save(e,t){await this._connector.save(e,t)}}const q={id:"@jupyterlab/apputils-extension:settings-connector",description:"Provides the settings connector.",autoStart:true,provides:r.ISettingConnector,activate:e=>new U(e.serviceManager.settings)};const $={id:"@jupyterlab/apputils-extension:settings",autoStart:true,provides:r.ISettingRegistry,optional:[r.ISettingConnector],description:"Provides the setting registry.",activate:async(e,t)=>{const{isDisabled:n}=o.PageConfig.Extension;const i=t!==null&&t!==void 0?t:new U(e.serviceManager.settings);const s=new r.SettingRegistry({connector:i,plugins:(await i.list("active")).values.filter((t=>e.hasPlugin(t.id)))});void e.restored.then((async()=>{const t=await i.list("ids");t.ids.forEach((async t=>{if(!e.hasPlugin(t)||n(t)||t in s.plugins){return}try{await s.load(t)}catch(i){console.warn(`Settings failed to load for (${t})`,i);if(!e.isPluginActivated(t)){console.warn(`If 'jupyter.lab.transform=true' in the plugin schema, this `+`may happen if {autoStart: false} in (${t}) or if it is `+`one of the deferredExtensions in page config.`)}}}))}));return s}};const K={id:"@jupyterlab/apputils-extension:kernel-status",description:"Provides the kernel status indicator model.",autoStart:true,requires:[S.IStatusBar],provides:s.IKernelStatusModel,optional:[s.ISessionContextDialogs,l.ITranslator,i.ILabShell],activate:(e,t,n,i,o)=>{const r=i!==null&&i!==void 0?i:l.nullTranslator;const a=n!==null&&n!==void 0?n:new s.SessionContextDialogs({translator:r});const d=async()=>{if(!h.model.sessionContext){return}await a.selectKernel(h.model.sessionContext)};const c=async e=>{if(e.key==="Enter"||e.key==="Spacebar"||e.key===" "){e.preventDefault();e.stopPropagation();return d()}};const h=new s.KernelStatus({onClick:d,onKeyDown:c},r);const u=new Set;const p=t=>{u.add(t);if(e.shell.currentWidget){m(e.shell,{newValue:e.shell.currentWidget,oldValue:null})}};function m(e,t){var n;const{oldValue:i,newValue:s}=t;if(i){i.title.changed.disconnect(g)}h.model.sessionContext=(n=[...u].map((e=>e(t.newValue))).filter((e=>e!==null))[0])!==null&&n!==void 0?n:null;if(s&&h.model.sessionContext){g(s.title);s.title.changed.connect(g)}}const g=e=>{h.model.activityName=e.label};if(o){o.currentChanged.connect(m)}t.registerStatusItem(K.id,{priority:1,item:h,align:"left",rank:1,isActive:()=>h.model.sessionContext!==null});return{addSessionProvider:p}}};const J={id:"@jupyterlab/apputils-extension:running-sessions-status",description:"Add the running sessions and terminals status bar item.",autoStart:true,requires:[S.IStatusBar,l.ITranslator],optional:[r.ISettingRegistry],activate:(e,t,n,i)=>{const o=t=>{const i=new s.RunningSessions({onClick:()=>e.shell.activateById("jp-running-sessions"),onKeyDown:t=>{if(t.key==="Enter"||t.key==="Spacebar"||t.key===" "){t.preventDefault();t.stopPropagation();e.shell.activateById("jp-running-sessions")}},serviceManager:e.serviceManager,translator:n,...t});i.model.sessions=Array.from(e.serviceManager.sessions.running()).length;i.model.terminals=Array.from(e.serviceManager.terminals.running()).length;return i};const r=e=>{const n=o(e);return t.registerStatusItem(J.id,{item:n,align:"left",rank:0})};if(i){let e;const t=(t,n)=>{var i,s;const o={"if-any":undefined,never:false,always:true};const a=(i=t===null||t===void 0?void 0:t.get("showStatusBarItem").composite)!==null&&i!==void 0?i:true;const l=o[(s=n===null||n===void 0?void 0:n.get("showStatusBarItem").composite)!==null&&s!==void 0?s:"if-any"];e===null||e===void 0?void 0:e.dispose();if(a||l!==false){e=r({showKernels:a,showTerminals:l})}};const n="@jupyterlab/apputils-extension:kernels-settings";const s="@jupyterlab/terminal-extension:plugin";void Promise.all([n in i.plugins?i.load(n).catch((()=>undefined)):Promise.resolve(undefined),s in i.plugins?i.load(s).catch((()=>undefined)):Promise.resolve(undefined)]).then((([e,n])=>{t(e,n);if(e){e.changed.connect((i=>{e=i;t(e,n)}))}if(n){n.changed.connect((i=>{n=i;t(e,n)}))}}))}else{r({showKernels:true})}}};const G={id:"@jupyterlab/apputils-extension:subshell-settings",description:"Kernel subshell settings.",autoStart:true,requires:[],optional:[r.ISettingRegistry],activate:(e,t)=>{if(t){e.started.then((async()=>{const n=await t.load("@jupyterlab/apputils-extension:kernels-settings");const i=n.get("commsOverSubshells").composite;e.serviceManager.kernels.commsOverSubshells=i;n.changed.connect((()=>{const t=n.get("commsOverSubshells").composite;e.serviceManager.kernels.commsOverSubshells=t}))})).catch((e=>{console.error("Fail to load settings for the subshells.");console.error(e)}))}}};const Y="/*\n * Copyright (c) Jupyter Development Team.\n * Distributed under the terms of the Modified BSD License.\n */\n\n/*\n * Webkit scrollbar styling.\n * Separate file which is dynamically loaded based on user/theme settings.\n */\n\n/* use standard opaque scrollbars for most nodes */\n\n::-webkit-scrollbar,\n::-webkit-scrollbar-corner {\n  background: var(--jp-scrollbar-background-color);\n}\n\n::-webkit-scrollbar-thumb {\n  background: rgb(var(--jp-scrollbar-thumb-color));\n  border: var(--jp-scrollbar-thumb-margin) solid transparent;\n  background-clip: content-box;\n  border-radius: var(--jp-scrollbar-thumb-radius);\n}\n\n::-webkit-scrollbar-track:horizontal {\n  border-left: var(--jp-scrollbar-endpad) solid\n    var(--jp-scrollbar-background-color);\n  border-right: var(--jp-scrollbar-endpad) solid\n    var(--jp-scrollbar-background-color);\n}\n\n::-webkit-scrollbar-track:vertical {\n  border-top: var(--jp-scrollbar-endpad) solid\n    var(--jp-scrollbar-background-color);\n  border-bottom: var(--jp-scrollbar-endpad) solid\n    var(--jp-scrollbar-background-color);\n}\n\n/* for code nodes, use a transparent style of scrollbar */\n\n.CodeMirror-hscrollbar::-webkit-scrollbar,\n.CodeMirror-vscrollbar::-webkit-scrollbar,\n.CodeMirror-hscrollbar::-webkit-scrollbar-corner,\n.CodeMirror-vscrollbar::-webkit-scrollbar-corner {\n  background-color: transparent;\n}\n\n.CodeMirror-hscrollbar::-webkit-scrollbar-thumb,\n.CodeMirror-vscrollbar::-webkit-scrollbar-thumb {\n  background: rgba(var(--jp-scrollbar-thumb-color), 0.5);\n  border: var(--jp-scrollbar-thumb-margin) solid transparent;\n  background-clip: content-box;\n  border-radius: var(--jp-scrollbar-thumb-radius);\n}\n\n.CodeMirror-hscrollbar::-webkit-scrollbar-track:horizontal {\n  border-left: var(--jp-scrollbar-endpad) solid transparent;\n  border-right: var(--jp-scrollbar-endpad) solid transparent;\n}\n\n.CodeMirror-vscrollbar::-webkit-scrollbar-track:vertical {\n  border-top: var(--jp-scrollbar-endpad) solid transparent;\n  border-bottom: var(--jp-scrollbar-endpad) solid transparent;\n}\n";var X;(function(e){e.changeTheme="apputils:change-theme";e.changePreferredLightTheme="apputils:change-light-theme";e.changePreferredDarkTheme="apputils:change-dark-theme";e.toggleAdaptiveTheme="apputils:adaptive-theme";e.themeScrollbars="apputils:theme-scrollbars";e.changeFont="apputils:change-font";e.incrFontSize="apputils:incr-font-size";e.decrFontSize="apputils:decr-font-size"})(X||(X={}));function Q(e){const t=document.createElement("style");t.setAttribute("type","text/css");t.appendChild(document.createTextNode(e));return t}const Z={id:"@jupyterlab/apputils-extension:themes",description:"Provides the theme manager.",requires:[r.ISettingRegistry,i.JupyterFrontEnd.IPaths,l.ITranslator],optional:[s.ISplashScreen],activate:(e,t,n,i,r)=>{const a=i.load("jupyterlab");const l=e.shell;const d=e.commands;const c=o.URLExt.join(o.PageConfig.getBaseUrl(),n.urls.themes);const h=Z.id;const u=new s.ThemeManager({key:h,host:l,settings:t,splash:r!==null&&r!==void 0?r:undefined,url:c});let p=null;let m;u.themeChanged.connect(((e,t)=>{m=t.newValue;document.body.dataset.jpThemeLight=String(u.isLight(m));document.body.dataset.jpThemeName=m;document.body.style.colorScheme=u.isLight(m)?"light":"dark";if(document.body.dataset.jpThemeScrollbars!==String(u.themeScrollbars(m))){document.body.dataset.jpThemeScrollbars=String(u.themeScrollbars(m));if(u.themeScrollbars(m)){if(!p){p=Q(Y)}if(!p.parentElement){document.body.appendChild(p)}}else{if(p&&p.parentElement){p.parentElement.removeChild(p)}}}d.notifyCommandChanged(X.changeTheme)}));d.addCommand(X.changeTheme,{label:e=>{if(e.theme===undefined){return a.__("Switch to the provided `theme`.")}const t=e["theme"];const n=u.getDisplayName(t);return e["isPalette"]?a.__("Use Theme: %1",n):n},isToggled:e=>e["theme"]===m,execute:e=>{const t=e["theme"];if(t===u.theme){return}if(u.isToggledAdaptiveTheme()){return u.toggleAdaptiveTheme()}return u.setTheme(t)}});d.addCommand(X.changePreferredLightTheme,{label:e=>{if(e.theme===undefined){return a.__("Switch to the provided light `theme`.")}const t=e["theme"];const n=u.getDisplayName(t);return e["isPalette"]?a.__("Set Preferred Light Theme: %1",n):n},isToggled:e=>e["theme"]===u.preferredLightTheme,execute:e=>{const t=e["theme"];if(t===u.preferredLightTheme){return}return u.setPreferredLightTheme(t)}});d.addCommand(X.changePreferredDarkTheme,{label:e=>{if(e.theme===undefined){return a.__("Switch to the provided dark `theme`.")}const t=e["theme"];const n=u.getDisplayName(t);return e["isPalette"]?a.__("Set Preferred Dark Theme: %1",n):n},isToggled:e=>e["theme"]===u.preferredDarkTheme,execute:e=>{const t=e["theme"];if(t===u.preferredDarkTheme){return}return u.setPreferredDarkTheme(t)}});d.addCommand(X.toggleAdaptiveTheme,{label:e=>e["isPalette"]?a.__("Synchronize Styling Theme with System Settings"):a.__("Synchronize with System Settings"),isToggled:()=>u.isToggledAdaptiveTheme(),execute:()=>{u.toggleAdaptiveTheme().catch(console.warn)}});d.addCommand(X.themeScrollbars,{label:a.__("Theme Scrollbars"),isToggled:()=>u.isToggledThemeScrollbars(),execute:()=>u.toggleThemeScrollbars()});d.addCommand(X.changeFont,{label:e=>e["enabled"]?`${e["font"]}`:a.__("waiting for fonts"),isEnabled:e=>e["enabled"],isToggled:e=>u.getCSS(e["key"])===e["font"],execute:e=>u.setCSSOverride(e["key"],e["font"])});d.addCommand(X.incrFontSize,{label:e=>{switch(e.key){case"code-font-size":return a.__("Increase Code Font Size");case"content-font-size1":return a.__("Increase Content Font Size");case"ui-font-size1":return a.__("Increase UI Font Size");default:return a.__("Increase Font Size")}},execute:e=>u.incrFontSize(e["key"])});d.addCommand(X.decrFontSize,{label:e=>{switch(e.key){case"code-font-size":return a.__("Decrease Code Font Size");case"content-font-size1":return a.__("Decrease Content Font Size");case"ui-font-size1":return a.__("Decrease UI Font Size");default:return a.__("Decrease Font Size")}},execute:e=>u.decrFontSize(e["key"])});return u},autoStart:true,provides:s.IThemeManager};const ee={id:"@jupyterlab/apputils-extension:themes-palette-menu",description:"Adds theme commands to the menu and the command palette.",requires:[s.IThemeManager,l.ITranslator],optional:[s.ICommandPalette,y.IMainMenu],activate:(e,t,n,i,s)=>{const o=n.load("jupyterlab");if(s){void e.restored.then((()=>{var e;const n=false;const i=(e=s.settingsMenu.items.find((e=>{var t;return e.type==="submenu"&&((t=e.submenu)===null||t===void 0?void 0:t.id)==="jp-mainmenu-settings-apputilstheme"})))===null||e===void 0?void 0:e.submenu;if(i){t.themes.forEach(((e,t)=>{i.insertItem(t,{command:X.changeTheme,args:{isPalette:n,theme:e}})}))}}))}if(i){void e.restored.then((()=>{const e=o.__("Theme");const n=X.changeTheme;const s=true;t.themes.forEach((t=>{i.addItem({command:n,args:{isPalette:s,theme:t},category:e})}));t.themes.forEach((t=>{i.addItem({command:X.changePreferredLightTheme,args:{isPalette:s,theme:t},category:e})}));t.themes.forEach((t=>{i.addItem({command:X.changePreferredDarkTheme,args:{isPalette:s,theme:t},category:e})}));i.addItem({command:X.toggleAdaptiveTheme,args:{isPalette:s},category:e});i.addItem({command:X.themeScrollbars,category:e});i.addItem({command:X.incrFontSize,args:{key:"code-font-size"},category:e});i.addItem({command:X.decrFontSize,args:{key:"code-font-size"},category:e});i.addItem({command:X.incrFontSize,args:{key:"content-font-size1"},category:e});i.addItem({command:X.decrFontSize,args:{key:"content-font-size1"},category:e});i.addItem({command:X.incrFontSize,args:{key:"ui-font-size1"},category:e});i.addItem({command:X.decrFontSize,args:{key:"ui-font-size1"},category:e})}))}},autoStart:true};const te={id:"@jupyterlab/apputils-extension:toolbar-registry",description:"Provides toolbar items registry.",autoStart:true,provides:s.IToolbarWidgetRegistry,activate:e=>{const t=new s.ToolbarWidgetRegistry({defaultFactory:(0,s.createDefaultFactory)(e.commands)});return t}};var ne=n(97494);var ie=n(39078);const se="jupyterlab-workspace";const oe="."+se;const re="workspace-ui:lastSave";const ae="jp-JupyterIcon";const le={id:"@jupyterlab/apputils-extension:workspaces",description:"Add workspace file type.",autoStart:true,requires:[a.IStateDB,l.ITranslator,i.JupyterFrontEnd.IPaths],optional:[i.IRouter,ie.IWorkspaceCommands],activate:(e,t,n,i,s,r)=>{const a=new de.WorkspaceFactory({workspaces:e.serviceManager.workspaces,state:t,translator:n,open:async t=>{if(r){await e.commands.execute(r.open,{workspace:t})}else{const e=o.URLExt.join(i.urls.app,"workspaces");const n=o.URLExt.join(e,t);if(!n.startsWith(e)){throw new Error("Can only be used for workspaces")}if(s){s.navigate(n,{hard:true})}else{document.location.href=n}}}});const l=n.load("jupyterlab");e.docRegistry.addFileType({name:se,contentType:"file",fileFormat:"text",displayName:l.__("JupyterLab Workspace File"),extensions:[oe],mimeTypes:["text/json"],iconClass:ae});e.docRegistry.addWidgetFactory(a)}};var de;(function(e){class t extends ne.ABCWidgetFactory{constructor(e){const t=(e.translator||l.nullTranslator).load("jupyterlab");super({name:"Workspace loader",label:t.__("Workspace loader"),fileTypes:[se],defaultFor:[se],readOnly:true});this._state=e.state;this._workspaces=e.workspaces;this._open=e.open}createNewWidget(e){void e.ready.then((async()=>{const t=e.model;const n=t.toJSON();const i=e.path;const s=n.metadata.id;await this._workspaces.save(s,n);await this._state.save(re,i);await this._open(s)}));return n(e)}}e.WorkspaceFactory=t;function n(e){const t=new ne.DocumentWidget({content:new k.Widget,context:e});t.content.dispose();return t}})(de||(de={}));var ce=n(76326);const he="jp-ContextualShortcut-TableRow";const ue="jp-ContextualShortcut-TableLastRow";const pe="jp-ContextualShortcut-TableItem";const me="jp-ContextualShortcut-Key";function ge(e){const{commands:t,trans:n,activeElement:i}=e;const o=i!==null&&i!==void 0?i:document.activeElement;function r(e){const t=[];e.forEach(((e,n)=>{const i=[];e.split(" ").forEach(((e,t)=>{i.push(j.createElement("span",{className:me,key:`ch-${t}`},j.createElement("kbd",null,e)),j.createElement(j.Fragment,{key:`fragment-${t}`}," + "))}));t.push(j.createElement("span",{key:`key-${n}`},i.slice(0,-1)),j.createElement(j.Fragment,{key:`fragment-${n}`}," + "))}));return j.createElement("span",null,t.slice(0,-1))}function a(e){const t=e.charAt(0).toUpperCase()+e.slice(1);return t}function l(e){const n=t.label(e.command);const i=e.command.split(":")[1];const s=i.split("-");let o="";for(let t=0;t<s.length;t++){const e=a(s[t]);o=o+" "+e}if(n.length>0){return n}else{return o}}function d(e,t){let n=t;for(let i=0;n!==null&&n!==n.parentElement;n=n.parentElement,++i){if(n.hasAttribute("data-lm-suppress-shortcuts")){return-1}if(n.matches(e)){return i}}return-1}const c=new Map;for(let s=0;s<t.keyBindings.length;s++){const e=t.keyBindings[s];let n=d(e.selector,o);if(n<0){continue}let i=F.CommandRegistry.formatKeystroke(e.keys);if(c.has(i)){let t=c.get(i);if(t[0]<n||t[0]===n&&ce.Selector.calculateSpecificity(t[1].selector)>ce.Selector.calculateSpecificity(e.selector)){continue}}c.set(i,[n,e])}let h=-1;const u=new Map;for(let[s,g]of c.values()){h=Math.max(s,h);if(!u.has(s)){u.set(s,[])}u.get(s).push(g)}const p=[];for(let s=0;s<=h;s++){if(u.has(s)){p.push(u.get(s).map((e=>j.createElement("tr",{className:he,key:`${e.command}-${e.keys.join("-").replace(" ","_")}`},j.createElement("td",{className:pe},l(e)),j.createElement("td",{className:pe},r([...e.keys]))))));p.push(j.createElement("tr",{className:ue,key:`group-${s}-last`}))}}const m=j.createElement("table",null,j.createElement("tbody",null,p));return(0,s.showDialog)({title:n.__("Keyboard Shortcuts"),body:m,buttons:[s.Dialog.cancelButton({label:n.__("Close")})]})}const fe=12e3;var ve;(function(e){e.loadState="apputils:load-statedb";e.print="apputils:print";e.reset="apputils:reset";e.resetOnLoad="apputils:reset-on-load";e.runFirstEnabled="apputils:run-first-enabled";e.runAllEnabled="apputils:run-all-enabled";e.toggleHeader="apputils:toggle-header";e.displayShortcuts="apputils:display-shortcuts"})(ve||(ve={}));const _e={id:"@jupyterlab/apputils-extension:palette",description:"Provides the command palette.",autoStart:true,requires:[l.ITranslator],provides:s.ICommandPalette,optional:[r.ISettingRegistry],activate:(e,t,n)=>W.activate(e,t,n)};const be={id:"@jupyterlab/apputils-extension:palette-restorer",description:"Restores the command palette.",autoStart:true,requires:[i.ILayoutRestorer,l.ITranslator],activate:(e,t,n)=>{W.restore(e,t,n)}};const ye={id:"@jupyterlab/apputils-extension:resolver",description:"Provides the window name resolver.",autoStart:true,provides:s.IWindowResolver,requires:[i.JupyterFrontEnd.IPaths,i.IRouter],activate:async(e,t,n)=>{const{hash:i,search:r}=n.current;const a=o.URLExt.queryStringToObject(r||"");const l=new s.WindowResolver;const d=o.PageConfig.getOption("workspace");const c=o.PageConfig.getOption("treePath");const h=o.PageConfig.getOption("mode")==="multiple-document"?"lab":"doc";const u=d?d:o.PageConfig.defaultWorkspace;const p=c?o.URLExt.join("tree",c):"";try{await l.resolve(u);return l}catch(m){return new Promise((()=>{const{base:e}=t.urls;const s="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";const r=s[Math.floor(Math.random()*s.length)];let l=o.URLExt.join(e,h,"workspaces",`auto-${r}`);l=p?o.URLExt.join(l,o.URLExt.encodeParts(p)):l;a["reset"]="";const d=l+o.URLExt.objectToQueryString(a)+(i||"");n.navigate(d,{hard:true})}))}}};const we={id:"@jupyterlab/apputils-extension:splash",description:"Provides the splash screen.",autoStart:true,requires:[l.ITranslator],provides:s.ISplashScreen,activate:(e,t)=>{const n=t.load("jupyterlab");const{commands:i,restored:o}=e;const r=document.createElement("div");const a=document.createElement("div");const l=document.createElement("div");r.id="jupyterlab-splash";a.id="galaxy";l.id="main-logo";d.jupyterFaviconIcon.element({container:l,stylesheet:"splash"});a.appendChild(l);["1","2","3"].forEach((e=>{const t=document.createElement("div");const n=document.createElement("div");t.id=`moon${e}`;t.className="moon orbit";n.id=`planet${e}`;n.className="planet";t.appendChild(n);a.appendChild(t)}));r.appendChild(a);let c;const p=new u.Throttler((async()=>{if(c){return}c=new s.Dialog({title:n.__("Loading"),body:n.__(`The loading screen is taking a long time.\nWould you like to clear the workspace or keep waiting?`),buttons:[s.Dialog.cancelButton({label:n.__("Keep Waiting")}),s.Dialog.warnButton({label:n.__("Clear Workspace")})]});try{const e=await c.launch();c.dispose();c=null;if(e.button.accept&&i.hasCommand(ve.reset)){return i.execute(ve.reset)}requestAnimationFrame((()=>{void p.invoke().catch((e=>undefined))}))}catch(e){}}),{limit:fe,edge:"trailing"});let m=0;return{show:(e=true)=>{r.classList.remove("splash-fade");r.classList.toggle("light",e);r.classList.toggle("dark",!e);m++;document.body.appendChild(r);void p.invoke().catch((e=>undefined));return new h.DisposableDelegate((async()=>{await o;if(--m===0){void p.stop();if(c){c.dispose();c=null}r.classList.add("splash-fade");window.setTimeout((()=>{document.body.removeChild(r)}),200)}}))}}}};const Ce={id:"@jupyterlab/apputils-extension:print",description:"Add the print capability",autoStart:true,requires:[l.ITranslator],activate:(e,t)=>{var n;const i=t.load("jupyterlab");e.commands.addCommand(ve.print,{label:i.__("Print"),isEnabled:()=>{const t=e.shell.currentWidget;return s.Printing.getPrintFunction(t)!==null},execute:async()=>{const t=e.shell.currentWidget;const n=s.Printing.getPrintFunction(t);if(n){await n()}}});(n=e.shell.currentChanged)===null||n===void 0?void 0:n.connect((()=>{e.commands.notifyCommandChanged(ve.print)}))}};const xe={id:"@jupyterlab/apputils-extension:toggle-header",description:"Adds a command to display the main area widget content header.",autoStart:true,requires:[l.ITranslator],optional:[s.ICommandPalette],activate:(e,t,n)=>{var i;const o=t.load("jupyterlab");const r=o.__("Main Area");e.commands.addCommand(ve.toggleHeader,{label:o.__("Show Header Above Content"),isEnabled:()=>e.shell.currentWidget instanceof s.MainAreaWidget&&!e.shell.currentWidget.contentHeader.isDisposed&&e.shell.currentWidget.contentHeader.widgets.length>0,isToggled:()=>{const t=e.shell.currentWidget;return t instanceof s.MainAreaWidget?!t.contentHeader.isHidden:false},execute:async()=>{const t=e.shell.currentWidget;if(t instanceof s.MainAreaWidget){t.contentHeader.setHidden(!t.contentHeader.isHidden)}}});(i=e.shell.currentChanged)===null||i===void 0?void 0:i.connect((()=>{e.commands.notifyCommandChanged(ve.toggleHeader)}));if(n){n.addItem({command:ve.toggleHeader,category:r})}}};async function Se(e,t,n){var i,s;const r=await t.toJSON();let a=(s=(i=r["layout-restorer:data"])===null||i===void 0?void 0:i.main)===null||s===void 0?void 0:s.current;if(a===undefined||!(a.startsWith("notebook")||a.startsWith("editor"))){document.title=`${o.PageConfig.getOption("appName")||"JupyterLab"}${e==="default"?"":` (${e})`}`}else{let t=o.PathExt.basename(decodeURIComponent(window.location.href));t=t.length>15?t.slice(0,12).concat(``):t;e=e.length>15?e.slice(0,12).concat(``):e;const i=Object.keys(r).filter((e=>e.startsWith("notebook")||e.startsWith("editor"))).length;document.title=`${t}${i>1?` (${i})`:``} - ${e==="default"?n:e}`}}const ke={id:"@jupyterlab/apputils-extension:state",description:"Provides the application state. It is stored per workspaces.",autoStart:true,provides:a.IStateDB,requires:[i.JupyterFrontEnd.IPaths,i.IRouter,l.ITranslator],optional:[s.IWindowResolver],activate:(e,t,n,i,s)=>{const r=i.load("jupyterlab");if(s===null){return new a.StateDB}let l=false;const{commands:d,name:h,serviceManager:p}=e;const{workspaces:m}=p;const g=s.name;const f=new c.PromiseDelegate;const v=new a.StateDB({transform:f.promise});const _=new u.Debouncer((async()=>{const e=g;const t={id:e};const n=await v.toJSON();await m.save(e,{data:n,metadata:t})}));v.changed.connect((()=>void _.invoke()),v);v.changed.connect((()=>Se(g,v,h)));d.addCommand(ve.loadState,{label:r.__("Load state for the current workspace."),execute:async e=>{if(l){return}const{hash:t,path:i,search:s}=e;const r=o.URLExt.queryStringToObject(s||"");const a=typeof r["clone"]==="string"?r["clone"]===""?o.PageConfig.defaultWorkspace:r["clone"]:null;const d=a||g||null;if(d===null){console.error(`${ve.loadState} cannot load null workspace.`);return}try{const e=await m.fetch(d);if(!l){l=true;f.resolve({type:"overwrite",contents:e.data})}}catch({message:c}){console.warn(`Fetching workspace "${g}" failed.`,c);if(!l){l=true;f.resolve({type:"cancel",contents:null})}}if(d===a){delete r["clone"];const e=i+o.URLExt.objectToQueryString(r)+t;const s=_.invoke().then((()=>n.stop));void s.then((()=>{n.navigate(e)}));return s}await _.invoke()}});d.addCommand(ve.reset,{label:r.__("Reset Application State"),execute:async({reload:e})=>{await v.clear();await _.invoke();if(e){n.reload()}}});d.addCommand(ve.resetOnLoad,{label:r.__("Reset state when loading for the workspace."),execute:e=>{const{hash:t,path:i,search:s}=e;const r=o.URLExt.queryStringToObject(s||"");const a="reset"in r;const d="clone"in r;if(!a){return}if(l){return n.reload()}l=true;f.resolve({type:"clear",contents:null});delete r["reset"];const c=i+o.URLExt.objectToQueryString(r)+t;const h=v.clear().then((()=>_.invoke()));if(d){void h.then((()=>{n.navigate(c,{hard:true})}))}else{void h.then((()=>{n.navigate(c)}))}return h}});n.register({command:ve.loadState,pattern:/.?/,rank:30});n.register({command:ve.resetOnLoad,pattern:/(\?reset|\&reset)($|&)/,rank:20});return v}};const je={id:"@jupyterlab/apputils-extension:sessionDialogs",description:"Provides the session context dialogs.",provides:s.ISessionContextDialogs,optional:[l.ITranslator,r.ISettingRegistry],autoStart:true,activate:async(e,t,n)=>new s.SessionContextDialogs({translator:t!==null&&t!==void 0?t:l.nullTranslator,settingRegistry:n!==null&&n!==void 0?n:null})};const Ie={id:"@jupyterlab/apputils-extension:utilityCommands",description:"Adds meta commands to run set of other commands.",requires:[l.ITranslator],optional:[s.ICommandPalette],autoStart:true,activate:(e,t,n)=>{const i=t.load("jupyterlab");const{commands:o}=e;o.addCommand(ve.runFirstEnabled,{label:i.__("Run First Enabled Command"),execute:t=>{const n=t.commands;const i=t.args;const s=Array.isArray(t);for(let o=0;o<n.length;o++){const t=n[o];const r=s?i[o]:i;if(e.commands.isEnabled(t,r)){return e.commands.execute(t,r)}}}});o.addCommand(ve.runAllEnabled,{label:i.__("Run All Enabled Commands Passed as Args"),execute:async t=>{var n,i;const s=(n=t.commands)!==null&&n!==void 0?n:[];const o=t.args;const r=Array.isArray(t);const a=(i=t.errorIfNotEnabled)!==null&&i!==void 0?i:false;for(let l=0;l<s.length;l++){const t=s[l];const n=r?o[l]:o;if(e.commands.isEnabled(t,n)){await e.commands.execute(t,n)}else{if(a){console.error(`${t} is not enabled.`)}}}},isEnabled:t=>{var n;const i=(n=t.commands)!==null&&n!==void 0?n:[];const s=t.args;const o=Array.isArray(t);return i.some(((t,n)=>e.commands.isEnabled(t,o?s[n]:s)))}});o.addCommand(ve.displayShortcuts,{label:i.__("Show Keyboard Shortcuts"),caption:i.__("Show relevant keyboard shortcuts for the current active widget"),execute:t=>{var n;const r=e.shell.currentWidget;const a=r===null||r===void 0?void 0:r.node.contains(document.activeElement);if(!a&&r instanceof s.MainAreaWidget){const e=(n=r.content.node)!==null&&n!==void 0?n:r===null||r===void 0?void 0:r.node;e===null||e===void 0?void 0:e.focus()}const l={commands:o,trans:i};return ge(l)}});if(n){const e=i.__("Help");n.addItem({command:ve.displayShortcuts,category:e})}}};const Ee={id:"@jupyterlab/apputils-extension:sanitizer",description:"Provides the HTML sanitizer.",autoStart:true,provides:s.ISanitizer,requires:[r.ISettingRegistry],activate:(e,t)=>{const n=new s.Sanitizer;const i=e=>{const t=e.get("allowedSchemes").composite;const i=e.get("autolink").composite;const s=e.get("allowNamedProperties").composite;if(t){n.setAllowedSchemes(t)}n.setAutolink(i);n.setAllowNamedProperties(s)};t.load("@jupyterlab/apputils-extension:sanitizer").then((e=>{i(e);e.changed.connect(i)})).catch((e=>{console.error(`Failed to load sanitizer settings:`,e)}));return n}};const Te={id:"@jupyterlab/apputils-extension:kernels-settings",description:"Reserves the name for kernel settings.",autoStart:true,requires:[r.ISettingRegistry],activate:(e,t)=>{void t.load(Te.id)}};const Me=[Te,b,K,C,x,N,_e,be,Ce,ye,J,G,Ee,q,$,ke,we,je,Z,ee,xe,te,Ie,le];const De=Me},25313:(e,t,n)=>{"use strict";var i=n(10395);var s=n(40662);var o=n(24800);var r=n(97913);var a=n(79010);var l=n(3579);var d=n(67996);var c=n(85072);var h=n.n(c);var u=n(97825);var p=n.n(u);var m=n(77659);var g=n.n(m);var f=n(55056);var v=n.n(f);var _=n(10540);var b=n.n(_);var y=n(41113);var w=n.n(y);var C=n(61510);var x={};x.styleTagTransform=w();x.setAttributes=v();x.insert=g().bind(null,"head");x.domAPI=p();x.insertStyleElement=b();var S=h()(C.A,x);const k=C.A&&C.A.locals?C.A.locals:undefined},12253:(e,t,n)=>{"use strict";n.r(t);n.d(t,{Clipboard:()=>M,Collapse:()=>i.Collapser,CommandLinker:()=>L,CommandToolbarButton:()=>i.CommandToolbarButton,CommandToolbarButtonComponent:()=>i.CommandToolbarButtonComponent,DOMUtils:()=>B,Dialog:()=>v,HoverBox:()=>i.HoverBox,ICommandPalette:()=>be,IFrame:()=>i.IFrame,IKernelStatusModel:()=>ye,ILicensesClient:()=>we,ISanitizer:()=>Se,ISessionContextDialogs:()=>Ce,ISplashScreen:()=>ke,IThemeManager:()=>xe,IToolbarWidgetRegistry:()=>Ie,IWindowResolver:()=>je,InputDialog:()=>H,KernelStatus:()=>k,Licenses:()=>Z,MainAreaWidget:()=>ne,MenuFactory:()=>ie,ModalCommandPalette:()=>N,Notification:()=>oe,NotificationManager:()=>se,Printing:()=>ee,ReactWidget:()=>i.ReactWidget,RunningSessions:()=>le,Sanitizer:()=>ue,SemanticCommand:()=>pe,SessionContext:()=>b,SessionContextDialogs:()=>y,Spinner:()=>i.Spinner,Styling:()=>i.Styling,ThemeManager:()=>ve,Toolbar:()=>ze,ToolbarButton:()=>i.ToolbarButton,ToolbarButtonComponent:()=>i.ToolbarButtonComponent,ToolbarWidgetRegistry:()=>Ee,UseSignal:()=>i.UseSignal,VDomModel:()=>i.VDomModel,VDomRenderer:()=>i.VDomRenderer,WidgetTracker:()=>m,WindowResolver:()=>Be,addCommandToolbarButtonClass:()=>i.addCommandToolbarButtonClass,addToolbarButtonClass:()=>i.addToolbarButtonClass,createDefaultFactory:()=>Te,createToolbarFactory:()=>Ne,setToolbar:()=>Oe,showDialog:()=>g,showErrorMessage:()=>f,translateKernelStatuses:()=>x});var i=n(78464);var s=n(21760);var o=n(1143);var r=n(44914);var a=n.n(r);var l=n(66646);var d=n(34236);var c=n(5592);var h=n(2336);var u=n(42856);var p=n(85284);class m{constructor(e){this._currentChanged=new h.Signal(this);this._deferred=null;this._isDisposed=false;this._widgetAdded=new h.Signal(this);this._widgetUpdated=new h.Signal(this);const t=this._focusTracker=new o.FocusTracker;const n=this._pool=new p.RestorablePool(e);this.namespace=e.namespace;t.currentChanged.connect(((e,t)=>{if(t.newValue!==this.currentWidget){n.current=t.newValue}}),this);n.added.connect(((e,t)=>{this._widgetAdded.emit(t)}),this);n.currentChanged.connect(((e,i)=>{if(i===null&&t.currentWidget){n.current=t.currentWidget;return}this.onCurrentChanged(i);this._currentChanged.emit(i)}),this);n.updated.connect(((e,t)=>{this._widgetUpdated.emit(t)}),this)}get currentChanged(){return this._currentChanged}get currentWidget(){return this._pool.current||null}get restored(){if(this._deferred){return Promise.resolve()}else{return this._pool.restored}}get size(){return this._pool.size}get widgetAdded(){return this._widgetAdded}get widgetUpdated(){return this._widgetUpdated}async add(e){this._focusTracker.add(e);await this._pool.add(e);if(!this._focusTracker.activeWidget){this._pool.current=e}}get isDisposed(){return this._isDisposed}dispose(){if(this.isDisposed){return}this._isDisposed=true;this._pool.dispose();this._focusTracker.dispose();h.Signal.clearData(this)}find(e){return this._pool.find(e)}forEach(e){return this._pool.forEach(e)}filter(e){return this._pool.filter(e)}inject(e){return this._pool.inject(e)}has(e){return this._pool.has(e)}async restore(e){const t=this._deferred;if(t){this._deferred=null;return this._pool.restore(t)}if(e){return this._pool.restore(e)}console.warn("No options provided to restore the tracker.")}defer(e){this._deferred=e}async save(e){return this._pool.save(e)}onCurrentChanged(e){}}function g(e={}){const t=new v(e);return t.launch()}function f(e,t,n){const i=v.translator.load("jupyterlab");n=n!==null&&n!==void 0?n:[v.cancelButton({label:i.__("Close")})];console.warn("Showing error:",t);const s=typeof t==="string"?t:t.message;const o=e+"----"+s;const r=_.errorMessagePromiseCache.get(o);if(r){return r}else{const t=g({title:e,body:s,buttons:n}).then((()=>{_.errorMessagePromiseCache.delete(o)}),(e=>{_.errorMessagePromiseCache.delete(o);throw e}));_.errorMessagePromiseCache.set(o,t);return t}}class v extends o.Widget{constructor(e={}){const t=document.createElement("dialog");t.ariaModal="true";super({node:t});this._hasValidationErrors=false;this._ready=new c.PromiseDelegate;this._focusNodeSelector="";this.addClass("jp-Dialog");this.addClass("jp-ThemedContainer");const n=_.handleOptions(e);const i=n.renderer;this._host=n.host;this._defaultButton=n.defaultButton;this._buttons=n.buttons;this._hasClose=n.hasClose;this._buttonNodes=this._buttons.map((e=>i.createButtonNode(e)));this._checkboxNode=null;this._lastMouseDownInDialog=false;if(n.checkbox){const{label:e="",caption:t="",checked:s=false,className:o=""}=n.checkbox;this._checkboxNode=i.createCheckboxNode({label:e,caption:t!==null&&t!==void 0?t:e,checked:s,className:o})}const s=this.layout=new o.PanelLayout;const r=new o.Panel;r.addClass("jp-Dialog-content");if(typeof e.body==="string"){r.addClass("jp-Dialog-content-small");t.ariaLabel=[n.title,e.body].join(" ")}s.addWidget(r);this._body=n.body;const a=i.createHeader(n.title,(()=>this.reject()),e);const l=i.createBody(n.body);const d=i.createFooter(this._buttonNodes,this._checkboxNode);r.addWidget(a);r.addWidget(l);r.addWidget(d);this._bodyWidget=l;this._primary=this._buttonNodes[this._defaultButton];this._focusNodeSelector=e.focusNodeSelector;void v.tracker.add(this)}get ready(){return this._ready.promise}dispose(){const e=this._promise;if(e){this._promise=null;e.reject(void 0);d.ArrayExt.removeFirstOf(_.launchQueue,e.promise)}super.dispose()}launch(){if(this._promise){return this._promise.promise}const e=this._promise=new c.PromiseDelegate;const t=Promise.all(_.launchQueue);_.launchQueue.push(this._promise.promise);return t.then((()=>{if(!this._promise){return Promise.resolve({button:v.cancelButton(),isChecked:null,value:null})}o.Widget.attach(this,this._host);return e.promise}))}resolve(e){if(!this._promise){return}if(e===undefined){e=this._defaultButton}this._resolve(this._buttons[e])}reject(){if(!this._promise){return}this._resolve(v.cancelButton())}handleEvent(e){switch(e.type){case"keydown":this._evtKeydown(e);break;case"mousedown":this._evtMouseDown(e);break;case"click":this._evtClick(e);break;case"input":this._evtInput(e);break;case"focus":this._evtFocus(e);break;case"contextmenu":e.preventDefault();e.stopPropagation();break;default:break}}onAfterAttach(e){const t=this.node;t.addEventListener("keydown",this,true);t.addEventListener("contextmenu",this,true);t.addEventListener("click",this,true);document.addEventListener("mousedown",this,true);document.addEventListener("focus",this,true);document.addEventListener("input",this,true);this._first=_.findFirstFocusable(this.node);this._original=document.activeElement;const n=()=>{var e;if(this._focusNodeSelector){const e=this.node.querySelector(".jp-Dialog-body");const t=e===null||e===void 0?void 0:e.querySelector(this._focusNodeSelector);if(t){this._primary=t}}(e=this._primary)===null||e===void 0?void 0:e.focus();this._ready.resolve()};if(this._bodyWidget instanceof i.ReactWidget&&this._bodyWidget.renderPromise!==undefined){this._bodyWidget.renderPromise.then((()=>{n()})).catch((()=>{console.error("Error while loading Dialog's body")}))}else{n()}}onAfterDetach(e){const t=this.node;t.removeEventListener("keydown",this,true);t.removeEventListener("contextmenu",this,true);t.removeEventListener("click",this,true);document.removeEventListener("focus",this,true);document.removeEventListener("mousedown",this,true);document.removeEventListener("input",this,true);this._original.focus()}onCloseRequest(e){if(this._promise){this.reject()}super.onCloseRequest(e)}_evtInput(e){this._hasValidationErrors=!!this.node.querySelector(":invalid");for(let t=0;t<this._buttons.length;t++){if(this._buttons[t].accept){this._buttonNodes[t].disabled=this._hasValidationErrors}}}_evtClick(e){const t=this.node.getElementsByClassName("jp-Dialog-content")[0];if(!t.contains(e.target)){e.stopPropagation();e.preventDefault();if(this._hasClose&&!this._lastMouseDownInDialog){this.reject()}return}for(const n of this._buttonNodes){if(n.contains(e.target)){const e=this._buttonNodes.indexOf(n);this.resolve(e)}}}_evtKeydown(e){switch(e.keyCode){case 27:e.stopPropagation();e.preventDefault();if(this._hasClose){this.reject()}break;case 37:{const t=document.activeElement;if(t instanceof HTMLButtonElement){let n=this._buttonNodes.indexOf(t)-1;if(n<0){n=this._buttonNodes.length-1}const i=this._buttonNodes[n];e.stopPropagation();e.preventDefault();i.focus()}break}case 39:{const t=document.activeElement;if(t instanceof HTMLButtonElement){let n=this._buttonNodes.indexOf(t)+1;if(n==this._buttons.length){n=0}const i=this._buttonNodes[n];e.stopPropagation();e.preventDefault();i.focus()}break}case 9:{const t=this._buttonNodes[this._buttons.length-1];if(document.activeElement===t&&!e.shiftKey){e.stopPropagation();e.preventDefault();this._first.focus()}break}case 13:{e.stopPropagation();e.preventDefault();const t=document.activeElement;if(t instanceof HTMLButtonElement){const e=this._buttonNodes.indexOf(t);if(e!==-1){this.resolve(e)}}else if(!(t instanceof HTMLTextAreaElement)){const e=this._defaultButton;this.resolve(e)}break}default:break}}_evtFocus(e){var t;const n=e.target;if(!this.node.contains(n)){e.stopPropagation();(t=this._buttonNodes[this._defaultButton])===null||t===void 0?void 0:t.focus()}}_evtMouseDown(e){const t=this.node.getElementsByClassName("jp-Dialog-content")[0];const n=e.target;this._lastMouseDownInDialog=t.contains(n)}_resolve(e){var t,n,i;if(this._hasValidationErrors&&e.accept){return}const s=this._promise;if(!s){this.dispose();return}this._promise=null;d.ArrayExt.removeFirstOf(_.launchQueue,s.promise);const r=this._body;let a=null;if(e.accept&&r instanceof o.Widget&&typeof r.getValue==="function"){a=r.getValue()}this.dispose();s.resolve({button:e,isChecked:(i=(n=(t=this._checkboxNode)===null||t===void 0?void 0:t.querySelector("input"))===null||n===void 0?void 0:n.checked)!==null&&i!==void 0?i:null,value:a})}}(function(e){e.translator=s.nullTranslator;function t(t){t.accept=t.accept!==false;const n=e.translator.load("jupyterlab");const i=t.accept?n.__("Ok"):n.__("Cancel");return{ariaLabel:t.ariaLabel||t.label||i,label:t.label||i,iconClass:t.iconClass||"",iconLabel:t.iconLabel||"",caption:t.caption||"",className:t.className||"",accept:t.accept,actions:t.actions||[],displayType:t.displayType||"default"}}e.createButton=t;function n(e={}){e.accept=false;return t(e)}e.cancelButton=n;function a(e={}){e.accept=true;return t(e)}e.okButton=a;function l(e={}){e.displayType="warn";return t(e)}e.warnButton=l;function d(){e.tracker.forEach((e=>{e.dispose()}))}e.flush=d;class c{createHeader(t,n=()=>{},s={}){let o;const a=e=>{if(e.button===0){e.preventDefault();n()}};const l=e=>{const{key:t}=e;if(t==="Enter"||t===" "){n()}};if(typeof t==="string"){const n=e.translator.load("jupyterlab");o=i.ReactWidget.create(r.createElement(r.Fragment,null,t,s.hasClose&&r.createElement(i.Button,{className:"jp-Dialog-close-button",onMouseDown:a,onKeyDown:l,title:n.__("Cancel"),minimal:true},r.createElement(i.LabIcon.resolveReact,{icon:i.closeIcon,tag:"span"}))))}else{o=i.ReactWidget.create(t)}o.addClass("jp-Dialog-header");i.Styling.styleNode(o.node);return o}createBody(e){const t=e=>{if(e.renderPromise!==undefined){e.renderPromise.then((()=>{i.Styling.styleNode(e.node)})).catch((()=>{console.error("Error while loading Dialog's body")}))}else{i.Styling.styleNode(e.node)}};let n;if(typeof e==="string"){n=new o.Widget({node:document.createElement("span")});n.node.textContent=e}else if(e instanceof o.Widget){n=e;if(n instanceof i.ReactWidget){t(n)}else{i.Styling.styleNode(n.node)}}else{n=i.ReactWidget.create(e);u.MessageLoop.sendMessage(n,o.Widget.Msg.UpdateRequest);t(n)}n.addClass("jp-Dialog-body");return n}createFooter(e,t){const n=new o.Widget;n.addClass("jp-Dialog-footer");if(t){n.node.appendChild(t);n.node.insertAdjacentHTML("beforeend",'<div class="jp-Dialog-spacer"></div>')}const s=document.createElement("div");for(const i of e){s.appendChild(i)}n.node.appendChild(s);i.Styling.styleNode(n.node);return n}createButtonNode(e){const t=document.createElement("button");t.className=this.createItemClass(e);t.appendChild(this.renderIcon(e));t.appendChild(this.renderLabel(e));return t}createCheckboxNode(e){const t=document.createElement("label");t.className="jp-Dialog-checkbox";if(e.className){t.classList.add(e.className)}t.title=e.caption;t.textContent=e.label;const n=document.createElement("input");n.type="checkbox";n.checked=!!e.checked;t.insertAdjacentElement("afterbegin",n);return t}createItemClass(e){let t="jp-Dialog-button";if(e.accept){t+=" jp-mod-accept"}else{t+=" jp-mod-reject"}if(e.displayType==="warn"){t+=" jp-mod-warn"}const n=e.className;if(n){t+=` ${n}`}return t}renderIcon(e){const t=document.createElement("div");t.className=this.createIconClass(e);t.appendChild(document.createTextNode(e.iconLabel));return t}createIconClass(e){const t="jp-Dialog-buttonIcon";const n=e.iconClass;return n?`${t} ${n}`:t}renderLabel(e){const t=document.createElement("div");t.className="jp-Dialog-buttonLabel";t.title=e.caption;t.ariaLabel=e.ariaLabel;t.appendChild(document.createTextNode(e.label));return t}}e.Renderer=c;e.defaultRenderer=new c;e.tracker=new m({namespace:"@jupyterlab/apputils:Dialog"})})(v||(v={}));var _;(function(e){e.launchQueue=[];e.errorMessagePromiseCache=new Map;function t(e={}){var t,n,i,s,o,r,a,l,d;const c=(t=e.buttons)!==null&&t!==void 0?t:[v.cancelButton(),v.okButton()];return{title:(n=e.title)!==null&&n!==void 0?n:"",body:(i=e.body)!==null&&i!==void 0?i:"",host:(s=e.host)!==null&&s!==void 0?s:document.body,checkbox:(o=e.checkbox)!==null&&o!==void 0?o:null,buttons:c,defaultButton:(r=e.defaultButton)!==null&&r!==void 0?r:c.length-1,renderer:(a=e.renderer)!==null&&a!==void 0?a:v.defaultRenderer,focusNodeSelector:(l=e.focusNodeSelector)!==null&&l!==void 0?l:"",hasClose:(d=e.hasClose)!==null&&d!==void 0?d:true}}e.handleOptions=t;function n(e){const t=["input","select","a[href]","textarea","button","[tabindex]"].join(",");return e.querySelectorAll(t)[0]}e.findFirstFocusable=n})(_||(_={}));class b{constructor(e){var t,n,i,o;this._path="";this._name="";this._type="";this._prevKernelName="";this._isDisposed=false;this._disposed=new h.Signal(this);this._session=null;this._ready=new c.PromiseDelegate;this._initializing=false;this._initStarted=new c.PromiseDelegate;this._initPromise=new c.PromiseDelegate;this._isReady=false;this._isTerminating=false;this._isRestarting=false;this._kernelChanged=new h.Signal(this);this._preferenceChanged=new h.Signal(this);this._sessionChanged=new h.Signal(this);this._statusChanged=new h.Signal(this);this._connectionStatusChanged=new h.Signal(this);this._pendingInput=false;this._iopubMessage=new h.Signal(this);this._unhandledMessage=new h.Signal(this);this._propertyChanged=new h.Signal(this);this._dialog=null;this._busyDisposable=null;this._pendingKernelName="";this._pendingSessionRequest="";this.kernelManager=e.kernelManager;this.sessionManager=e.sessionManager;this.specsManager=e.specsManager;this.translator=e.translator||s.nullTranslator;this._trans=this.translator.load("jupyterlab");this._path=(t=e.path)!==null&&t!==void 0?t:c.UUID.uuid4();this._type=(n=e.type)!==null&&n!==void 0?n:"";this._name=(i=e.name)!==null&&i!==void 0?i:"";this._setBusy=e.setBusy;this._kernelPreference=(o=e.kernelPreference)!==null&&o!==void 0?o:{}}get session(){var e;return(e=this._session)!==null&&e!==void 0?e:null}get path(){return this._path}get type(){return this._type}get name(){return this._name}get kernelChanged(){return this._kernelChanged}get sessionChanged(){return this._sessionChanged}get statusChanged(){return this._statusChanged}get pendingInput(){return this._pendingInput}get connectionStatusChanged(){return this._connectionStatusChanged}get iopubMessage(){return this._iopubMessage}get unhandledMessage(){return this._unhandledMessage}get propertyChanged(){return this._propertyChanged}get kernelPreference(){return this._kernelPreference}set kernelPreference(e){if(!c.JSONExt.deepEqual(e,this._kernelPreference)){const t=this._kernelPreference;this._kernelPreference=e;this._preferenceChanged.emit({name:"kernelPreference",oldValue:t,newValue:c.JSONExt.deepCopy(e)})}}get kernelPreferenceChanged(){return this._preferenceChanged}get isReady(){return this._isReady}get ready(){return this._ready.promise}get isTerminating(){return this._isTerminating}get isRestarting(){return this._isRestarting}get hasNoKernel(){return this.kernelDisplayName===this.noKernelName}get kernelDisplayName(){var e,t,n,i,s,o,r;const a=(e=this.session)===null||e===void 0?void 0:e.kernel;if(this._pendingKernelName===this.noKernelName){return this.noKernelName}if(this._pendingKernelName){return(i=(n=(t=this.specsManager.specs)===null||t===void 0?void 0:t.kernelspecs[this._pendingKernelName])===null||n===void 0?void 0:n.display_name)!==null&&i!==void 0?i:this._pendingKernelName}if(!a){return this.noKernelName}return(r=(o=(s=this.specsManager.specs)===null||s===void 0?void 0:s.kernelspecs[a.name])===null||o===void 0?void 0:o.display_name)!==null&&r!==void 0?r:a.name}get kernelDisplayStatus(){var e,t;const n=(e=this.session)===null||e===void 0?void 0:e.kernel;if(this._isTerminating){return"terminating"}if(this._isRestarting){return"restarting"}if(this._pendingKernelName===this.noKernelName){return"unknown"}if(!n&&this._pendingKernelName){return"initializing"}if(!n&&!this.isReady&&this.kernelPreference.canStart!==false&&this.kernelPreference.shouldStart!==false){return"initializing"}return(t=(n===null||n===void 0?void 0:n.connectionStatus)==="connected"?n===null||n===void 0?void 0:n.status:n===null||n===void 0?void 0:n.connectionStatus)!==null&&t!==void 0?t:"unknown"}get prevKernelName(){return this._prevKernelName}get isDisposed(){return this._isDisposed}get disposed(){return this._disposed}get noKernelName(){return this._trans.__("No Kernel")}dispose(){if(this._isDisposed){return}this._isDisposed=true;this._disposed.emit();if(this._session){if(this.kernelPreference.shutdownOnDispose){this.sessionManager.shutdown(this._session.id).catch((e=>{console.error(`Kernel not shut down ${e}`)}))}this._session.dispose();this._session=null}if(this._dialog){this._dialog.dispose()}if(this._busyDisposable){this._busyDisposable.dispose();this._busyDisposable=null}h.Signal.clearData(this)}async startKernel(){const e=this.kernelPreference;if(!e.autoStartDefault&&e.shouldStart===false){return true}let t;if(e.id){t={id:e.id}}else{const n=w.getDefaultKernel({specs:this.specsManager.specs,sessions:this.sessionManager.running(),preference:e});if(n){t={name:n}}}if(t){try{await this._changeKernel(t);return false}catch(n){}}return true}async restartKernel(){var e,t,n,i,s,o;const r=((e=this.session)===null||e===void 0?void 0:e.kernel)||null;if(this._isRestarting){return}this._isRestarting=true;this._isReady=false;this._statusChanged.emit("restarting");try{await((n=(t=this.session)===null||t===void 0?void 0:t.kernel)===null||n===void 0?void 0:n.restart());this._isReady=true}catch(a){console.error(a)}this._isRestarting=false;this._statusChanged.emit(((s=(i=this.session)===null||i===void 0?void 0:i.kernel)===null||s===void 0?void 0:s.status)||"unknown");this._kernelChanged.emit({name:"kernel",oldValue:r,newValue:((o=this.session)===null||o===void 0?void 0:o.kernel)||null})}async changeKernel(e={}){if(this.isDisposed){throw new Error("Disposed")}await this._initStarted.promise;return this._changeKernel(e)}async shutdown(){if(this.isDisposed||!this._initializing){return}await this._initStarted.promise;this._pendingSessionRequest="";this._pendingKernelName=this.noKernelName;return this._shutdownSession()}async initialize(){if(this._initializing){return this._initPromise.promise}this._initializing=true;const e=await this._initialize();if(!e){this._isReady=true;this._ready.resolve(undefined)}if(!this._pendingSessionRequest){this._initStarted.resolve(void 0)}this._initPromise.resolve(e);return e}async _initialize(){const e=this.sessionManager;await e.ready;await e.refreshRunning();const t=(0,d.find)(e.running(),(e=>e.path===this._path));if(t){try{const n=e.connectTo({model:t});this._handleNewSession(n)}catch(n){void this._handleSessionError(n);return Promise.reject(n)}}return await this._startIfNecessary()}async _shutdownSession(){var e;const t=this._session;const n=this._isTerminating;const i=this._isReady;this._isTerminating=true;this._isReady=false;this._statusChanged.emit("terminating");try{await(t===null||t===void 0?void 0:t.shutdown());this._isTerminating=false;t===null||t===void 0?void 0:t.dispose();this._session=null;const e=(t===null||t===void 0?void 0:t.kernel)||null;this._statusChanged.emit("unknown");this._kernelChanged.emit({name:"kernel",oldValue:e,newValue:null});this._sessionChanged.emit({name:"session",oldValue:t,newValue:null})}catch(s){this._isTerminating=n;this._isReady=i;const o=(e=t===null||t===void 0?void 0:t.kernel)===null||e===void 0?void 0:e.status;if(o===undefined){this._statusChanged.emit("unknown")}else{this._statusChanged.emit(o)}throw s}return}async _startIfNecessary(){var e;const t=this.kernelPreference;if(this.isDisposed||((e=this.session)===null||e===void 0?void 0:e.kernel)||t.shouldStart===false||t.canStart===false){return false}return this.startKernel()}async _changeKernel(e={}){if(e.name){this._pendingKernelName=e.name}if(!this._session){this._kernelChanged.emit({name:"kernel",oldValue:null,newValue:null})}if(!this._pendingSessionRequest){this._initStarted.resolve(void 0)}if(this._session&&!this._isTerminating){try{await this._session.changeKernel(e);return this._session.kernel}catch(i){void this._handleSessionError(i);throw i}}const t=l.PathExt.dirname(this._path);const n=this._pendingSessionRequest=l.PathExt.join(t,c.UUID.uuid4());try{this._statusChanged.emit("starting");const t=await this.sessionManager.startNew({path:n,type:this._type,name:this._name,kernel:e});if(this._pendingSessionRequest!==t.path){await t.shutdown();t.dispose();return null}await t.setPath(this._path);await t.setName(this._name);if(this._session&&!this._isTerminating){await this._shutdownSession()}return this._handleNewSession(t)}catch(i){void this._handleSessionError(i);throw i}}_handleNewSession(e){var t,n,i;if(this.isDisposed){throw Error("Disposed")}if(!this._isReady){this._isReady=true;this._ready.resolve(undefined)}if(this._session){this._session.dispose()}this._session=e;this._pendingKernelName="";if(e){this._prevKernelName=(n=(t=e.kernel)===null||t===void 0?void 0:t.name)!==null&&n!==void 0?n:"";e.disposed.connect(this._onSessionDisposed,this);e.propertyChanged.connect(this._onPropertyChanged,this);e.kernelChanged.connect(this._onKernelChanged,this);e.statusChanged.connect(this._onStatusChanged,this);e.connectionStatusChanged.connect(this._onConnectionStatusChanged,this);e.pendingInput.connect(this._onPendingInput,this);e.iopubMessage.connect(this._onIopubMessage,this);e.unhandledMessage.connect(this._onUnhandledMessage,this);if(e.path!==this._path){this._onPropertyChanged(e,"path")}if(e.name!==this._name){this._onPropertyChanged(e,"name")}if(e.type!==this._type){this._onPropertyChanged(e,"type")}}this._sessionChanged.emit({name:"session",oldValue:null,newValue:e});this._kernelChanged.emit({oldValue:null,newValue:(e===null||e===void 0?void 0:e.kernel)||null,name:"kernel"});this._statusChanged.emit(((i=e===null||e===void 0?void 0:e.kernel)===null||i===void 0?void 0:i.status)||"unknown");return(e===null||e===void 0?void 0:e.kernel)||null}async _handleSessionError(e){this._handleNewSession(null);let t="";let n="";try{t=e.traceback;n=e.message}catch(e){}await this._displayKernelError(n,t)}async _displayKernelError(e,t){const n=r.createElement("div",null,e&&r.createElement("pre",null,e),t&&r.createElement("details",{className:"jp-mod-wide"},r.createElement("pre",null,t)));const i=this._dialog=new v({title:this._trans.__("Error Starting Kernel"),body:n,buttons:[v.okButton()]});await i.launch();this._dialog=null}_onSessionDisposed(){if(this._session){const e=this._session;this._session=null;const t=this._session;this._sessionChanged.emit({name:"session",oldValue:e,newValue:t})}}_onPropertyChanged(e,t){switch(t){case"path":this._path=e.path;break;case"name":this._name=e.name;break;case"type":this._type=e.type;break;default:throw new Error(`unrecognized property ${t}`)}this._propertyChanged.emit(t)}_onKernelChanged(e,t){this._kernelChanged.emit(t)}_onStatusChanged(e,t){var n;if(t==="dead"){const t=(n=e.kernel)===null||n===void 0?void 0:n.model;if(t===null||t===void 0?void 0:t.reason){const e=t.traceback||"";void this._displayKernelError(t.reason,e)}}if(this._setBusy){if(t==="busy"){if(!this._busyDisposable){this._busyDisposable=this._setBusy()}}else{if(this._busyDisposable){this._busyDisposable.dispose();this._busyDisposable=null}}}this._statusChanged.emit(t)}_onConnectionStatusChanged(e,t){this._connectionStatusChanged.emit(t)}_onPendingInput(e,t){this._pendingInput=t}_onIopubMessage(e,t){if(t.header.msg_type==="shutdown_reply"){this.session.kernel.removeInputGuard()}this._iopubMessage.emit(t)}_onUnhandledMessage(e,t){this._unhandledMessage.emit(t)}}(function(e){function t(e){const{preference:t}=e;const{shouldStart:n}=t;if(n===false){return null}return w.getDefaultKernel(e)}e.getDefaultKernel=t})(b||(b={}));class y{constructor(e={}){var t;this._translator=(t=e.translator)!==null&&t!==void 0?t:s.nullTranslator;this._settingRegistry=e.settingRegistry||null}async selectKernel(e){if(e.isDisposed){return Promise.resolve()}const t=this._translator;const n=t.load("jupyterlab");let i=n.__("Cancel");if(e.hasNoKernel){i=e.kernelDisplayName}const s=[v.cancelButton({label:i}),v.okButton({label:n.__("Select"),ariaLabel:n.__("Select Kernel")})];const o=e.kernelPreference.autoStartDefault;const r=typeof o==="boolean";const a=new v({title:n.__("Select Kernel"),body:w.createKernelSelector(e,t),buttons:s,checkbox:r?{label:n.__("Always start the preferred kernel"),caption:n.__("Remember my choice and always start the preferred kernel"),checked:o}:null});const l=await a.launch();if(e.isDisposed||!l.button.accept){return}if(r&&l.isChecked!==null){e.kernelPreference={...e.kernelPreference,autoStartDefault:l.isChecked}}const d=l.value;if(d===null&&!e.hasNoKernel){return e.shutdown()}if(d){await e.changeKernel(d)}}async restart(e){var t,n,i,s,o;const r=this._translator.load("jupyterlab");await e.initialize();if(e.isDisposed){throw new Error("session already disposed")}const a=(t=e.session)===null||t===void 0?void 0:t.kernel;if(!a&&e.prevKernelName){await e.changeKernel({name:e.prevKernelName});return true}if(!a){throw new Error("No kernel to restart")}const l="@jupyterlab/apputils-extension:sessionDialogs";const d=(i=(n=e.kernelPreference)===null||n===void 0?void 0:n.skipKernelRestartDialog)!==null&&i!==void 0?i:false;const c=(o=await((s=this._settingRegistry)===null||s===void 0?void 0:s.get(l,"skipKernelRestartDialog")))===null||o===void 0?void 0:o.composite;if(c||d){await e.restartKernel();return true}const h=v.warnButton({label:r.__("Restart"),ariaLabel:r.__("Confirm Kernel Restart")});const u=await g({title:r.__("Restart Kernel?"),body:r.__("Do you want to restart the kernel of %1? All variables will be lost.",e.name),buttons:[v.cancelButton({ariaLabel:r.__("Cancel Kernel Restart")}),h],checkbox:{label:r.__("Do not ask me again."),caption:r.__("If checked, the kernel will restart without confirmation prompt in the future; you can change this back in the settings.")}});if(a.isDisposed){return false}if(u.button.accept){if(typeof u.isChecked==="boolean"&&u.isChecked==true){e.kernelPreference={...e.kernelPreference,skipKernelRestartDialog:true}}await e.restartKernel();return true}return false}}(function(e){function t(e,t=null){var n,i,o,r,a,d,c;const h={disabled:false,groups:[]};const u=Array.from((i=(n=e.kernelManager)===null||n===void 0?void 0:n.running())!==null&&i!==void 0?i:Array.from(e.sessionManager.running()).filter((e=>!!e.kernel)).map((e=>e.kernel)));const p=Array.from((o=e.sessionManager.running())!==null&&o!==void 0?o:[]).reduce(((e,t)=>{var n;if((n=t.kernel)===null||n===void 0?void 0:n.id)e[t.kernel.id]=t;return e}),{});const m={...e.kernelPreference,id:(a=(r=e.session)===null||r===void 0?void 0:r.kernel)===null||a===void 0?void 0:a.id};const g=!e.hasNoKernel?e.kernelDisplayName:null;const f={default:"",kernelspecs:Object.create(null),...e.specsManager.specs};const v=[];const _=Object.create(null);for(const s in f.kernelspecs){v.push(f.kernelspecs[s]);_[s]=f.kernelspecs[s].language}v.sort(((e,t)=>e.display_name.localeCompare(t.display_name)));t=t||s.nullTranslator;const b=t.load("jupyterlab");const y=m.language||_[m.name]||(m.id?_[(d=p[m.id])===null||d===void 0?void 0:d.name]:"");const w={connectKernel:b.__("Connect to Existing Kernel"),startPreferred:b.__("Start %1 Kernel",y),startOther:b.__("Start Kernel"),connectToPreferred:b.__("Connect to Existing %1 Kernel",y),connectToOther:b.__("Connect to Other Kernel"),noKernel:b.__("No Kernel"),startKernel:b.__("Start Kernel"),useNoKernel:b.__("Use No Kernel")};const C={label:w.useNoKernel,options:[{text:w.noKernel,title:w.noKernel,value:JSON.stringify(null)}]};const x=(e,t,n)=>{const i=n?n.name||l.PathExt.basename(n.path):e.name||b.__("Unknown Kernel");return{text:`${i} (${e.id.split("-")[0]})`,title:(n?`${b.__("Path: %1",n.path)}\n`:``)+`${b.__("Name: %1",i)}\n`+`${b.__("Kernel Name: %1",t!==null&&t!==void 0?t:e.name)}\n`+`${b.__("Kernel Id: %1",e.id)}`,value:JSON.stringify({id:e.id})}};const S=e=>({text:e.display_name,value:JSON.stringify({name:e.name})});if(m.canStart===false){h.disabled=true;h.groups.push(C);return h}if(y){const e={label:w.startPreferred,options:[]};const t={label:w.startOther,options:[]};const n={label:w.connectToPreferred,options:[]};const i={label:w.connectToOther,options:[]};for(const s of v){(s.language===y?e:t).options.push(S(s))}h.groups.push(e);h.groups.push(C);h.groups.push(t);u.map((e=>{var t,n;return{option:x(e,(n=(t=f.kernelspecs[e.name])===null||t===void 0?void 0:t.display_name)!==null&&n!==void 0?n:"",p[e.id]),language:_[e.name]}})).sort(((e,t)=>e.option.text.localeCompare(t.option.text))).forEach((e=>(y===e.language?n:i).options.push(e.option)));if(n.options.length)h.groups.push(n);if(i.options.length)h.groups.push(i)}else{h.groups.push({label:w.startKernel,options:v.map((e=>S(e)))});h.groups.push(C);h.groups.push({label:w.connectKernel,options:u.map((e=>{var t,n;return x(e,(n=(t=f.kernelspecs[e.name])===null||t===void 0?void 0:t.display_name)!==null&&n!==void 0?n:"",p[e.id])})).sort(((e,t)=>e.text.localeCompare(t.text)))})}if(m.id||g||m.name){for(const e of h.groups){for(const t of e.options){const e=JSON.parse(t.value);if(!e)continue;if(m.id){if(m.id===e.id){t.selected=true;return h}continue}if(g){if(g===((c=f.kernelspecs[e.name])===null||c===void 0?void 0:c.display_name)){t.selected=true;return h}continue}if(m.name){if(m.name===e.name){t.selected=true;return h}continue}}}}return h}e.kernelOptions=t})(y||(y={}));var w;(function(e){e.createKernelSelector=(e,i)=>new t({node:n(e,i)});class t extends o.Widget{getValue(){const e=this.node.querySelector("select");return JSON.parse(e.value)}}function n(e,t){t=t||s.nullTranslator;const n=t.load("jupyterlab");const i=document.createElement("div");const o=document.createElement("label");o.textContent=`${n.__("Select kernel for:")} "${e.name}"`;i.appendChild(o);const r=document.createElement("select");const a=y.kernelOptions(e,t);if(a.disabled)r.disabled=true;for(const s of a.groups){const{label:e,options:t}=s;const n=document.createElement("optgroup");n.label=e;for(const{selected:i,text:s,title:o,value:r}of t){const e=document.createElement("option");if(i)e.selected=true;if(o)e.title=o;e.text=s;e.value=r;n.appendChild(e)}r.appendChild(n)}i.appendChild(r);return i}function i(e){var t;const{specs:n,preference:i}=e;const{name:s,language:o,canStart:r,autoStartDefault:a}=i;if(!n||r===false){return null}const l=a?n.default:null;if(!s&&!o){return l}for(const c in n.kernelspecs){if(c===s){return s}}if(!o){return l}const d=[];for(const c in n.kernelspecs){const e=(t=n.kernelspecs[c])===null||t===void 0?void 0:t.language;if(o===e){d.push(c)}}if(d.length===1){const e=d[0];console.warn("No exact match found for "+e+", using kernel "+e+" that matches "+"language="+o);return e}return l}e.getDefaultKernel=i})(w||(w={}));var C=n(83444);function x(e){e=e||s.nullTranslator;const t=e.load("jupyterlab");const n={unknown:t.__("Unknown"),starting:t.__("Starting"),idle:t.__("Idle"),busy:t.__("Busy"),terminating:t.__("Terminating"),restarting:t.__("Restarting"),autorestarting:t.__("Autorestarting"),dead:t.__("Dead"),connected:t.__("Connected"),connecting:t.__("Connecting"),disconnected:t.__("Disconnected"),initializing:t.__("Initializing"),"":""};return n}function S(e){const t=e.translator||s.nullTranslator;const n=t.load("jupyterlab");let i="";if(e.status){i=` | ${e.status}`}return a().createElement(C.TextItem,{onClick:e.handleClick,onKeyDown:e.handleKeyDown,source:`${e.kernelName}${i}`,title:n.__("Change kernel for %1",e.activityName),tabIndex:0})}class k extends i.VDomRenderer{constructor(e,t){super(new k.Model(t));this.translator=t||s.nullTranslator;this._handleClick=e.onClick;this._handleKeyDown=e.onKeyDown;this.addClass("jp-mod-highlighted")}render(){if(this.model===null){return null}else{return a().createElement(S,{status:this.model.status,kernelName:this.model.kernelName,activityName:this.model.activityName,handleClick:this._handleClick,handleKeyDown:this._handleKeyDown,translator:this.translator})}}}(function(e){class t extends i.VDomModel{constructor(e){super();this._activityName="";this._kernelName="";this._kernelStatus="";this._sessionContext=null;e=e!==null&&e!==void 0?e:s.nullTranslator;this._trans=e.load("jupyterlab");this._statusNames=x(e)}get kernelName(){return this._kernelName}get status(){return this._kernelStatus?this._statusNames[this._kernelStatus]:undefined}get activityName(){return this._activityName}set activityName(e){const t=this._activityName;if(t===e){return}this._activityName=e;this.stateChanged.emit()}get sessionContext(){return this._sessionContext}set sessionContext(e){var t,n,i,s;(t=this._sessionContext)===null||t===void 0?void 0:t.statusChanged.disconnect(this._onKernelStatusChanged,this);(n=this._sessionContext)===null||n===void 0?void 0:n.connectionStatusChanged.disconnect(this._onKernelStatusChanged,this);(i=this._sessionContext)===null||i===void 0?void 0:i.kernelChanged.disconnect(this._onKernelChanged,this);const o=this._getAllState();this._sessionContext=e;this._kernelStatus=e===null||e===void 0?void 0:e.kernelDisplayStatus;this._kernelName=(s=e===null||e===void 0?void 0:e.kernelDisplayName)!==null&&s!==void 0?s:this._trans.__("No Kernel");e===null||e===void 0?void 0:e.statusChanged.connect(this._onKernelStatusChanged,this);e===null||e===void 0?void 0:e.connectionStatusChanged.connect(this._onKernelStatusChanged,this);e===null||e===void 0?void 0:e.kernelChanged.connect(this._onKernelChanged,this);this._triggerChange(o,this._getAllState())}_onKernelStatusChanged(){var e;this._kernelStatus=(e=this._sessionContext)===null||e===void 0?void 0:e.kernelDisplayStatus;this.stateChanged.emit(void 0)}_onKernelChanged(e,t){var n;const i=this._getAllState();this._kernelStatus=(n=this._sessionContext)===null||n===void 0?void 0:n.kernelDisplayStatus;this._kernelName=e.kernelDisplayName;this._triggerChange(i,this._getAllState())}_getAllState(){return[this._kernelName,this._kernelStatus,this._activityName]}_triggerChange(e,t){if(c.JSONExt.deepEqual(e,t)){this.stateChanged.emit(void 0)}}}e.Model=t})(k||(k={}));const j="jp-Toolbar-kernelName";const I="jp-Toolbar-kernelStatus";var E;(function(e){function t(e,t){t=t||s.nullTranslator;const n=t.load("jupyterlab");return new i.ToolbarButton({icon:i.stopIcon,onClick:()=>{var t,n;void((n=(t=e.session)===null||t===void 0?void 0:t.kernel)===null||n===void 0?void 0:n.interrupt())},tooltip:n.__("Interrupt the kernel")})}e.createInterruptButton=t;function n(e,t,n){n=n!==null&&n!==void 0?n:s.nullTranslator;const o=n.load("jupyterlab");return new i.ToolbarButton({icon:i.refreshIcon,onClick:()=>{void(t!==null&&t!==void 0?t:new y({translator:n})).restart(e)},tooltip:o.__("Restart the kernel")})}e.createRestartButton=n;function o(e,t,n){const s=i.ReactWidget.create(r.createElement(T.KernelNameComponent,{sessionContext:e,dialogs:t!==null&&t!==void 0?t:new y({translator:n}),translator:n}));s.addClass("jp-KernelName");return s}e.createKernelNameItem=o;function a(e,t){return new T.KernelStatus(e,t)}e.createKernelStatusItem=a})(E||(E={}));var T;(function(e){function t(e){const t=e.translator||s.nullTranslator;const n=t.load("jupyterlab");const o=()=>{void e.dialogs.selectKernel(e.sessionContext)};return r.createElement(i.UseSignal,{signal:e.sessionContext.kernelChanged,initialSender:e.sessionContext},(e=>r.createElement(i.ToolbarButtonComponent,{className:j,onClick:o,tooltip:n.__("Switch kernel"),label:e===null||e===void 0?void 0:e.kernelDisplayName})))}e.KernelNameComponent=t;class n extends o.Widget{constructor(e,t){super();this.translator=t||s.nullTranslator;this._trans=this.translator.load("jupyterlab");this.addClass(I);this._statusNames=x(this.translator);this._onStatusChanged(e);e.statusChanged.connect(this._onStatusChanged,this);e.connectionStatusChanged.connect(this._onStatusChanged,this)}_onStatusChanged(e){if(this.isDisposed){return}const t=e.kernelDisplayStatus;const n={container:this.node,title:this._trans.__("Kernel %1",this._statusNames[t]||t),stylesheet:"toolbarButton",alignSelf:"normal",height:"24px"};i.LabIcon.remove(this.node);if(t==="busy"||t==="starting"||t==="terminating"||t==="restarting"||t==="initializing"){i.circleIcon.element(n)}else if(t==="connecting"||t==="disconnected"||t==="unknown"){i.offlineBoltIcon.element(n)}else{i.circleEmptyIcon.element(n)}}}e.KernelStatus=n})(T||(T={}));var M;(function(e){function t(){return D.instance}e.getInstance=t;function n(e){D.instance=e}e.setInstance=n;function i(e){const t=document.body;const n=i=>{const s=i.clipboardData||window.clipboardData;if(typeof e==="string"){s.setData("text",e)}else{e.types().map((t=>{s.setData(t,e.getData(t))}))}i.preventDefault();t.removeEventListener("copy",n)};t.addEventListener("copy",n);s(t)}e.copyToSystem=i;function s(e,t="copy"){let n=window.getSelection();const i=[];for(let o=0,r=(n===null||n===void 0?void 0:n.rangeCount)||0;o<r;++o){i[o]=n.getRangeAt(o).cloneRange()}const s=document.createRange();s.selectNodeContents(e);if(n){n.removeAllRanges();n.addRange(s)}document.execCommand(t);n=window.getSelection();if(n){n.removeAllRanges();for(let e=0,t=i.length;e<t;++e){n.addRange(i[e])}}}e.generateEvent=s})(M||(M={}));var D;(function(e){e.instance=new c.MimeData})(D||(D={}));const A="commandlinker-command";const P="commandlinker-args";class L{constructor(e){this._isDisposed=false;this._commands=e.commands;document.body.addEventListener("click",this)}get isDisposed(){return this._isDisposed}dispose(){if(this.isDisposed){return}this._isDisposed=true;document.body.removeEventListener("click",this)}connectNode(e,t,n){e.setAttribute(`data-${A}`,t);if(n!==void 0){e.setAttribute(`data-${P}`,JSON.stringify(n))}return e}disconnectNode(e){e.removeAttribute(`data-${A}`);e.removeAttribute(`data-${P}`);return e}handleEvent(e){switch(e.type){case"click":this._evtClick(e);break;default:return}}populateVNodeDataset(e,t){let n;if(t!==void 0){n={[P]:JSON.stringify(t),[A]:e}}else{n={[A]:e}}return n}_evtClick(e){let t=e.target;while(t&&t.parentElement){if(t.hasAttribute(`data-${A}`)){e.preventDefault();const n=t.getAttribute(`data-${A}`);if(!n){return}const i=t.getAttribute(`data-${P}`);let s=c.JSONExt.emptyObject;if(i){s=JSON.parse(i)}void this._commands.execute(n,s);return}t=t.parentElement}}}const R="jp-SearchIconGroup";class N extends o.Panel{constructor(e){super();this.addClass("jp-ModalCommandPalette");this.addClass("jp-ThemedContainer");this.id="modal-command-palette";this.palette=e.commandPalette;this._commandPalette.commands.commandExecuted.connect((()=>{if(this.isAttached&&this.isVisible){this.hideAndReset()}}));this.node.tabIndex=0}get palette(){return this._commandPalette}set palette(e){this._commandPalette=e;if(!this.searchIconGroup){this._commandPalette.inputNode.insertAdjacentElement("afterend",this.createSearchIconGroup())}this.addWidget(e);this.hideAndReset()}attach(){o.Widget.attach(this,document.body)}detach(){o.Widget.detach(this)}hideAndReset(){this.hide();this._commandPalette.inputNode.value="";this._commandPalette.refresh()}handleEvent(e){switch(e.type){case"keydown":this._evtKeydown(e);break;case"blur":{if(this.node.contains(e.target)&&!this.node.contains(e.relatedTarget)){e.stopPropagation();this.hideAndReset()}break}case"contextmenu":e.preventDefault();e.stopPropagation();break;default:break}}get searchIconGroup(){return this._commandPalette.node.getElementsByClassName(R)[0]}createSearchIconGroup(){const e=document.createElement("div");e.classList.add(R);i.searchIcon.render(e);return e}onAfterAttach(e){this.node.addEventListener("keydown",this,true);this.node.addEventListener("contextmenu",this,true)}onAfterDetach(e){this.node.removeEventListener("keydown",this,true);this.node.removeEventListener("contextmenu",this,true)}onBeforeHide(e){document.removeEventListener("blur",this,true)}onAfterShow(e){document.addEventListener("blur",this,true)}onActivateRequest(e){if(this.isAttached){this.show();this._commandPalette.activate()}}_evtKeydown(e){switch(e.keyCode){case 27:e.stopPropagation();e.preventDefault();this.hideAndReset();break;default:break}}}var O=n(76326);var B;(function(e){function t(e,t,n){return d.ArrayExt.findFirstIndex(e,(e=>O.ElementExt.hitTest(e,t,n)))}e.hitTestNodes=t;function n(e,t){return e.querySelector(`.${t}`)}e.findElement=n;function i(e,t){return e.getElementsByClassName(t)}e.findElements=i;function s(){return`id-${c.UUID.uuid4()}`}e.createDomID=s;function o(e,t=document){const n=t.activeElement;return!!(n&&e.contains(n)&&(n.matches(":read-write")||n.shadowRoot&&o(n.shadowRoot,n.shadowRoot)))}e.hasActiveEditableElement=o})(B||(B={}));const F="jp-Input-Dialog";const z="jp-Input-Boolean-Dialog";var H;(function(e){function t(e){return g({...e,body:new V(e),buttons:[v.cancelButton({label:e.cancelLabel}),v.okButton({label:e.okLabel})],focusNodeSelector:"input"})}e.getBoolean=t;function n(e){return g({...e,body:new U(e),buttons:[v.cancelButton({label:e.cancelLabel}),v.okButton({label:e.okLabel})],focusNodeSelector:"input"})}e.getNumber=n;function i(e){return g({...e,body:new J(e),buttons:[v.cancelButton({label:e.cancelLabel}),v.okButton({label:e.okLabel})],focusNodeSelector:e.editable?"input":"select"})}e.getItem=i;function s(e){return g({...e,body:new G(e),buttons:[v.cancelButton({label:e.cancelLabel}),v.okButton({label:e.okLabel})]})}e.getMultipleItems=s;function o(e){return g({...e,body:new $(e),buttons:[v.cancelButton({label:e.cancelLabel}),v.okButton({label:e.okLabel})],focusNodeSelector:"input"})}e.getText=o;function r(e){return g({...e,body:new K(e),buttons:[v.cancelButton({label:e.cancelLabel}),v.okButton({label:e.okLabel})],focusNodeSelector:"input"})}e.getPassword=r})(H||(H={}));class W extends o.Widget{constructor(e){super();this.addClass(F);this._input=document.createElement("input");this._input.classList.add("jp-mod-styled");this._input.id="jp-dialog-input-id";if(e.label!==undefined){const t=document.createElement("label");t.textContent=e.label;t.htmlFor=this._input.id;this.node.appendChild(t)}const t=document.createElement("div");t.className="jp-InputDialog-inputWrapper";if(e.prefix){const n=document.createElement("span");n.className="jp-InputDialog-inputPrefix";n.textContent=e.prefix;n.ariaHidden="true";t.appendChild(n)}t.appendChild(this._input);if(e.suffix){const n=document.createElement("span");n.className="jp-InputDialog-inputSuffix";n.textContent=e.suffix;n.ariaHidden="true";t.appendChild(n)}this.node.appendChild(t)}}class V extends W{constructor(e){super(e);this.addClass(z);this._input.type="checkbox";this._input.checked=e.value?true:false}getValue(){return this._input.checked}}class U extends W{constructor(e){super(e);this._input.type="number";this._input.value=e.value?e.value.toString():"0"}getValue(){if(this._input.value){return Number(this._input.value)}else{return Number.NaN}}}class q extends W{constructor(e){super(e);this._input.value=e.text?e.text:"";if(e.placeholder){this._input.placeholder=e.placeholder}if(e.pattern){this._input.pattern=e.pattern}if(e.required){this._input.required=e.required}}getValue(){return this._input.value}}class $ extends q{constructor(e){var t;super(e);this._input.type="text";this._initialSelectionRange=Math.min(this._input.value.length,Math.max(0,(t=e.selectionRange)!==null&&t!==void 0?t:this._input.value.length))}onAfterAttach(e){super.onAfterAttach(e);if(this._initialSelectionRange>0&&this._input.value){this._input.setSelectionRange(0,this._initialSelectionRange)}}}class K extends q{constructor(e){super(e);this._input.type="password"}onAfterAttach(e){super.onAfterAttach(e);if(this._input.value){this._input.select()}}}class J extends W{constructor(e){super(e);this._editable=e.editable||false;let t=e.current||0;let n;if(typeof t==="number"){n=Math.max(0,Math.min(t,e.items.length-1));t=""}this._list=document.createElement("select");e.items.forEach(((e,i)=>{const s=document.createElement("option");if(i===n){s.selected=true;t=e}s.value=e;s.textContent=e;this._list.appendChild(s)}));if(e.editable){const n=document.createElement("datalist");n.id="input-dialog-items";n.appendChild(this._list);this._input.type="list";this._input.value=t;this._input.setAttribute("list",n.id);if(e.placeholder){this._input.placeholder=e.placeholder}this.node.appendChild(n)}else{this._input.parentElement.replaceChild(this._list,this._input)}}getValue(){if(this._editable){return this._input.value}else{return this._list.value}}}class G extends W{constructor(e){super(e);let t=e.defaults||[];this._list=document.createElement("select");this._list.setAttribute("multiple","");e.items.forEach((e=>{const t=document.createElement("option");t.value=e;t.textContent=e;this._list.appendChild(t)}));this._input.remove();this.node.appendChild(this._list);const n=this._list.options;for(let i=0;i<n.length;i++){const e=n[i];if(t.includes(e.value)){e.selected=true}else{e.selected=false}}}getValue(){let e=[];for(let t of this._list.options){if(t.selected&&!t.classList.contains("hidden")){e.push(t.value||t.text)}}return e}}var Y=n(24805);var X=n(97290);const Q="jp-Licenses-Filters-title";class Z extends o.SplitPanel{constructor(e){super();this.addClass("jp-Licenses");this.model=e.model;this.initLeftPanel();this.initFilters();this.initBundles();this.initGrid();this.initLicenseText();this.setRelativeSizes([1,2,3]);void this.model.initLicenses().then((()=>this._updateBundles()));this.model.trackerDataChanged.connect((()=>{this.title.label=this.model.title}))}dispose(){if(this.isDisposed){return}this._bundles.currentChanged.disconnect(this.onBundleSelected,this);this.model.dispose();super.dispose()}initLeftPanel(){this._leftPanel=new o.Panel;this._leftPanel.addClass("jp-Licenses-FormArea");this.addWidget(this._leftPanel);o.SplitPanel.setStretch(this._leftPanel,1)}initFilters(){this._filters=new Z.Filters(this.model);o.SplitPanel.setStretch(this._filters,1);this._leftPanel.addWidget(this._filters)}initBundles(){this._bundles=new o.TabBar({orientation:"vertical",renderer:new Z.BundleTabRenderer(this.model)});this._bundles.addClass("jp-Licenses-Bundles");o.SplitPanel.setStretch(this._bundles,1);this._leftPanel.addWidget(this._bundles);this._bundles.currentChanged.connect(this.onBundleSelected,this);this.model.stateChanged.connect((()=>this._bundles.update()))}initGrid(){this._grid=new Z.Grid(this.model);o.SplitPanel.setStretch(this._grid,1);this.addWidget(this._grid)}initLicenseText(){this._licenseText=new Z.FullText(this.model);o.SplitPanel.setStretch(this._grid,1);this.addWidget(this._licenseText)}onBundleSelected(){var e;if((e=this._bundles.currentTitle)===null||e===void 0?void 0:e.label){this.model.currentBundleName=this._bundles.currentTitle.label}}_updateBundles(){this._bundles.clearTabs();let e=0;const{currentBundleName:t}=this.model;let n=0;for(const i of this.model.bundleNames){const s=new o.Widget;s.title.label=i;if(i===t){n=e}this._bundles.insertTab(++e,s.title)}this._bundles.currentIndex=n}}(function(e){e.REPORT_FORMATS={markdown:{id:"markdown",title:"Markdown",icon:i.markdownIcon},csv:{id:"csv",title:"CSV",icon:i.spreadsheetIcon},json:{id:"json",title:"JSON",icon:i.jsonIcon}};e.DEFAULT_FORMAT="markdown";class t{constructor(e={}){var t;this._licensesUrl=e.licensesUrl||"";this._serverSettings=(t=e.serverSettings)!==null&&t!==void 0?t:Y.ServerConnection.makeSettings()}async download(e){const t=`${this._licensesUrl}?format=${e.format}&download=1`;const n=document.createElement("a");n.href=t;n.download="";document.body.appendChild(n);n.click();document.body.removeChild(n);URL.revokeObjectURL(t);return void 0}async getBundles(){const e=await Y.ServerConnection.makeRequest(this._licensesUrl,{},this._serverSettings);return e.json()}}e.LicensesClient=t;class n extends i.VDomModel{constructor(e){super();this._selectedPackageChanged=new h.Signal(this);this._trackerDataChanged=new h.Signal(this);this._currentPackageIndex=0;this._licensesReady=new c.PromiseDelegate;this._packageFilter={};this._trans=e.trans;this._client=e.client;if(e.currentBundleName){this._currentBundleName=e.currentBundleName}if(e.packageFilter){this._packageFilter=e.packageFilter}if(e.currentPackageIndex){this._currentPackageIndex=e.currentPackageIndex}}async initLicenses(){try{this._serverResponse=await this._client.getBundles();this._licensesReady.resolve();this.stateChanged.emit(void 0)}catch(e){this._licensesReady.reject(e)}}async download(e){return this._client.download(e)}get selectedPackageChanged(){return this._selectedPackageChanged}get trackerDataChanged(){return this._trackerDataChanged}get bundleNames(){var e;return Object.keys(((e=this._serverResponse)===null||e===void 0?void 0:e.bundles)||{})}get currentBundleName(){if(this._currentBundleName){return this._currentBundleName}if(this.bundleNames.length){return this.bundleNames[0]}return null}set currentBundleName(e){if(this._currentBundleName!==e){this._currentBundleName=e;this.stateChanged.emit(void 0);this._trackerDataChanged.emit(void 0)}}get licensesReady(){return this._licensesReady.promise}get bundles(){var e;return((e=this._serverResponse)===null||e===void 0?void 0:e.bundles)||{}}get currentPackageIndex(){return this._currentPackageIndex}set currentPackageIndex(e){if(this._currentPackageIndex===e){return}this._currentPackageIndex=e;this._selectedPackageChanged.emit(void 0);this.stateChanged.emit(void 0);this._trackerDataChanged.emit(void 0)}get currentPackage(){var e;if(this.currentBundleName&&this.bundles&&this._currentPackageIndex!=null){return this.getFilteredPackages(((e=this.bundles[this.currentBundleName])===null||e===void 0?void 0:e.packages)||[])[this._currentPackageIndex]}return null}get trans(){return this._trans}get title(){return`${this._currentBundleName||""} ${this._trans.__("Licenses")}`.trim()}get packageFilter(){return this._packageFilter}set packageFilter(e){this._packageFilter=e;this.stateChanged.emit(void 0);this._trackerDataChanged.emit(void 0)}getFilteredPackages(e){let t=[];let n=Object.entries(this._packageFilter).filter((([e,t])=>t&&`${t}`.trim().length)).map((([e,t])=>[e,`${t}`.toLowerCase().trim().split(" ")]));for(const i of e){let e=0;for(const[t,s]of n){let n=0;let o=`${i[t]}`.toLowerCase();for(const e of s){if(o.includes(e)){n+=1}}if(n){e+=1}}if(e===n.length){t.push(i)}}return Object.values(t)}}e.Model=n;class s extends i.VDomRenderer{constructor(e){super(e);this.renderFilter=e=>{const t=this.model.packageFilter[e]||"";return r.createElement("input",{type:"text",name:e,defaultValue:t,className:"jp-mod-styled",onInput:this.onFilterInput})};this.onFilterInput=e=>{const t=e.currentTarget;const{name:n,value:i}=t;this.model.packageFilter={...this.model.packageFilter,[n]:i}};this.addClass("jp-Licenses-Filters");this.addClass("jp-RenderedHTMLCommon")}render(){const{trans:e}=this.model;return r.createElement("div",null,r.createElement("label",null,r.createElement("strong",{className:Q},e.__("Filter Licenses By"))),r.createElement("ul",null,r.createElement("li",null,r.createElement("label",null,e.__("Package")),this.renderFilter("name")),r.createElement("li",null,r.createElement("label",null,e.__("Version")),this.renderFilter("versionInfo")),r.createElement("li",null,r.createElement("label",null,e.__("License")),this.renderFilter("licenseId"))),r.createElement("label",null,r.createElement("strong",{className:Q},e.__("Distributions"))))}}e.Filters=s;class a extends o.TabBar.Renderer{constructor(e){super();this.closeIconSelector=".lm-TabBar-tabCloseIcon";this.model=e}renderTab(e){let t=e.title.caption;let n=this.createTabKey(e);let i=this.createTabStyle(e);let s=this.createTabClass(e);let o=this.createTabDataset(e);return X.h.li({key:n,className:s,title:t,style:i,dataset:o},this.renderIcon(e),this.renderLabel(e),this.renderCountBadge(e))}renderCountBadge(e){const t=e.title.label;const{bundles:n}=this.model;const i=this.model.getFilteredPackages((n&&t?n[t].packages:[])||[]);return X.h.label({},`${i.length}`)}}e.BundleTabRenderer=a;class l extends i.VDomRenderer{constructor(e){super(e);this.renderRow=(e,t)=>{const n=t===this.model.currentPackageIndex;const i=()=>this.model.currentPackageIndex=t;return r.createElement("tr",{key:e.name,className:n?"jp-mod-selected":"",onClick:i},r.createElement("td",null,r.createElement("input",{type:"radio",name:"show-package-license",value:t,onChange:i,checked:n})),r.createElement("th",null,e.name),r.createElement("td",null,r.createElement("code",null,e.versionInfo)),r.createElement("td",null,r.createElement("code",null,e.licenseId)))};this.addClass("jp-Licenses-Grid");this.addClass("jp-RenderedHTMLCommon")}render(){var e;const{bundles:t,currentBundleName:n,trans:i}=this.model;const s=this.model.getFilteredPackages(t&&n?((e=t[n])===null||e===void 0?void 0:e.packages)||[]:[]);if(!s.length){return r.createElement("blockquote",null,r.createElement("em",null,i.__("No Packages found")))}return r.createElement("form",null,r.createElement("table",null,r.createElement("thead",null,r.createElement("tr",null,r.createElement("td",null),r.createElement("th",null,i.__("Package")),r.createElement("th",null,i.__("Version")),r.createElement("th",null,i.__("License")))),r.createElement("tbody",null,s.map(this.renderRow))))}}e.Grid=l;class d extends i.VDomRenderer{constructor(e){super(e);this.addClass("jp-Licenses-Text");this.addClass("jp-RenderedHTMLCommon");this.addClass("jp-RenderedMarkdown")}render(){const{currentPackage:e,trans:t}=this.model;let n="";let i=t.__("No Package selected");let s="";if(e){const{name:o,versionInfo:r,licenseId:a,extractedText:l}=e;n=`${o} v${r}`;i=`${t.__("License")}: ${a||t.__("No License ID found")}`;s=l||t.__("No License Text found")}return[r.createElement("h1",{key:"h1"},n),r.createElement("blockquote",{key:"quote"},r.createElement("em",null,i)),r.createElement("code",{key:"code"},s)]}}e.FullText=d})(Z||(Z={}));var ee;(function(e){e.symbol=Symbol("printable");function t(t){if(typeof t!=="object"||!t){return false}return e.symbol in t}e.isPrintable=t;function n(n){if(t(n)){return n[e.symbol]()}return null}e.getPrintFunction=n;function i(e){return o(e.node)}e.printWidget=i;async function s(e){const t=Y.ServerConnection.makeSettings();const n=await(await Y.ServerConnection.makeRequest(e,{},t)).text();return o(n)}e.printURL=s;async function o(e){const t=typeof e==="string";const n=r();const i=window.document.body;i.appendChild(n);if(t){n.srcdoc=e;await l(n)}else{n.src="about:blank";await l(n);a(n,e)}const s=d();c(n.contentWindow);await s;i.removeChild(n)}function r(){const e=window.document.createElement("iframe");e.setAttribute("sandbox","allow-modals allow-same-origin");const t="visibility:hidden;width:0;height:0;position:absolute;z-index:-9999;bottom:0;";e.setAttribute("style",t);e.setAttribute("width","0");e.setAttribute("height","0");return e}function a(e,t){e.contentDocument.body.appendChild(t.cloneNode(true));e.contentDocument.close()}function l(e){return new Promise((t=>{e.onload=()=>t()}))}function d(){return new Promise((e=>{const t=()=>{document.removeEventListener("mousemove",t,true);document.removeEventListener("mousedown",t,true);document.removeEventListener("keydown",t,true);e()};document.addEventListener("mousemove",t,true);document.addEventListener("mousedown",t,true);document.addEventListener("keydown",t,true)}))}function c(e){const t=e.document.execCommand("print",false);if(!t){e.print()}}})(ee||(ee={}));const te=true;class ne extends o.Widget{constructor(e){super(e);this._changeGuard=false;this._spinner=new i.Spinner;this._isRevealed=false;this._evtMouseDown=()=>{if(!this.node.contains(document.activeElement)){this._focusContent()}};this.addClass("jp-MainAreaWidget");this.addClass("jp-MainAreaWidget-ContainStrict");this.id=B.createDomID();const t=(e.translator||s.nullTranslator).load("jupyterlab");const n=this._content=e.content;n.node.setAttribute("role","region");n.node.setAttribute("aria-label",t.__("main area content"));const r=this._toolbar=e.toolbar||new i.ReactiveToolbar({noFocusOnClick:true});r.node.setAttribute("role","toolbar");r.node.setAttribute("aria-label",t.__("main area toolbar"));const a=this._contentHeader=e.contentHeader||new o.BoxPanel({direction:"top-to-bottom",spacing:0});const l=this.layout=new o.BoxLayout({spacing:0});l.direction="top-to-bottom";o.BoxLayout.setStretch(r,0);o.BoxLayout.setStretch(a,0);o.BoxLayout.setStretch(n,1);l.addWidget(r);l.addWidget(a);l.addWidget(n);if(!n.id){n.id=B.createDomID()}n.node.tabIndex=-1;this._updateTitle();n.title.changed.connect(this._updateTitle,this);this.title.closable=true;this.title.changed.connect(this._updateContentTitle,this);if(e.reveal){this.node.appendChild(this._spinner.node);this._revealed=e.reveal.then((()=>{if(n.isDisposed){this.dispose();return}n.disposed.connect((()=>this.dispose()));const e=document.activeElement===this._spinner.node;this._disposeSpinner();this._isRevealed=true;if(e){this._focusContent()}})).catch((e=>{const t=new o.Widget;t.addClass("jp-MainAreaWidget-error");const i=document.createElement("pre");i.textContent=String(e);t.node.appendChild(i);o.BoxLayout.setStretch(t,1);this._disposeSpinner();n.dispose();this._content=null;r.dispose();this._toolbar=null;l.addWidget(t);this._isRevealed=true;throw t}))}else{this._spinner.dispose();this.removeClass("jp-MainAreaWidget-ContainStrict");n.disposed.connect((()=>this.dispose()));this._isRevealed=true;this._revealed=Promise.resolve(undefined)}}[ee.symbol](){if(!this._content){return null}return ee.getPrintFunction(this._content)}get content(){return this._content}get toolbar(){return this._toolbar}get contentHeader(){return this._contentHeader}get isRevealed(){return this._isRevealed}get revealed(){return this._revealed}onActivateRequest(e){if(this._isRevealed){this._focusContent()}else{this._spinner.node.focus()}}onAfterAttach(e){super.onAfterAttach(e);this.node.addEventListener("mousedown",this._evtMouseDown,te)}onBeforeDetach(e){this.node.removeEventListener("mousedown",this._evtMouseDown,te);super.onBeforeDetach(e)}onCloseRequest(e){this.dispose()}onUpdateRequest(e){if(this._content){u.MessageLoop.sendMessage(this._content,e)}}_disposeSpinner(){this.node.removeChild(this._spinner.node);this._spinner.dispose();this.removeClass("jp-MainAreaWidget-ContainStrict")}_updateTitle(){if(this._changeGuard||!this.content){return}this._changeGuard=true;const e=this.content;this.title.label=e.title.label;this.title.mnemonic=e.title.mnemonic;this.title.icon=e.title.icon;this.title.iconClass=e.title.iconClass;this.title.iconLabel=e.title.iconLabel;this.title.caption=e.title.caption;this.title.className=e.title.className;this.title.dataset=e.title.dataset;this._changeGuard=false}_updateContentTitle(){if(this._changeGuard||!this.content){return}this._changeGuard=true;const e=this.content;e.title.label=this.title.label;e.title.mnemonic=this.title.mnemonic;e.title.icon=this.title.icon;e.title.iconClass=this.title.iconClass;e.title.iconLabel=this.title.iconLabel;e.title.caption=this.title.caption;e.title.className=this.title.className;e.title.dataset=this.title.dataset;this._changeGuard=false}_focusContent(){if(!this.content){return}if(!this.content.node.contains(document.activeElement)){this.content.node.focus()}this.content.activate()}}var ie;(function(e){function t(e,t){return e.filter((e=>!e.disabled)).sort(((e,t)=>{var n,i;return((n=e.rank)!==null&&n!==void 0?n:Infinity)-((i=t.rank)!==null&&i!==void 0?i:Infinity)})).map((e=>n(e,t)))}e.createMenus=t;function n(e,t){var n,s;const r=t(e);r.id=e.id;if(!r.title.label){r.title.label=(n=e.label)!==null&&n!==void 0?n:l.Text.titleCase(r.id.trim())}if(e.icon){r.title.icon=i.LabIcon.resolve({icon:e.icon})}if(e.mnemonic!==undefined){r.title.mnemonic=e.mnemonic}(s=e.items)===null||s===void 0?void 0:s.filter((e=>!e.disabled)).sort(((e,t)=>{var n,i;return((n=e.rank)!==null&&n!==void 0?n:Infinity)-((i=t.rank)!==null&&i!==void 0?i:Infinity)})).map((e=>{o(e,r,t)}));return r}function s(e,t,i){const{submenu:s,...o}=e;t.addItem({...o,submenu:s?n(s,i):null})}e.addContextItem=s;function o(e,t,i){const{submenu:s,...o}=e;t.addItem({...o,submenu:s?n(s,i):null})}function r(e,t,i){const s=[];t.forEach((t=>{const o=e.find((e=>e.id===t.id));if(o){a(t,o,i)}else{if(!t.disabled){s.push(n(t,i))}}}));e.push(...s);return s}e.updateMenus=r;function a(e,t,n){var i;if(e.disabled){t.dispose()}else{(i=e.items)===null||i===void 0?void 0:i.forEach((e=>{var i,s;const r=t===null||t===void 0?void 0:t.items.find(((t,n)=>{var i,s,o;return t.type===e.type&&t.command===((i=e.command)!==null&&i!==void 0?i:"")&&((s=t.submenu)===null||s===void 0?void 0:s.id)===((o=e.submenu)===null||o===void 0?void 0:o.id)}));if(r&&e.type!=="separator"){if(e.disabled){t.removeItem(r)}else{switch((i=e.type)!==null&&i!==void 0?i:"command"){case"command":if(e.command){if(!c.JSONExt.deepEqual(r.args,(s=e.args)!==null&&s!==void 0?s:{})){o(e,t,n)}}break;case"submenu":if(e.submenu){a(e.submenu,r.submenu,n)}}}}else{o(e,t,n)}}))}}})(ie||(ie={}));class se{constructor(){this._isDisposed=false;this._queue=[];this._changed=new h.Signal(this)}get changed(){return this._changed}get count(){return this._queue.length}get isDisposed(){return this._isDisposed}get notifications(){return this._queue.slice()}dismiss(e){if(typeof e==="undefined"){const e=this._queue.slice();this._queue.length=0;for(const t of e){this._changed.emit({type:"removed",notification:t})}}else{const t=this._queue.findIndex((t=>t.id===e));if(t>-1){const e=this._queue.splice(t,1)[0];this._changed.emit({type:"removed",notification:e})}}}dispose(){if(this._isDisposed){return}this._isDisposed=true;h.Signal.clearData(this)}has(e){return this._queue.findIndex((t=>t.id===e))>-1}notify(e,t,n){const i=Date.now();const{progress:s,...o}=n;const r=Object.freeze({id:c.UUID.uuid4(),createdAt:i,modifiedAt:i,message:e,type:t,options:{autoClose:0,progress:typeof s==="number"?Math.min(Math.max(0,s),1):s,...o}});this._queue.unshift(r);this._changed.emit({type:"added",notification:r});return r.id}update(e){const{id:t,message:n,actions:i,autoClose:s,data:o,progress:r,type:a}=e;const l=typeof r==="number"?Math.min(Math.max(0,r),1):r;const d=this._queue.findIndex((e=>e.id===t));if(d>-1){const e=this._queue[d];const t=Object.freeze({...e,message:n!==null&&n!==void 0?n:e.message,type:a!==null&&a!==void 0?a:e.type,options:{actions:i!==null&&i!==void 0?i:e.options.actions,autoClose:s!==null&&s!==void 0?s:e.options.autoClose,data:o!==null&&o!==void 0?o:e.options.data,progress:l!==null&&l!==void 0?l:e.options.progress},modifiedAt:Date.now()});this._queue.splice(d,1);this._queue.unshift(t);this._changed.emit({type:"updated",notification:t});return true}return false}}var oe;(function(e){e.manager=new se;function t(t){e.manager.dismiss(t)}e.dismiss=t;function n(t,n="default",i={}){return e.manager.notify(t,n,i)}e.emit=n;function i(t,n={}){return e.manager.notify(t,"error",n)}e.error=i;function s(t,n={}){return e.manager.notify(t,"info",n)}e.info=s;function o(t,n){var i;const{pending:s,error:o,success:r}=n;const a=e.manager.notify(s.message,"in-progress",(i=s.options)!==null&&i!==void 0?i:{});t.then((t=>{var n,i,s;e.manager.update({id:a,message:r.message(t,(n=r.options)===null||n===void 0?void 0:n.data),type:"success",...r.options,data:(s=(i=r.options)===null||i===void 0?void 0:i.data)!==null&&s!==void 0?s:t})})).catch((t=>{var n,i,s;e.manager.update({id:a,message:o.message(t,(n=o.options)===null||n===void 0?void 0:n.data),type:"error",...o.options,data:(s=(i=o.options)===null||i===void 0?void 0:i.data)!==null&&s!==void 0?s:t})}));return a}e.promise=o;function r(t,n={}){return e.manager.notify(t,"success",n)}e.success=r;function a(t){return e.manager.update(t)}e.update=a;function l(t,n={}){return e.manager.notify(t,"warning",n)}e.warning=l})(oe||(oe={}));const re=4;function ae(e){var t,n;const s=(t=e.showKernels)!==null&&t!==void 0?t:true;const o=(n=e.showTerminals)!==null&&n!==void 0?n:e.terminals>0;return a().createElement(C.GroupItem,{tabIndex:0,spacing:re,onClick:e.handleClick,onKeyDown:e.handleKeyDown,style:{cursor:"pointer"}},o?a().createElement(C.GroupItem,{spacing:re},a().createElement(C.TextItem,{source:e.terminals}),a().createElement(i.terminalIcon.react,{verticalAlign:"middle",stylesheet:"statusBar"})):null,s?a().createElement(C.GroupItem,{spacing:re},a().createElement(C.TextItem,{source:e.sessions}),a().createElement(i.kernelIcon.react,{verticalAlign:"middle",stylesheet:"statusBar"})):null)}class le extends i.VDomRenderer{constructor(e){super(new le.Model);this._serviceManager=e.serviceManager;this._handleClick=e.onClick;this._handleKeyDown=e.onKeyDown;this.translator=e.translator||s.nullTranslator;this._showKernels=e.showKernels;this._showTerminals=e.showTerminals;this._trans=this.translator.load("jupyterlab");this._serviceManager.sessions.runningChanged.connect(this._onSessionsRunningChanged,this);this._serviceManager.terminals.runningChanged.connect(this._onTerminalsRunningChanged,this);this.addClass("jp-mod-highlighted")}render(){if(!this.model){return null}const e=this._trans.__("%1 Terminals, %2 Kernel sessions",this.model.terminals,this.model.sessions);this.node.title=e;return a().createElement(ae,{sessions:this.model.sessions,terminals:this.model.terminals,handleClick:this._handleClick,handleKeyDown:this._handleKeyDown,showKernels:this._showKernels,showTerminals:this._showTerminals})}dispose(){super.dispose();this._serviceManager.sessions.runningChanged.disconnect(this._onSessionsRunningChanged,this);this._serviceManager.terminals.runningChanged.disconnect(this._onTerminalsRunningChanged,this)}_onSessionsRunningChanged(e,t){this.model.sessions=t.length}_onTerminalsRunningChanged(e,t){this.model.terminals=t.length}}(function(e){class t extends i.VDomModel{constructor(){super(...arguments);this._terminals=0;this._sessions=0}get sessions(){return this._sessions}set sessions(e){const t=this._sessions;this._sessions=e;if(t!==this._sessions){this.stateChanged.emit(void 0)}}get terminals(){return this._terminals}set terminals(e){const t=this._terminals;this._terminals=e;if(t!==this._terminals){this.stateChanged.emit(void 0)}}}e.Model=t})(le||(le={}));var de=n(74728);var ce=n.n(de);class he{static reg(e){return new RegExp("^"+e+"$","i")}}he.N={integer:`[+-]?[0-9]+`,integer_pos:`[+]?[0-9]+`,integer_zero_ff:`([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])`,number:`[+-]?([0-9]*[.])?[0-9]+(e-?[0-9]*)?`,number_pos:`[+]?([0-9]*[.])?[0-9]+(e-?[0-9]*)?`,number_zero_hundred:`[+]?(([0-9]|[1-9][0-9])([.][0-9]+)?|100)`,number_zero_one:`[+]?(1([.][0]+)?|0?([.][0-9]+)?)`};he.B={angle:`(${he.N.number}(deg|rad|grad|turn)|0)`,frequency:`${he.N.number}(Hz|kHz)`,ident:String.raw`-?([_a-z]|[\xA0-\xFF]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\xA0-\xFF]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*`,len_or_perc:`(0|${he.N.number}(px|em|rem|ex|in|cm|mm|pt|pc|%))`,length:`(${he.N.number}(px|em|rem|ex|in|cm|mm|pt|pc)|0)`,length_pos:`(${he.N.number_pos}(px|em|rem|ex|in|cm|mm|pt|pc)|0)`,percentage:`${he.N.number}%`,percentage_pos:`${he.N.number_pos}%`,percentage_zero_hundred:`${he.N.number_zero_hundred}%`,string:String.raw`(\"([^\n\r\f\\"]|\\\n|\r\n|\r|\f|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*\")|(\'([^\n\r\f\\']|\\\n|\r\n|\r|\f|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*\')`,time:`${he.N.number}(s|ms)`,url:`url\\(.*?\\)`,z_index:`[+-]?[0-9]{1,7}`};he.A={absolute_size:`xx-small|x-small|small|medium|large|x-large|xx-large`,attachment:`scroll|fixed|local`,bg_origin:`border-box|padding-box|content-box`,border_style:`none|hidden|dotted|dashed|solid|double|groove|ridge|inset|outset`,box:`border-box|padding-box|content-box`,display_inside:`auto|block|table|flex|grid`,display_outside:`block-level|inline-level|none|table-row-group|table-header-group|table-footer-group|table-row|table-cell|table-column-group|table-column|table-caption`,ending_shape:`circle|ellipse`,generic_family:`serif|sans-serif|cursive|fantasy|monospace`,generic_voice:`male|female|child`,relative_size:`smaller|larger`,repeat_style:`repeat-x|repeat-y|((?:repeat|space|round|no-repeat)(?:\\s*(?:repeat|space|round|no-repeat))?)`,side_or_corner:`(left|right)?\\s*(top|bottom)?`,single_animation_direction:`normal|reverse|alternate|alternate-reverse`,single_animation_fill_mode:`none|forwards|backwards|both`,single_animation_play_state:`running|paused`};he._COLOR={hex:`\\#(0x)?[0-9a-f]+`,name:`aliceblue|antiquewhite|aqua|aquamarine|azure|beige|bisque|black|blanchedalmond|blue|blueviolet|brown|burlywood|cadetblue|chartreuse|chocolate|coral|cornflowerblue|cornsilk|crimson|cyan|darkblue|darkcyan|darkgoldenrod|darkgray|darkgreen|darkkhaki|darkmagenta|darkolivegreen|darkorange|darkorchid|darkred|darksalmon|darkseagreen|darkslateblue|darkslategray|darkturquoise|darkviolet|deeppink|deepskyblue|dimgray|dodgerblue|firebrick|floralwhite|forestgreen|fuchsia|gainsboro|ghostwhite|gold|goldenrod|gray|green|greenyellow|honeydew|hotpink|indianred|indigo|ivory|khaki|lavender|lavenderblush|lawngreen|lemonchiffon|lightblue|lightcoral|lightcyan|lightgoldenrodyellow|lightgreen|lightgrey|lightpink|lightsalmon|lightseagreen|lightskyblue|lightslategray|lightsteelblue|lightyellow|lime|limegreen|linen|magenta|maroon|mediumaquamarine|mediumblue|mediumorchid|mediumpurple|mediumseagreen|mediumslateblue|mediumspringgreen|mediumturquoise|mediumvioletred|midnightblue|mintcream|mistyrose|moccasin|navajowhite|navy|oldlace|olive|olivedrab|orange|orangered|orchid|palegoldenrod|palegreen|paleturquoise|palevioletred|papayawhip|peachpuff|peru|pink|plum|powderblue|purple|red|rosybrown|royalblue|saddlebrown|salmon|sandybrown|seagreen|seashell|sienna|silver|skyblue|slateblue|slategray|snow|springgreen|steelblue|tan|teal|thistle|tomato|turquoise|transparent|violet|wheat|white|whitesmoke|yellow|yellowgreen`,rgb:String.raw`rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)`,rgba:String.raw`rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(${he.N.integer_zero_ff}|${he.N.number_zero_one}|${he.B.percentage_zero_hundred})\s*\)`};he._C={alpha:`${he.N.integer_zero_ff}|${he.N.number_zero_one}|${he.B.percentage_zero_hundred}`,alphavalue:he.N.number_zero_one,bg_position:`((${he.B.len_or_perc}|left|center|right|top|bottom)\\s*){1,4}`,bg_size:`(${he.B.length_pos}|${he.B.percentage}|auto){1,2}|cover|contain`,border_width:`thin|medium|thick|${he.B.length}`,bottom:`${he.B.length}|auto`,color:`${he._COLOR.hex}|${he._COLOR.rgb}|${he._COLOR.rgba}|${he._COLOR.name}`,color_stop_length:`(${he.B.len_or_perc}\\s*){1,2}`,linear_color_hint:`${he.B.len_or_perc}`,family_name:`${he.B.string}|(${he.B.ident}\\s*)+`,image_decl:he.B.url,left:`${he.B.length}|auto`,loose_quotable_words:`(${he.B.ident})+`,margin_width:`${he.B.len_or_perc}|auto`,padding_width:`${he.B.length_pos}|${he.B.percentage_pos}`,page_url:he.B.url,position:`((${he.B.len_or_perc}|left|center|right|top|bottom)\\s*){1,4}`,right:`${he.B.length}|auto`,shadow:"",size:`closest-side|farthest-side|closest-corner|farthest-corner|${he.B.length}|(${he.B.len_or_perc})\\s+(${he.B.len_or_perc})`,top:`${he.B.length}|auto`};he._C1={image_list:`image\\(\\s*(${he.B.url})*\\s*(${he.B.url}|${he._C.color})\\s*\\)`,linear_color_stop:`(${he._C.color})(\\s*${he._C.color_stop_length})?`,shadow:`((${he._C.color})\\s+((${he.B.length})\\s*){2,4}(s+inset)?)|((inset\\s+)?((${he.B.length})\\s*){2,4}\\s*(${he._C.color})?)`};he._C2={color_stop_list:`((${he._C1.linear_color_stop})(\\s*(${he._C.linear_color_hint}))?\\s*,\\s*)+(${he._C1.linear_color_stop})`,shape:`rect\\(\\s*(${he._C.top})\\s*,\\s*(${he._C.right})\\s*,\\s*(${he._C.bottom})\\s*,\\s*(${he._C.left})\\s*\\)`};he._C3={linear_gradient:`linear-gradient\\((((${he.B.angle})|to\\s+(${he.A.side_or_corner}))\\s*,\\s*)?\\s*(${he._C2.color_stop_list})\\s*\\)`,radial_gradient:`radial-gradient\\(((((${he.A.ending_shape})|(${he._C.size}))\\s*)*\\s*(at\\s+${he._C.position})?\\s*,\\s*)?\\s*(${he._C2.color_stop_list})\\s*\\)`};he._C4={image:`${he.B.url}|${he._C3.linear_gradient}|${he._C3.radial_gradient}|${he._C1.image_list}`,bg_image:`(${he.B.url}|${he._C3.linear_gradient}|${he._C3.radial_gradient}|${he._C1.image_list})|none`};he.C={...he._C,...he._C1,...he._C2,...he._C3,...he._C4};he.AP={border_collapse:`collapse|separate`,box:`normal|none|contents`,box_sizing:`content-box|padding-box|border-box`,caption_side:`top|bottom`,clear:`none|left|right|both`,direction:`ltr|rtl`,empty_cells:`show|hide`,float:`left|right|none`,font_stretch:`normal|wider|narrower|ultra-condensed|extra-condensed|condensed|semi-condensed|semi-expanded|expanded|extra-expanded|ultra-expanded`,font_style:`normal|italic|oblique`,font_variant:`normal|small-caps`,font_weight:`normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900`,list_style_position:`inside|outside`,list_style_type:`disc|circle|square|decimal|decimal-leading-zero|lower-roman|upper-roman|lower-greek|lower-latin|upper-latin|armenian|georgian|lower-alpha|upper-alpha|none`,overflow:`visible|hidden|scroll|auto`,overflow_wrap:`normal|break-word`,overflow_x:`visible|hidden|scroll|auto|no-display|no-content`,page_break_after:`auto|always|avoid|left|right`,page_break_before:`auto|always|avoid|left|right`,page_break_inside:`avoid|auto`,position:`static|relative|absolute`,resize:`none|both|horizontal|vertical`,speak:`normal|none|spell-out`,speak_header:`once|always`,speak_numeral:`digits|continuous`,speak_punctuation:`code|none`,table_layout:`auto|fixed`,text_align:`left|right|center|justify`,text_decoration:`none|((underline|overline|line-through|blink)\\s*)+`,text_transform:`capitalize|uppercase|lowercase|none`,text_wrap:`normal|unrestricted|none|suppress`,unicode_bidi:`normal|embed|bidi-override`,visibility:`visible|hidden|collapse`,white_space:`normal|pre|nowrap|pre-wrap|pre-line`,word_break:`normal|keep-all|break-all`};he._CP={background_attachment:`${he.A.attachment}(,\\s*${he.A.attachment})*`,background_color:he.C.color,background_origin:`${he.A.box}(,\\s*${he.A.box})*`,background_repeat:`${he.A.repeat_style}(,\\s*${he.A.repeat_style})*`,border:`((${he.C.border_width}|${he.A.border_style}|${he.C.color})\\s*){1,3}`,border_radius:`((${he.B.len_or_perc})\\s*){1,4}(\\/\\s*((${he.B.len_or_perc})\\s*){1,4})?`,border_spacing:`${he.B.length}\\s*(${he.B.length})?`,border_top_color:he.C.color,border_top_style:he.A.border_style,border_width:`((${he.C.border_width})\\s*){1,4}`,color:he.C.color,cursor:`(${he.B.url}(\\s*,\\s*)?)*(auto|crosshair|default|pointer|move|e-resize|ne-resize|nw-resize|n-resize|se-resize|sw-resize|s-resize|w-resize|text|wait|help|progress|all-scroll|col-resize|hand|no-drop|not-allowed|row-resize|vertical-text)`,display:`inline|block|list-item|run-in|inline-list-item|inline-block|table|inline-table|table-cell|table-caption|flex|inline-flex|grid|inline-grid|${he.A.display_inside}|${he.A.display_outside}|inherit|inline-box|inline-stack`,display_outside:he.A.display_outside,elevation:`${he.B.angle}|below|level|above|higher|lower`,font_family:`(${he.C.family_name}|${he.A.generic_family})(,\\s*(${he.C.family_name}|${he.A.generic_family}))*`,height:`${he.B.length}|${he.B.percentage}|auto`,letter_spacing:`normal|${he.B.length}`,list_style_image:`${he.C.image}|none`,margin_right:he.C.margin_width,max_height:`${he.B.length_pos}|${he.B.percentage_pos}|none|auto`,min_height:`${he.B.length_pos}|${he.B.percentage_pos}|auto`,opacity:he.C.alphavalue,outline_color:`${he.C.color}|invert`,outline_width:he.C.border_width,padding:`((${he.C.padding_width})\\s*){1,4}`,padding_top:he.C.padding_width,pitch_range:he.N.number,right:`${he.B.length}|${he.B.percentage}|auto`,stress:he.N.number,text_indent:`${he.B.length}|${he.B.percentage}`,text_shadow:`none|${he.C.shadow}(,\\s*(${he.C.shadow}))*`,volume:`${he.N.number_pos}|${he.B.percentage_pos}|silent|x-soft|soft|medium|loud|x-loud`,word_wrap:he.AP.overflow_wrap,zoom:`normal|${he.N.number_pos}|${he.B.percentage_pos}`,backface_visibility:he.AP.visibility,background_clip:`${he.A.box}(,\\s*(${he.A.box}))*`,background_position:`${he.C.bg_position}(,\\s*(${he.C.bg_position}))*`,border_bottom_color:he.C.color,border_bottom_style:he.A.border_style,border_color:`((${he.C.color})\\s*){1,4}`,border_left_color:he.C.color,border_right_color:he.C.color,border_style:`((${he.A.border_style})\\s*){1,4}`,border_top_left_radius:`(${he.B.length}|${he.B.percentage})(\\s*(${he.B.length}|${he.B.percentage}))?`,border_top_width:he.C.border_width,box_shadow:`none|${he.C.shadow}(,\\s*(${he.C.shadow}))*`,clip:`${he.C.shape}|auto`,display_inside:he.A.display_inside,font_size:`${he.A.absolute_size}|${he.A.relative_size}|${he.B.length_pos}|${he.B.percentage_pos}`,line_height:`normal|${he.N.number_pos}|${he.B.length_pos}|${he.B.percentage_pos}`,margin_left:he.C.margin_width,max_width:`${he.B.length_pos}|${he.B.percentage_pos}|none|auto`,outline_style:he.A.border_style,padding_bottom:he.C.padding_width,padding_right:he.C.padding_width,perspective:`none|${he.B.length}`,richness:he.N.number,text_overflow:`((clip|ellipsis|${he.B.string})\\s*){1,2}`,top:`${he.B.length}|${he.B.percentage}|auto`,width:`${he.B.length_pos}|${he.B.percentage_pos}|auto`,z_index:`auto|${he.B.z_index}`,background:`(((${he.C.bg_position}\\s*(\\/\\s*${he.C.bg_size})?)|(${he.A.repeat_style})|(${he.A.attachment})|(${he.A.bg_origin})|(${he.C.bg_image})|(${he.C.color}))\\s*)+`,background_size:`${he.C.bg_size}(,\\s*${he.C.bg_size})*`,border_bottom_left_radius:`(${he.B.length}|${he.B.percentage})(\\s*(${he.B.length}|${he.B.percentage}))?`,border_bottom_width:he.C.border_width,border_left_style:he.A.border_style,border_right_style:he.A.border_style,border_top:`((${he.C.border_width}|${he.A.border_style}|${he.C.color})\\s*){1,3}`,bottom:`${he.B.len_or_perc}|auto`,list_style:`((${he.AP.list_style_type}|${he.AP.list_style_position}|${he.C.image}|none})\\s*){1,3}`,margin_top:he.C.margin_width,outline:`((${he.C.color}|invert|${he.A.border_style}|${he.C.border_width})\\s*){1,3}`,overflow_y:he.AP.overflow_x,pitch:`${he.B.frequency}|x-low|low|medium|high|x-high`,vertical_align:`baseline|sub|super|top|text-top|middle|bottom|text-bottom|${he.B.len_or_perc}`,word_spacing:`normal|${he.B.length}`,background_image:`${he.C.bg_image}(,\\s*${he.C.bg_image})*`,border_bottom_right_radius:`(${he.B.length}|${he.B.percentage})(\\s*(${he.B.length}|${he.B.percentage}))?`,border_left_width:he.C.border_width,border_right_width:he.C.border_width,left:`${he.B.len_or_perc}|auto`,margin_bottom:he.C.margin_width,pause_after:`${he.B.time}|${he.B.percentage}`,speech_rate:`${he.N.number}|x-slow|slow|medium|fast|x-fast|faster|slower`,transition_duration:`${he.B.time}(,\\s*${he.B.time})*`,border_bottom:`((${he.C.border_width}|${he.A.border_style}|${he.C.color})\\s*){1,3}`,border_right:`((${he.C.border_width}|${he.A.border_style}|${he.C.color})\\s*){1,3}`,margin:`((${he.C.margin_width})\\s*){1,4}`,padding_left:he.C.padding_width,border_left:`((${he.C.border_width}|${he.A.border_style}|${he.C.color})\\s*){1,3}`,quotes:`(${he.B.string}\\s*${he.B.string})+|none`,border_top_right_radius:`(${he.B.length}|${he.B.percentage})(\\s*(${he.B.length}|${he.B.percentage}))?`,min_width:`${he.B.length_pos}|${he.B.percentage_pos}|auto`};he._CP1={font:`(((((${he.AP.font_style}|${he.AP.font_variant}|${he.AP.font_weight})\\s*){1,3})?\\s*(${he._CP.font_size})\\s*(\\/\\s*(${he._CP.line_height}))?\\s+(${he._CP.font_family}))|caption|icon|menu|message-box|small-caption|status-bar)`};he.CP={...he._CP,...he._CP1};he.BORDER_COLLAPSE=he.reg(he.AP.border_collapse);he.BOX=he.reg(he.AP.box);he.BOX_SIZING=he.reg(he.AP.box_sizing);he.CAPTION_SIDE=he.reg(he.AP.caption_side);he.CLEAR=he.reg(he.AP.clear);he.DIRECTION=he.reg(he.AP.direction);he.EMPTY_CELLS=he.reg(he.AP.empty_cells);he.FLOAT=he.reg(he.AP.float);he.FONT_STRETCH=he.reg(he.AP.font_stretch);he.FONT_STYLE=he.reg(he.AP.font_style);he.FONT_VARIANT=he.reg(he.AP.font_variant);he.FONT_WEIGHT=he.reg(he.AP.font_weight);he.LIST_STYLE_POSITION=he.reg(he.AP.list_style_position);he.LIST_STYLE_TYPE=he.reg(he.AP.list_style_type);he.OVERFLOW=he.reg(he.AP.overflow);he.OVERFLOW_WRAP=he.reg(he.AP.overflow_wrap);he.OVERFLOW_X=he.reg(he.AP.overflow_x);he.PAGE_BREAK_AFTER=he.reg(he.AP.page_break_after);he.PAGE_BREAK_BEFORE=he.reg(he.AP.page_break_before);he.PAGE_BREAK_INSIDE=he.reg(he.AP.page_break_inside);he.POSITION=he.reg(he.AP.position);he.RESIZE=he.reg(he.AP.resize);he.SPEAK=he.reg(he.AP.speak);he.SPEAK_HEADER=he.reg(he.AP.speak_header);he.SPEAK_NUMERAL=he.reg(he.AP.speak_numeral);he.SPEAK_PUNCTUATION=he.reg(he.AP.speak_punctuation);he.TABLE_LAYOUT=he.reg(he.AP.table_layout);he.TEXT_ALIGN=he.reg(he.AP.text_align);he.TEXT_DECORATION=he.reg(he.AP.text_decoration);he.TEXT_TRANSFORM=he.reg(he.AP.text_transform);he.TEXT_WRAP=he.reg(he.AP.text_wrap);he.UNICODE_BIDI=he.reg(he.AP.unicode_bidi);he.VISIBILITY=he.reg(he.AP.visibility);he.WHITE_SPACE=he.reg(he.AP.white_space);he.WORD_BREAK=he.reg(he.AP.word_break);he.BACKGROUND_ATTACHMENT=he.reg(he.CP.background_attachment);he.BACKGROUND_COLOR=he.reg(he.CP.background_color);he.BACKGROUND_ORIGIN=he.reg(he.CP.background_origin);he.BACKGROUND_REPEAT=he.reg(he.CP.background_repeat);he.BORDER=he.reg(he.CP.border);he.BORDER_RADIUS=he.reg(he.CP.border_radius);he.BORDER_SPACING=he.reg(he.CP.border_spacing);he.BORDER_TOP_COLOR=he.reg(he.CP.border_top_color);he.BORDER_TOP_STYLE=he.reg(he.CP.border_top_style);he.BORDER_WIDTH=he.reg(he.CP.border_width);he.COLOR=he.reg(he.CP.color);he.CURSOR=he.reg(he.CP.cursor);he.DISPLAY=he.reg(he.CP.display);he.DISPLAY_OUTSIDE=he.reg(he.CP.display_outside);he.ELEVATION=he.reg(he.CP.elevation);he.FONT_FAMILY=he.reg(he.CP.font_family);he.HEIGHT=he.reg(he.CP.height);he.LETTER_SPACING=he.reg(he.CP.letter_spacing);he.LIST_STYLE_IMAGE=he.reg(he.CP.list_style_image);he.MARGIN_RIGHT=he.reg(he.CP.margin_right);he.MAX_HEIGHT=he.reg(he.CP.max_height);he.MIN_HEIGHT=he.reg(he.CP.min_height);he.OPACITY=he.reg(he.CP.opacity);he.OUTLINE_COLOR=he.reg(he.CP.outline_color);he.OUTLINE_WIDTH=he.reg(he.CP.outline_width);he.PADDING=he.reg(he.CP.padding);he.PADDING_TOP=he.reg(he.CP.padding_top);he.PITCH_RANGE=he.reg(he.CP.pitch_range);he.RIGHT=he.reg(he.CP.right);he.STRESS=he.reg(he.CP.stress);he.TEXT_INDENT=he.reg(he.CP.text_indent);he.TEXT_SHADOW=he.reg(he.CP.text_shadow);he.VOLUME=he.reg(he.CP.volume);he.WORD_WRAP=he.reg(he.CP.word_wrap);he.ZOOM=he.reg(he.CP.zoom);he.BACKFACE_VISIBILITY=he.reg(he.CP.backface_visibility);he.BACKGROUND_CLIP=he.reg(he.CP.background_clip);he.BACKGROUND_POSITION=he.reg(he.CP.background_position);he.BORDER_BOTTOM_COLOR=he.reg(he.CP.border_bottom_color);he.BORDER_BOTTOM_STYLE=he.reg(he.CP.border_bottom_style);he.BORDER_COLOR=he.reg(he.CP.border_color);he.BORDER_LEFT_COLOR=he.reg(he.CP.border_left_color);he.BORDER_RIGHT_COLOR=he.reg(he.CP.border_right_color);he.BORDER_STYLE=he.reg(he.CP.border_style);he.BORDER_TOP_LEFT_RADIUS=he.reg(he.CP.border_top_left_radius);he.BORDER_TOP_WIDTH=he.reg(he.CP.border_top_width);he.BOX_SHADOW=he.reg(he.CP.box_shadow);he.CLIP=he.reg(he.CP.clip);he.DISPLAY_INSIDE=he.reg(he.CP.display_inside);he.FONT_SIZE=he.reg(he.CP.font_size);he.LINE_HEIGHT=he.reg(he.CP.line_height);he.MARGIN_LEFT=he.reg(he.CP.margin_left);he.MAX_WIDTH=he.reg(he.CP.max_width);he.OUTLINE_STYLE=he.reg(he.CP.outline_style);he.PADDING_BOTTOM=he.reg(he.CP.padding_bottom);he.PADDING_RIGHT=he.reg(he.CP.padding_right);he.PERSPECTIVE=he.reg(he.CP.perspective);he.RICHNESS=he.reg(he.CP.richness);he.TEXT_OVERFLOW=he.reg(he.CP.text_overflow);he.TOP=he.reg(he.CP.top);he.WIDTH=he.reg(he.CP.width);he.Z_INDEX=he.reg(he.CP.z_index);he.BACKGROUND=he.reg(he.CP.background);he.BACKGROUND_SIZE=he.reg(he.CP.background_size);he.BORDER_BOTTOM_LEFT_RADIUS=he.reg(he.CP.border_bottom_left_radius);he.BORDER_BOTTOM_WIDTH=he.reg(he.CP.border_bottom_width);he.BORDER_LEFT_STYLE=he.reg(he.CP.border_left_style);he.BORDER_RIGHT_STYLE=he.reg(he.CP.border_right_style);he.BORDER_TOP=he.reg(he.CP.border_top);he.BOTTOM=he.reg(he.CP.bottom);he.LIST_STYLE=he.reg(he.CP.list_style);he.MARGIN_TOP=he.reg(he.CP.margin_top);he.OUTLINE=he.reg(he.CP.outline);he.OVERFLOW_Y=he.reg(he.CP.overflow_y);he.PITCH=he.reg(he.CP.pitch);he.VERTICAL_ALIGN=he.reg(he.CP.vertical_align);he.WORD_SPACING=he.reg(he.CP.word_spacing);he.BACKGROUND_IMAGE=he.reg(he.CP.background_image);he.BORDER_BOTTOM_RIGHT_RADIUS=he.reg(he.CP.border_bottom_right_radius);he.BORDER_LEFT_WIDTH=he.reg(he.CP.border_left_width);he.BORDER_RIGHT_WIDTH=he.reg(he.CP.border_right_width);he.LEFT=he.reg(he.CP.left);he.MARGIN_BOTTOM=he.reg(he.CP.margin_bottom);he.PAUSE_AFTER=he.reg(he.CP.pause_after);he.SPEECH_RATE=he.reg(he.CP.speech_rate);he.TRANSITION_DURATION=he.reg(he.CP.transition_duration);he.BORDER_BOTTOM=he.reg(he.CP.border_bottom);he.BORDER_RIGHT=he.reg(he.CP.border_right);he.MARGIN=he.reg(he.CP.margin);he.PADDING_LEFT=he.reg(he.CP.padding_left);he.BORDER_LEFT=he.reg(he.CP.border_left);he.FONT=he.reg(he.CP.font);he.QUOTES=he.reg(he.CP.quotes);he.BORDER_TOP_RIGHT_RADIUS=he.reg(he.CP.border_top_right_radius);he.MIN_WIDTH=he.reg(he.CP.min_width);class ue{constructor(){this._autolink=true;this._allowNamedProperties=false;this._generateOptions=()=>({allowedTags:["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blockquote","br","button","canvas","caption","center","cite","code","col","colgroup","colspan","command","data","datalist","dd","del","details","dfn","dir","div","dl","dt","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","i","img","input","ins","kbd","label","legend","li","map","mark","menu","meter","nav","nobr","ol","optgroup","option","output","p","pre","progress","q","rowspan","s","samp","section","select","small","source","span","strike","strong","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"],allowedAttributes:{"*":["class","dir","draggable","hidden",...this._allowNamedProperties?["id"]:[],"inert","itemprop","itemref","itemscope","lang","spellcheck","style","title","translate"],a:["accesskey","coords","href","hreflang",...this._allowNamedProperties?["name"]:[],"rel","shape","tabindex","target","type"],area:["accesskey","alt","coords","href","nohref","shape","tabindex"],audio:["autoplay","controls","loop","mediagroup","muted","preload","src"],bdo:["dir"],blockquote:["cite"],br:["clear"],button:["accesskey","data-commandlinker-args","data-commandlinker-command","disabled",...this._allowNamedProperties?["name"]:[],"tabindex","type","value"],canvas:["height","width"],caption:["align"],col:["align","char","charoff","span","valign","width"],colgroup:["align","char","charoff","span","valign","width"],command:["checked","command","disabled","icon","label","radiogroup","type"],data:["value"],del:["cite","datetime"],details:["open"],dir:["compact"],div:["align"],dl:["compact"],fieldset:["disabled"],font:["color","face","size"],form:["accept","autocomplete","enctype","method",...this._allowNamedProperties?["name"]:[],"novalidate"],h1:["align"],h2:["align"],h3:["align"],h4:["align"],h5:["align"],h6:["align"],hr:["align","noshade","size","width"],iframe:["align","frameborder","height","marginheight","marginwidth","width"],img:["align","alt","border","height","hspace","ismap",...this._allowNamedProperties?["name"]:[],"src","usemap","vspace","width"],input:["accept","accesskey","align","alt","autocomplete","checked","disabled","inputmode","ismap","list","max","maxlength","min","multiple",...this._allowNamedProperties?["name"]:[],"placeholder","readonly","required","size","src","step","tabindex","type","usemap","value"],ins:["cite","datetime"],label:["accesskey","for"],legend:["accesskey","align"],li:["type","value"],map:this._allowNamedProperties?["name"]:[],menu:["compact","label","type"],meter:["high","low","max","min","value"],ol:["compact","reversed","start","type"],optgroup:["disabled","label"],option:["disabled","label","selected","value"],output:["for",...this._allowNamedProperties?["name"]:[]],p:["align"],pre:["width"],progress:["max","min","value"],q:["cite"],select:["autocomplete","disabled","multiple",...this._allowNamedProperties?["name"]:[],"required","size","tabindex"],source:["type"],table:["align","bgcolor","border","cellpadding","cellspacing","frame","rules","summary","width"],tbody:["align","char","charoff","valign"],td:["abbr","align","axis","bgcolor","char","charoff","colspan","headers","height","nowrap","rowspan","scope","valign","width"],textarea:["accesskey","autocomplete","cols","disabled","inputmode",...this._allowNamedProperties?["name"]:[],"placeholder","readonly","required","rows","tabindex","wrap"],tfoot:["align","char","charoff","valign"],th:["abbr","align","axis","bgcolor","char","charoff","colspan","headers","height","nowrap","rowspan","scope","valign","width"],thead:["align","char","charoff","valign"],tr:["align","bgcolor","char","charoff","valign"],track:["default","kind","label","srclang"],ul:["compact","type"],video:["autoplay","controls","height","loop","mediagroup","muted","poster","preload","src","width"]},allowedStyles:{"*":{"backface-visibility":[he.BACKFACE_VISIBILITY],background:[he.BACKGROUND],"background-attachment":[he.BACKGROUND_ATTACHMENT],"background-clip":[he.BACKGROUND_CLIP],"background-color":[he.BACKGROUND_COLOR],"background-image":[he.BACKGROUND_IMAGE],"background-origin":[he.BACKGROUND_ORIGIN],"background-position":[he.BACKGROUND_POSITION],"background-repeat":[he.BACKGROUND_REPEAT],"background-size":[he.BACKGROUND_SIZE],border:[he.BORDER],"border-bottom":[he.BORDER_BOTTOM],"border-bottom-color":[he.BORDER_BOTTOM_COLOR],"border-bottom-left-radius":[he.BORDER_BOTTOM_LEFT_RADIUS],"border-bottom-right-radius":[he.BORDER_BOTTOM_RIGHT_RADIUS],"border-bottom-style":[he.BORDER_BOTTOM_STYLE],"border-bottom-width":[he.BORDER_BOTTOM_WIDTH],"border-collapse":[he.BORDER_COLLAPSE],"border-color":[he.BORDER_COLOR],"border-left":[he.BORDER_LEFT],"border-left-color":[he.BORDER_LEFT_COLOR],"border-left-style":[he.BORDER_LEFT_STYLE],"border-left-width":[he.BORDER_LEFT_WIDTH],"border-radius":[he.BORDER_RADIUS],"border-right":[he.BORDER_RIGHT],"border-right-color":[he.BORDER_RIGHT_COLOR],"border-right-style":[he.BORDER_RIGHT_STYLE],"border-right-width":[he.BORDER_RIGHT_WIDTH],"border-spacing":[he.BORDER_SPACING],"border-style":[he.BORDER_STYLE],"border-top":[he.BORDER_TOP],"border-top-color":[he.BORDER_TOP_COLOR],"border-top-left-radius":[he.BORDER_TOP_LEFT_RADIUS],"border-top-right-radius":[he.BORDER_TOP_RIGHT_RADIUS],"border-top-style":[he.BORDER_TOP_STYLE],"border-top-width":[he.BORDER_TOP_WIDTH],"border-width":[he.BORDER_WIDTH],bottom:[he.BOTTOM],box:[he.BOX],"box-shadow":[he.BOX_SHADOW],"box-sizing":[he.BOX_SIZING],"caption-side":[he.CAPTION_SIDE],clear:[he.CLEAR],clip:[he.CLIP],color:[he.COLOR],cursor:[he.CURSOR],direction:[he.DIRECTION],display:[he.DISPLAY],"display-inside":[he.DISPLAY_INSIDE],"display-outside":[he.DISPLAY_OUTSIDE],elevation:[he.ELEVATION],"empty-cells":[he.EMPTY_CELLS],float:[he.FLOAT],font:[he.FONT],"font-family":[he.FONT_FAMILY],"font-size":[he.FONT_SIZE],"font-stretch":[he.FONT_STRETCH],"font-style":[he.FONT_STYLE],"font-variant":[he.FONT_VARIANT],"font-weight":[he.FONT_WEIGHT],height:[he.HEIGHT],left:[he.LEFT],"letter-spacing":[he.LETTER_SPACING],"line-height":[he.LINE_HEIGHT],"list-style":[he.LIST_STYLE],"list-style-image":[he.LIST_STYLE_IMAGE],"list-style-position":[he.LIST_STYLE_POSITION],"list-style-type":[he.LIST_STYLE_TYPE],margin:[he.MARGIN],"margin-bottom":[he.MARGIN_BOTTOM],"margin-left":[he.MARGIN_LEFT],"margin-right":[he.MARGIN_RIGHT],"margin-top":[he.MARGIN_TOP],"max-height":[he.MAX_HEIGHT],"max-width":[he.MAX_WIDTH],"min-height":[he.MIN_HEIGHT],"min-width":[he.MIN_WIDTH],opacity:[he.OPACITY],outline:[he.OUTLINE],"outline-color":[he.OUTLINE_COLOR],"outline-style":[he.OUTLINE_STYLE],"outline-width":[he.OUTLINE_WIDTH],overflow:[he.OVERFLOW],"overflow-wrap":[he.OVERFLOW_WRAP],"overflow-x":[he.OVERFLOW_X],"overflow-y":[he.OVERFLOW_Y],padding:[he.PADDING],"padding-bottom":[he.PADDING_BOTTOM],"padding-left":[he.PADDING_LEFT],"padding-right":[he.PADDING_RIGHT],"padding-top":[he.PADDING_TOP],"page-break-after":[he.PAGE_BREAK_AFTER],"page-break-before":[he.PAGE_BREAK_BEFORE],"page-break-inside":[he.PAGE_BREAK_INSIDE],"pause-after":[he.PAUSE_AFTER],perspective:[he.PERSPECTIVE],pitch:[he.PITCH],"pitch-range":[he.PITCH_RANGE],position:[he.POSITION],quotes:[he.QUOTES],resize:[he.RESIZE],richness:[he.RICHNESS],right:[he.RIGHT],speak:[he.SPEAK],"speak-header":[he.SPEAK_HEADER],"speak-numeral":[he.SPEAK_NUMERAL],"speak-punctuation":[he.SPEAK_PUNCTUATION],"speech-rate":[he.SPEECH_RATE],stress:[he.STRESS],"table-layout":[he.TABLE_LAYOUT],"text-align":[he.TEXT_ALIGN],"text-decoration":[he.TEXT_DECORATION],"text-indent":[he.TEXT_INDENT],"text-overflow":[he.TEXT_OVERFLOW],"text-shadow":[he.TEXT_SHADOW],"text-transform":[he.TEXT_TRANSFORM],"text-wrap":[he.TEXT_WRAP],top:[he.TOP],"unicode-bidi":[he.UNICODE_BIDI],"vertical-align":[he.VERTICAL_ALIGN],visibility:[he.VISIBILITY],volume:[he.VOLUME],"white-space":[he.WHITE_SPACE],width:[he.WIDTH],"word-break":[he.WORD_BREAK],"word-spacing":[he.WORD_SPACING],"word-wrap":[he.WORD_WRAP],"z-index":[he.Z_INDEX],zoom:[he.ZOOM]}},transformTags:{a:ce().simpleTransform("a",{rel:"nofollow"}),input:ce().simpleTransform("input",{disabled:"disabled"})},allowedSchemes:[...ce().defaults.allowedSchemes],allowedSchemesByTag:{img:ce().defaults.allowedSchemes.concat(["attachment"])},allowedSchemesAppliedToAttributes:["href","cite"]});this._options=this._generateOptions()}sanitize(e,t){return ce()(e,{...this._options,...t||{}})}getAutolink(){return this._autolink}setAllowedSchemes(e){this._options.allowedSchemes=[...e]}setAutolink(e){this._autolink=e}setAllowNamedProperties(e){this._allowNamedProperties=e;this._options=this._generateOptions()}}class pe{constructor(){this._commands=new Array}get ids(){return this._commands.map((e=>e.id))}add(e){if(this._commands.map((e=>e.id)).includes(e.id)){throw Error(`Command ${e.id} is already defined.`)}this._commands.push({isEnabled:()=>true,rank:pe.DEFAULT_RANK,...e})}getActiveCommandId(e){var t;const n=this._commands.filter((t=>t.isEnabled(e))).sort(((e,t)=>{const n=e.rank-t.rank;return n||(e.id<t.id?-1:1)}));const i=(t=n[0])!==null&&t!==void 0?t:{id:null};return i.id}remove(e){const t=this._commands.findIndex((t=>t.id===e));if(t>=0){this._commands.splice(t,1)}}}pe.DEFAULT_RANK=500;pe.WIDGET="semanticWidget";var me=n(90044);const ge=75;const fe=20;class ve{constructor(e){this._current=null;this._links=[];this._overrides={};this._overrideProps={};this._outstanding=null;this._pending=0;this._requests={};this._themes={};this._themeChanged=new h.Signal(this);const{host:t,key:n,splash:i,url:o}=e;this.translator=e.translator||s.nullTranslator;this._trans=this.translator.load("jupyterlab");const r=e.settings;this._base=o;this._host=t;this._splash=i||null;void r.load(n).then((e=>{this._settings=e;this._initOverrideProps();this._settings.changed.connect(this._loadSettings,this);this._loadSettings()}))}get theme(){return this._current}get preferredLightTheme(){return this._settings.composite["preferred-light-theme"]}get preferredDarkTheme(){return this._settings.composite["preferred-dark-theme"]}get preferredTheme(){if(!this.isToggledAdaptiveTheme()){return this.theme}if(this.isSystemColorSchemeDark()){return this.preferredDarkTheme}return this.preferredLightTheme}get themes(){return Object.keys(this._themes)}get lightThemes(){return Object.entries(this._themes).filter((([e,t])=>t.isLight)).map((([e,t])=>e))}get darkThemes(){return Object.entries(this._themes).filter((([e,t])=>!t.isLight)).map((([e,t])=>e))}get themeChanged(){return this._themeChanged}isSystemColorSchemeDark(){return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches}getCSS(e){var t;return(t=this._overrides[e])!==null&&t!==void 0?t:getComputedStyle(document.documentElement).getPropertyValue(`--jp-${e}`)}loadCSS(e){const t=this._base;const n=l.URLExt.isLocal(e)?l.URLExt.join(t,e):e;const i=this._links;return new Promise(((e,t)=>{const s=document.createElement("link");s.setAttribute("rel","stylesheet");s.setAttribute("type","text/css");s.setAttribute("href",n);s.addEventListener("load",(()=>{e(undefined)}));s.addEventListener("error",(()=>{t(`Stylesheet failed to load: ${n}`)}));document.body.appendChild(s);i.push(s);this.loadCSSOverrides()}))}loadCSSOverrides(){var e;const t=(e=this._settings.user["overrides"])!==null&&e!==void 0?e:{};Object.keys({...this._overrides,...t}).forEach((e=>{const n=t[e];if(n&&this.validateCSS(e,n)){document.documentElement.style.setProperty(`--jp-${e}`,n)}else{delete t[e];document.documentElement.style.removeProperty(`--jp-${e}`)}}));this._overrides=t}validateCSS(e,t){const n=this._overrideProps[e];if(!n){console.warn("CSS validation failed: could not find property corresponding to key.\n"+`key: '${e}', val: '${t}'`);return false}if(CSS.supports(n,t)){return true}else{console.warn("CSS validation failed: invalid value.\n"+`key: '${e}', val: '${t}', prop: '${n}'`);return false}}register(e){const{name:t}=e;const n=this._themes;if(n[t]){throw new Error(`Theme already registered for ${t}`)}n[t]=e;return new me.DisposableDelegate((()=>{delete n[t]}))}setCSSOverride(e,t){return this._settings.set("overrides",{...this._overrides,[e]:t})}setTheme(e){return this._settings.set("theme",e)}setPreferredLightTheme(e){return this._settings.set("preferred-light-theme",e)}setPreferredDarkTheme(e){return this._settings.set("preferred-dark-theme",e)}isLight(e){return this._themes[e].isLight}incrFontSize(e){return this._incrFontSize(e,true)}decrFontSize(e){return this._incrFontSize(e,false)}themeScrollbars(e){return!!this._settings.composite["theme-scrollbars"]&&!!this._themes[e].themeScrollbars}isToggledThemeScrollbars(){return!!this._settings.composite["theme-scrollbars"]}toggleThemeScrollbars(){return this._settings.set("theme-scrollbars",!this._settings.composite["theme-scrollbars"])}isToggledAdaptiveTheme(){return!!this._settings.composite["adaptive-theme"]}toggleAdaptiveTheme(){return this._settings.set("adaptive-theme",!this._settings.composite["adaptive-theme"])}getDisplayName(e){var t,n;return(n=(t=this._themes[e])===null||t===void 0?void 0:t.displayName)!==null&&n!==void 0?n:e}_incrFontSize(e,t=true){var n;const i=((n=this.getCSS(e))!==null&&n!==void 0?n:"13px").split(/([a-zA-Z]+)/);const s=(t?1:-1)*(i[1]==="em"?.1:1);return this.setCSSOverride(e,`${Number(i[0])+s}${i[1]}`)}_initOverrideProps(){const e=this._settings.schema.definitions;const t=e.cssOverrides.properties;Object.keys(t).forEach((e=>{let n;switch(e){case"code-font-size":case"content-font-size1":case"ui-font-size1":n="font-size";break;default:n=t[e].description;break}this._overrideProps[e]=n}))}_loadSettings(){const e=this._outstanding;const t=this._pending;const n=this._requests;if(t){window.clearTimeout(t);this._pending=0}const i=this._settings;const s=this._themes;let o=i.composite["theme"];if(this.isToggledAdaptiveTheme()){if(this.isSystemColorSchemeDark()){o=this.preferredDarkTheme}else{o=this.preferredLightTheme}}if(e){e.then((()=>{this._loadSettings()})).catch((()=>{this._loadSettings()}));this._outstanding=null;return}n[o]=n[o]?n[o]+1:1;if(s[o]){this._outstanding=this._loadTheme(o);delete n[o];return}if(n[o]>fe){const e=i.default("theme");delete n[o];if(!s[e]){this._onError(this._trans.__("Neither theme %1 nor default %2 loaded.",o,e));return}console.warn(`Could not load theme ${o}, using default ${e}.`);this._outstanding=this._loadTheme(e);return}this._pending=window.setTimeout((()=>{this._loadSettings()}),ge)}_loadTheme(e){var t;const n=this._current;const i=this._links;const s=this._themes;const o=this._splash?this._splash.show(s[e].isLight):new me.DisposableDelegate((()=>undefined));i.forEach((e=>{if(e.parentElement){e.parentElement.removeChild(e)}}));i.length=0;const r=(t=this._settings.schema.properties)===null||t===void 0?void 0:t.theme;if(r){r.enum=Object.keys(s).map((e=>{var t;return(t=s[e].displayName)!==null&&t!==void 0?t:e}))}const a=n?s[n].unload():Promise.resolve();return Promise.all([a,s[e].load()]).then((()=>{this._current=e;this._themeChanged.emit({name:"theme",oldValue:n,newValue:e});this._host.hide();requestAnimationFrame((()=>{this._host.show();_e.fitAll(this._host);o.dispose()}))})).catch((e=>{this._onError(e);o.dispose()}))}_onError(e){void g({title:this._trans.__("Error Loading Theme"),body:String(e),buttons:[v.okButton({label:this._trans.__("OK")})]})}}var _e;(function(e){function t(e){for(const n of e.children()){t(n)}e.fit()}e.fitAll=t})(_e||(_e={}));const be=new c.Token("@jupyterlab/apputils:ICommandPalette",`A service for the application command palette\n  in the left panel. Use this to add commands to the palette.`);const ye=new c.Token("@jupyterlab/apputils:IKernelStatusModel","A service to register kernel session provider to the kernel status indicator.");const we=new c.Token("@jupyterlab/apputils:ILicensesClient","A service for fetching licenses.");const Ce=new c.Token("@jupyterlab/apputils:ISessionContextDialogs","A service for handling the session dialogs.");const xe=new c.Token("@jupyterlab/apputils:IThemeManager","A service for the theme manager for the application. This is used primarily in theme extensions to register new themes.");const Se=new c.Token("@jupyterlab/apputils:ISanitizer","A service for sanitizing HTML strings.");const ke=new c.Token("@jupyterlab/apputils:ISplashScreen",`A service for the splash screen for the application.\n  Use this if you want to show the splash screen for your own purposes.`);const je=new c.Token("@jupyterlab/apputils:IWindowResolver",`A service for a window resolver for the\n  application. JupyterLab workspaces are given a name, which are determined using\n  the window resolver. Require this if you want to use the name of the current workspace.`);const Ie=new c.Token("@jupyterlab/apputils:IToolbarWidgetRegistry",`A registry for toolbar widgets. Require this\n  if you want to build the toolbar dynamically from a data definition (stored in settings for example).`);class Ee{constructor(e){this._widgets=new Map;this._factoryAdded=new h.Signal(this);this._defaultFactory=e.defaultFactory}get defaultFactory(){return this._defaultFactory}set defaultFactory(e){this._defaultFactory=e}get factoryAdded(){return this._factoryAdded}createWidget(e,t,n){var i;const s=(i=this._widgets.get(e))===null||i===void 0?void 0:i.get(n.name);return s?s(t):this._defaultFactory(e,t,n)}addFactory(e,t,n){let i=this._widgets.get(e);const s=i===null||i===void 0?void 0:i.get(t);if(!i){i=new Map;this._widgets.set(e,i)}i.set(t,n);this._factoryAdded.emit(t);return s}registerFactory(e,t,n){return this.addFactory(e,t,n)}}function Te(e){return(t,n,s)=>{var r,a;switch((r=s.type)!==null&&r!==void 0?r:"command"){case"command":{const{command:t,args:o,label:r,caption:l,icon:d}=s;const c=t!==null&&t!==void 0?t:"";const h={toolbar:true,...o};const u=d?i.LabIcon.resolve({icon:d}):undefined;const p=n.toolbar;const m=(u!==null&&u!==void 0?u:e.icon(c,h))?r!==null&&r!==void 0?r:"":r;return new i.CommandToolbarButton({commands:e,id:c,args:h,icon:u,label:m,caption:l,noFocusOnClick:(a=p===null||p===void 0?void 0:p.noFocusOnClick)!==null&&a!==void 0?a:false})}case"spacer":return i.Toolbar.createSpacerItem();default:return new o.Widget}}}var Me=n(97539);var De=n(90600);const Ae=50;const Pe="jupyter.lab.toolbars";async function Le(e){const t=await g({title:e.__("Information"),body:e.__("Toolbar customization has changed. You will need to reload JupyterLab to see the changes."),buttons:[v.cancelButton(),v.okButton({label:e.__("Reload")})]});if(t.button.accept){location.reload()}}async function Re(e,t,n,i,s,o="toolbar"){var r;const a=s.load("jupyterlab");let l=null;let d={};let h=true;try{function g(e){var s,r;d={};const a=Object.keys(t.plugins).filter((e=>e!==i)).map((e=>{var i,s;const o=(s=((i=t.plugins[e].schema[Pe])!==null&&i!==void 0?i:{})[n])!==null&&s!==void 0?s:[];d[e]=o;return o})).concat([(r=((s=e[Pe])!==null&&s!==void 0?s:{})[n])!==null&&r!==void 0?r:[]]).reduceRight(((e,t)=>De.SettingRegistry.reconcileToolbarItems(e,t,true)),[]);e.properties[o].default=De.SettingRegistry.reconcileToolbarItems(a,e.properties[o].default,true).sort(((e,t)=>{var n,i;return((n=e.rank)!==null&&n!==void 0?n:Ae)-((i=t.rank)!==null&&i!==void 0?i:Ae)}))}t.transform(i,{compose:e=>{var t,n,i,s,r;if(!l){l=c.JSONExt.deepCopy(e.schema);g(l)}const a=(i=((n=((t=l.properties)!==null&&t!==void 0?t:{})[o])!==null&&n!==void 0?n:{}).default)!==null&&i!==void 0?i:[];const d=e.data.user;const h=e.data.composite;d[o]=(s=e.data.user[o])!==null&&s!==void 0?s:[];h[o]=((r=De.SettingRegistry.reconcileToolbarItems(a,d[o],false))!==null&&r!==void 0?r:[]).sort(((e,t)=>{var n,i;return((n=e.rank)!==null&&n!==void 0?n:Ae)-((i=t.rank)!==null&&i!==void 0?i:Ae)}));e.data={composite:h,user:d};return e},fetch:e=>{if(!l){l=c.JSONExt.deepCopy(e.schema);g(l)}return{data:e.data,id:e.id,raw:e.raw,schema:l,version:e.version}}})}catch(m){if(m.name==="TransformError"){h=false}else{throw m}}const u=await t.load(i);u.changed.connect((()=>{var e;const t=(e=u.composite[o])!==null&&e!==void 0?e:[];p(t)}));const p=t=>{e.clear();e.pushAll(t.filter((e=>!e.disabled)))};p((r=u.composite[o])!==null&&r!==void 0?r:[]);if(!h){return}t.pluginChanged.connect((async(e,s)=>{var o,r,h;if(s===i){return}const u=(o=d[s])!==null&&o!==void 0?o:[];const p=(h=((r=t.plugins[s].schema[Pe])!==null&&r!==void 0?r:{})[n])!==null&&h!==void 0?h:[];if(!c.JSONExt.deepEqual(u,p)){if(d[s]){await Le(a)}else{if(p.length>0){l=null;const e=t.plugins[i].schema;e.properties.toolbar.default=[];await t.load(i,true)}}}}))}function Ne(e,t,n,i,s,o="toolbar"){const r=new Me.ObservableList({itemCmp:(e,t)=>c.JSONExt.deepEqual(e,t)});Re(r,t,n,i,s,o).catch((e=>{console.error(`Failed to load toolbar items for factory ${n} from ${i}`,e)}));return t=>{const i=(i,s)=>{switch(s.type){case"move":o.move(s.oldIndex,s.newIndex);break;case"add":s.newValues.forEach((i=>o.push({name:i.name,widget:e.createWidget(n,t,i)})));break;case"remove":s.oldValues.forEach((()=>o.remove(s.oldIndex)));break;case"set":s.newValues.forEach((i=>o.set(s.newIndex,{name:i.name,widget:e.createWidget(n,t,i)})));break}};const s=(i,s)=>{const a=Array.from(r).findIndex((e=>e.name===s));if(a>=0){o.set(a,{name:s,widget:e.createWidget(n,t,r.get(a))})}};const o=new Me.ObservableList({values:Array.from(r).map((i=>({name:i.name,widget:e.createWidget(n,t,i)})))});e.factoryAdded.connect(s);r.changed.connect(i);t.disposed.connect((()=>{r.changed.disconnect(i);e.factoryAdded.disconnect(s)}));return o}}function Oe(e,t,n){var i;if(!e.toolbar&&!n){console.log(`Widget ${e.id} has no 'toolbar' and no explicit toolbar was provided.`);return}const s=(i=e.toolbar)!==null&&i!==void 0?i:n;const o=t(e);if(Array.isArray(o)){o.forEach((({name:e,widget:t})=>{s.addItem(e,t)}))}else{const t=(e,t)=>{switch(t.type){case"add":t.newValues.forEach(((e,n)=>{s.insertItem(t.newIndex+n,e.name,e.widget)}));break;case"move":t.oldValues.forEach((e=>{e.widget.parent=null}));t.newValues.forEach(((e,n)=>{s.insertItem(t.newIndex+n,e.name,e.widget)}));break;case"remove":t.oldValues.forEach((e=>{e.widget.parent=null}));break;case"set":t.oldValues.forEach((e=>{e.widget.parent=null}));t.newValues.forEach(((e,n)=>{const i=(0,d.findIndex)(s.names(),(t=>e.name===t));if(i>=0){Array.from(s.children())[i].parent=null}s.insertItem(t.newIndex+n,e.name,e.widget)}));break}};t(o,{newIndex:0,newValues:Array.from(o),oldIndex:0,oldValues:[],type:"add"});o.changed.connect(t);e.disposed.connect((()=>{o.changed.disconnect(t)}))}}class Be{get name(){return this._name}resolve(e){return Fe.resolve(e).then((e=>{this._name=e}))}}var Fe;(function(e){const t="@jupyterlab/statedb:StateDB";const n=`${t}:beacon`;const i=Math.floor(200+Math.random()*300);const s=`${t}:window`;let o=null;let r=null;const a=new c.PromiseDelegate;const l={};let d=null;let h=false;function u(){window.addEventListener("storage",(e=>{const{key:t,newValue:i}=e;if(i===null){return}if(t===n&&i!==o&&r!==null){p(h?d:r);return}if(h||t!==s){return}const a=i.replace(/\-\d+$/,"");l[a]=null;if(!r||r in l){m()}}))}function p(e){if(e===null){return}const{localStorage:t}=window;t.setItem(s,`${e}-${(new Date).getTime()}`)}function m(){h=true;o=null;a.reject(`Window name candidate "${r}" already exists`)}function g(e){if(h){return a.promise}r=e;if(r in l){m();return a.promise}const{localStorage:t,setTimeout:s}=window;s((()=>{if(h){return}if(!r||r in l){return m()}h=true;o=null;a.resolve(d=r);p(d)}),i);o=`${Math.random()}-${(new Date).getTime()}`;t.setItem(n,o);return a.promise}e.resolve=g;(()=>{u()})()})(Fe||(Fe={}));class ze extends i.Toolbar{}(function(e){e.createInterruptButton=E.createInterruptButton;e.createKernelNameItem=E.createKernelNameItem;e.createKernelStatusItem=E.createKernelStatusItem;e.createRestartButton=E.createRestartButton;e.createSpacerItem=i.Toolbar.createSpacerItem})(ze||(ze={}))},97913:(e,t,n)=>{"use strict";var i=n(10395);var s=n(40662);var o=n(24800);var r=n(85072);var a=n.n(r);var l=n(97825);var d=n.n(l);var c=n(77659);var h=n.n(c);var u=n(55056);var p=n.n(u);var m=n(10540);var g=n.n(m);var f=n(41113);var v=n.n(f);var _=n(41510);var b={};b.styleTagTransform=v();b.setAttributes=p();b.insert=h().bind(null,"head");b.domAPI=d();b.insertStyleElement=g();var y=a()(_.A,b);const w=_.A&&_.A.locals?_.A.locals:undefined},39721:(e,t,n)=>{"use strict";n.r(t);n.d(t,{AttachmentsModel:()=>r,AttachmentsResolver:()=>a});var i=n(97539);var s=n(61314);var o=n(2336);class r{constructor(e){var t;this._map=new i.ObservableMap;this._isDisposed=false;this._stateChanged=new o.Signal(this);this._changed=new o.Signal(this);this._serialized=null;this._changeGuard=false;this.contentFactory=(t=e.contentFactory)!==null&&t!==void 0?t:r.defaultContentFactory;if(e.values){for(const t of Object.keys(e.values)){if(e.values[t]!==undefined){this.set(t,e.values[t])}}}this._map.changed.connect(this._onMapChanged,this)}get stateChanged(){return this._stateChanged}get changed(){return this._changed}get keys(){return this._map.keys()}get length(){return this._map.keys().length}get isDisposed(){return this._isDisposed}dispose(){if(this.isDisposed){return}this._isDisposed=true;this._map.dispose();o.Signal.clearData(this)}has(e){return this._map.has(e)}get(e){return this._map.get(e)}set(e,t){const n=this._createItem({value:t});this._map.set(e,n)}remove(e){this._map.delete(e)}clear(){this._map.values().forEach((e=>{e.dispose()}));this._map.clear()}fromJSON(e){this.clear();Object.keys(e).forEach((t=>{if(e[t]!==undefined){this.set(t,e[t])}}))}toJSON(){const e={};for(const t of this._map.keys()){e[t]=this._map.get(t).toJSON()}return e}_createItem(e){const t=this.contentFactory;const n=t.createAttachmentModel(e);n.changed.connect(this._onGenericChange,this);return n}_onMapChanged(e,t){if(this._serialized&&!this._changeGuard){this._changeGuard=true;this._serialized.set(this.toJSON());this._changeGuard=false}this._changed.emit(t);this._stateChanged.emit(void 0)}_onGenericChange(){this._stateChanged.emit(void 0)}}(function(e){class t{createAttachmentModel(e){return new s.AttachmentModel(e)}}e.ContentFactory=t;e.defaultContentFactory=new t})(r||(r={}));class a{constructor(e){this._parent=e.parent||null;this._model=e.model}async resolveUrl(e){if(this._parent&&!e.startsWith("attachment:")){return this._parent.resolveUrl(e)}return e}async getDownloadUrl(e){if(this._parent&&!e.startsWith("attachment:")){return this._parent.getDownloadUrl(e)}const t=e.slice("attachment:".length);const n=this._model.get(t);if(n===undefined){return e}const{data:i}=n;const o=Object.keys(i)[0];if(o===undefined||s.imageRendererFactory.mimeTypes.indexOf(o)===-1){throw new Error(`Cannot render unknown image mime type "${o}".`)}const r=`data:${o};base64,${i[o]}`;return r}isLocal(e){var t,n,i;if(this._parent&&!e.startsWith("attachment:")){return(i=(n=(t=this._parent).isLocal)===null||n===void 0?void 0:n.call(t,e))!==null&&i!==void 0?i:true}return true}}},39470:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>p});var i=n(90600);var s=n.n(i);var o=n(15538);var r=n.n(o);var a=n(48287);var l=n.n(a);var d=n(21760);var c=n.n(d);const h="@jupyterlab/cell-toolbar-extension:plugin";const u={id:h,description:"Add the cells toolbar.",autoStart:true,activate:async(e,t,n,i)=>{function s(e){const t=e===null?true:e.get("showToolbar").composite;l.enabled=t}const r=t&&n?(0,a.createToolbarFactory)(n,t,o.CellBarExtension.FACTORY_NAME,u.id,i!==null&&i!==void 0?i:d.nullTranslator):undefined;const l=new o.CellBarExtension(e.commands,r);if(t!==null){void Promise.all([e.restored,t.load(h)]).then((([,e])=>{s(e);e.changed.connect(s)}))}e.docRegistry.addWidgetExtension("Notebook",l)},optional:[i.ISettingRegistry,a.IToolbarWidgetRegistry,d.ITranslator]};const p=u},56104:(e,t,n)=>{"use strict";var i=n(97913);var s=n(3579);var o=n(10395);var r=n(40662);var a=n(79010);var l=n(53377);var d=n(28006);var c=n(85072);var h=n.n(c);var u=n(97825);var p=n.n(u);var m=n(77659);var g=n.n(m);var f=n(55056);var v=n.n(f);var _=n(10540);var b=n.n(_);var y=n(41113);var w=n.n(y);var C=n(31772);var x={};x.styleTagTransform=w();x.setAttributes=v();x.insert=g().bind(null,"head");x.domAPI=p();x.insertStyleElement=b();var S=h()(C.A,x);const k=C.A&&C.A.locals?C.A.locals:undefined},23168:(e,t,n)=>{"use strict";n.r(t);n.d(t,{CellBarExtension:()=>g,CellToolbarTracker:()=>p});var i=n(48287);var s=n(97539);var o=n(78464);var r=n(34236);var a=n(2336);var l=n(21760);const d=["text/plain","application/vnd.jupyter.stdout","application/vnd.jupyter.stderr"];const c="jp-cell-toolbar";const h="jp-cell-menu";const u="jp-toolbar-overlap";class p{constructor(e,t,n,i){this._isDisposed=false;this._toolbar=null;this._toolbarItems=null;this._toolbarFactory=null;this._panel=e;this._previousActiveCell=this._panel.content.activeCell;this._toolbarItems=t!==null&&t!==void 0?t:null;this._toolbarFactory=n!==null&&n!==void 0?n:null;this._enabled=true;this._trans=(i!==null&&i!==void 0?i:l.nullTranslator).load("jupyterlab");if(this._toolbarItems===null&&this._toolbarFactory===null){throw Error("You must provide the toolbarFactory or the toolbar items.")}if(!this._toolbarFactory&&this._toolbarItems){this._onToolbarChanged();this._toolbarItems.changed.connect(this._onToolbarChanged,this)}void e.revealed.then((()=>{requestAnimationFrame((()=>{const t=e.content;this._onActiveCellChanged(t);t.activeCellChanged.connect(this._onActiveCellChanged,this);t.renderingLayoutChanged.connect(this._onActiveCellChanged,this);t.disposed.connect((()=>{t.activeCellChanged.disconnect(this._onActiveCellChanged)}))}))}))}_onMetadataChanged(e,t){if(t.key==="jupyter"){if(typeof t.newValue==="object"&&t.newValue.source_hidden===true&&(t.type==="add"||t.type==="change")){this._removeToolbar(e)}else if(typeof t.oldValue==="object"&&t.oldValue.source_hidden===true){this._addToolbar(e)}}}_onActiveCellChanged(e){if(this._previousActiveCell&&!this._previousActiveCell.isDisposed){this._removeToolbar(this._previousActiveCell.model);this._previousActiveCell.model.metadataChanged.disconnect(this._onMetadataChanged)}const t=e.activeCell;this._previousActiveCell=t;if(t===null||t.inputHidden){return}t.model.metadataChanged.connect(this._onMetadataChanged,this);this._addToolbar(t.model)}get isDisposed(){return this._isDisposed}get enabled(){return this._enabled}set enabled(e){this._enabled=e;this._onToolbarChanged()}dispose(){var e,t;if(this.isDisposed){return}this._isDisposed=true;(e=this._toolbarItems)===null||e===void 0?void 0:e.changed.disconnect(this._onToolbarChanged,this);(t=this._toolbar)===null||t===void 0?void 0:t.dispose();this._panel=null;a.Signal.clearData(this)}_addToolbar(e){if(!this.enabled){return}const t=this._getCell(e);if(t&&!t.isDisposed){const e=this._toolbar=new o.Toolbar;e.addClass(h);e.addClass(c);e.node.setAttribute("aria-label",this._trans.__("Cell toolbar"));const n=[t.ready];if(this._toolbarFactory){(0,i.setToolbar)(t,this._toolbarFactory,e);e.layout.widgets.forEach((e=>{e.update()}))}else{for(const{name:t,widget:i}of this._toolbarItems){e.addItem(t,i);if(i instanceof o.ReactWidget&&i.renderPromise!==undefined){i.update();n.push(i.renderPromise)}}}n.push(t.ready);Promise.all(n).then((()=>{var n;if(t.isDisposed||((n=this._panel)===null||n===void 0?void 0:n.content.activeCell)!==t){e.dispose();return}t.node.classList.add(u);t.inputArea.layout.insertWidget(0,e);t.displayChanged.connect(this._resizeEventCallback,this);t.model.contentChanged.connect(this._changedEventCallback,this);this._updateCellForToolbarOverlap(t)})).catch((e=>{console.error("Error rendering buttons of the cell toolbar: ",e)}))}}_getCell(e){var t;return(t=this._panel)===null||t===void 0?void 0:t.content.widgets.find((t=>t.model===e))}_removeToolbar(e){var t,n;const i=this._getCell(e);if(i&&!i.isDisposed){i.displayChanged.disconnect(this._resizeEventCallback,this)}e.contentChanged.disconnect(this._changedEventCallback,this);if(((t=this._toolbar)===null||t===void 0?void 0:t.parent)===(i===null||i===void 0?void 0:i.inputArea)&&((n=this._toolbar)===null||n===void 0?void 0:n.isDisposed)===false){this._toolbar.dispose()}}_onToolbarChanged(){var e;const t=(e=this._panel)===null||e===void 0?void 0:e.content.activeCell;if(t){this._removeToolbar(t.model);this._addToolbar(t.model)}}_changedEventCallback(){var e;const t=(e=this._panel)===null||e===void 0?void 0:e.content.activeCell;if(t===null||t===undefined){return}this._updateCellForToolbarOverlap(t)}_resizeEventCallback(){var e;const t=(e=this._panel)===null||e===void 0?void 0:e.content.activeCell;if(t===null||t===undefined){return}this._updateCellForToolbarOverlap(t)}_updateCellForToolbarOverlap(e){requestIdleCallback((()=>{const t=e.node;t.classList.remove(u);if(this._cellToolbarOverlapsContents(e)){t.classList.add(u)}}))}_cellToolbarOverlapsContents(e){var t,n,i,s;if(!e.model){return false}const o=e.model.type;const r=(t=e.editorWidget)===null||t===void 0?void 0:t.node.getBoundingClientRect();const a=(n=r===null||r===void 0?void 0:r.left)!==null&&n!==void 0?n:0;const l=(i=r===null||r===void 0?void 0:r.right)!==null&&i!==void 0?i:0;const d=this._cellToolbarLeft(e);if(d===null){return false}if((a+l)/2>d){return true}if(o==="markdown"&&e.rendered){return this._markdownOverlapsToolbar(e)}if(((s=this._panel)===null||s===void 0?void 0:s.content.renderingLayout)==="default"){return this._codeOverlapsToolbar(e)}else{return this._outputOverlapsToolbar(e)}}_markdownOverlapsToolbar(e){const t=e.inputArea;if(!t){return false}const n=t.renderedInput;const i=n.node;const s=i.firstElementChild;if(s===null){return false}const o=s.style.maxWidth;s.style.maxWidth="max-content";const r=s.getBoundingClientRect().right;s.style.maxWidth=o;const a=this._cellToolbarLeft(e);return a===null?false:r>a}_outputOverlapsToolbar(e){const t=e.outputArea.node;if(t){const n=t.querySelectorAll("[data-mime-type]");const i=this._cellToolbarRect(e);if(i){const{left:e,bottom:t}=i;return(0,r.some)(n,(n=>{const i=n.firstElementChild;if(i){const s=new Range;if(d.includes(n.getAttribute("data-mime-type")||"")){s.selectNodeContents(i)}else{s.selectNode(i)}const{right:o,top:r}=s.getBoundingClientRect();return o>e&&r<t}return false}))}}return false}_codeOverlapsToolbar(e){const t=e.editorWidget;const n=e.editor;if(!t||!n){return false}if(n.lineCount<1){return false}const i=t.node.getElementsByClassName("cm-line");if(i.length<1){return false}let s=i[0].getBoundingClientRect().left;const o=document.createRange();o.selectNodeContents(i[0]);s+=o.getBoundingClientRect().width;const r=this._cellToolbarLeft(e);return r===null?false:s>r}_cellToolbarRect(e){var t;if(((t=this._toolbar)===null||t===void 0?void 0:t.parent)!==e.inputArea){return null}const n=this._toolbar.node;return n.getBoundingClientRect()}_cellToolbarLeft(e){var t;return((t=this._cellToolbarRect(e))===null||t===void 0?void 0:t.left)||null}}const m=[{command:"notebook:duplicate-below",name:"duplicate-cell"},{command:"notebook:move-cell-up",name:"move-cell-up"},{command:"notebook:move-cell-down",name:"move-cell-down"},{command:"notebook:insert-cell-above",name:"insert-cell-above"},{command:"notebook:insert-cell-below",name:"insert-cell-below"},{command:"notebook:delete-cell",name:"delete-cell"}];class g{constructor(e,t){this._commands=e;this._toolbarFactory=t!==null&&t!==void 0?t:this.defaultToolbarFactory}get defaultToolbarFactory(){const e=(0,i.createDefaultFactory)(this._commands);return t=>new s.ObservableList({values:m.map((n=>({name:n.name,widget:e(g.FACTORY_NAME,t,n)})))})}createNew(e){return this._tracker=new p(e,undefined,this._toolbarFactory)}get enabled(){return this._tracker.enabled}set enabled(e){if(this._tracker){this._tracker.enabled=e}}}g.FACTORY_NAME="Cell"},30531:(e,t,n)=>{"use strict";n.r(t);n.d(t,{AttachmentsCell:()=>$e,AttachmentsCellModel:()=>W,Cell:()=>Ve,CellDragUtils:()=>c,CellFooter:()=>k,CellHeader:()=>S,CellModel:()=>H,CellSearchProvider:()=>re,CodeCell:()=>qe,CodeCellLayout:()=>Ue,CodeCellModel:()=>q,Collapser:()=>_,InputArea:()=>D,InputCollapser:()=>b,InputPlaceholder:()=>ee,InputPrompt:()=>A,MarkdownCell:()=>Ke,MarkdownCellModel:()=>U,OutputCollapser:()=>y,OutputPlaceholder:()=>te,Placeholder:()=>Z,RawCell:()=>Je,RawCellModel:()=>V,SELECTED_HIGHLIGHT_CLASS:()=>oe,createCellSearchProvider:()=>de,isCodeCellModel:()=>B,isMarkdownCellModel:()=>F,isRawCellModel:()=>z});var i=n(97290);const s=5;const o="jp-dragImage";const r="jp-dragImage-singlePrompt";const a="jp-dragImage-content";const l="jp-dragImage-prompt";const d="jp-dragImage-multipleBack";var c;(function(e){function t(e,t,n){let i=-1;while(e&&e.parentElement){if(n(e)){let n=-1;for(const s of t){if(s.node===e){i=++n;break}}break}e=e.parentElement}return i}e.findCell=t;function n(e,t){var n,i;let s;if(e){if((n=e.editorWidget)===null||n===void 0?void 0:n.node.contains(t)){s="input"}else if((i=e.promptNode)===null||i===void 0?void 0:i.contains(t)){s="prompt"}else{s="cell"}}else{s="unknown"}return s}e.detectTargetArea=n;function c(e,t,n,i){const o=Math.abs(n-e);const r=Math.abs(i-t);return o>=s||r>=s}e.shouldStartDrag=c;function h(e,t){const n=t.length;let s;if(e.model.type==="code"){const t=e.model.executionCount;s=" ";if(t){s=t.toString()}}else{s=""}const c=e.model.sharedModel.getSource().split("\n")[0].slice(0,26);if(n>1){if(s!==""){return i.VirtualDOM.realize(i.h.div(i.h.div({className:o},i.h.span({className:l},"["+s+"]:"),i.h.span({className:a},c)),i.h.div({className:d},"")))}else{return i.VirtualDOM.realize(i.h.div(i.h.div({className:o},i.h.span({className:l}),i.h.span({className:a},c)),i.h.div({className:d},"")))}}else{if(s!==""){return i.VirtualDOM.realize(i.h.div(i.h.div({className:`${o} ${r}`},i.h.span({className:l},"["+s+"]:"),i.h.span({className:a},c))))}else{return i.VirtualDOM.realize(i.h.div(i.h.div({className:`${o} ${r}`},i.h.span({className:l}),i.h.span({className:a},c))))}}}e.createCellDragImage=h})(c||(c={}));var h=n(78464);var u=n(76326);var p=n(44914);const m="jp-Collapser";const g="jp-Collapser-child";const f="jp-InputCollapser";const v="jp-OutputCollapser";class _ extends h.ReactWidget{constructor(){super();this.addClass(m)}get collapsed(){return false}render(){const e=g;return p.createElement("div",{className:e,onClick:e=>this.handleClick(e)})}}class b extends _{constructor(){super();this.addClass(f)}get collapsed(){var e;const t=(e=this.parent)===null||e===void 0?void 0:e.parent;if(t){return t.inputHidden}else{return false}}handleClick(e){var t;const n=(t=this.parent)===null||t===void 0?void 0:t.parent;if(n){n.inputHidden=!n.inputHidden}this.update()}}class y extends _{constructor(){super();this.addClass(v)}get collapsed(){var e;const t=(e=this.parent)===null||e===void 0?void 0:e.parent;if(t){return t.outputHidden}else{return false}}handleClick(e){var t,n;const i=(t=this.parent)===null||t===void 0?void 0:t.parent;if(i){i.outputHidden=!i.outputHidden;if(i.outputHidden){let e=(n=i.parent)===null||n===void 0?void 0:n.node;if(e){u.ElementExt.scrollIntoViewIfNeeded(e,i.node)}}}this.update()}}var w=n(1143);const C="jp-CellHeader";const x="jp-CellFooter";class S extends w.Widget{constructor(){super();this.addClass(C)}}class k extends w.Widget{constructor(){super();this.addClass(x)}}var j=n(84958);const I="jp-InputArea";const E="jp-InputArea-prompt";const T="jp-InputPrompt";const M="jp-InputArea-editor";class D extends w.Widget{constructor(e){super();this.addClass(I);const{contentFactory:t,editorOptions:n,model:i}=e;this.model=i;this.contentFactory=t;const s=this._prompt=t.createInputPrompt();s.addClass(E);const o=this._editor=new j.CodeEditorWrapper({factory:t.editorFactory,model:i,editorOptions:n});o.addClass(M);const r=this.layout=new w.PanelLayout;r.addWidget(s);r.addWidget(o)}get editorWidget(){return this._editor}get editor(){return this._editor.editor}get promptNode(){return this._prompt.node}get renderedInput(){return this._rendered}renderInput(e){const t=this.layout;if(this._rendered){this._rendered.parent=null}this._editor.hide();this._rendered=e;t.addWidget(e)}showEditor(){if(this._rendered){this._rendered.parent=null}this._editor.show()}setPrompt(e){this._prompt.executionCount=e}dispose(){if(this.isDisposed){return}this._prompt=null;this._editor=null;this._rendered=null;super.dispose()}}(function(e){class t{constructor(e){this._editor=e.editorFactory}get editorFactory(){return this._editor}createInputPrompt(){return new A}}e.ContentFactory=t})(D||(D={}));class A extends w.Widget{constructor(){super();this._executionCount=null;this.addClass(T)}get executionCount(){return this._executionCount}set executionCount(e){this._executionCount=e;if(e===null){this.node.textContent=" "}else{this.node.textContent=`[${e||" "}]:`}}}var P=n(2336);var L=n(71936);var R=n(25184);var N=n(95917);const O=(0,N.createMutex)();function B(e){return e.type==="code"}function F(e){return e.type==="markdown"}function z(e){return e.type==="raw"}class H extends j.CodeEditor.Model{constructor(e={}){const{cell_type:t,sharedModel:n,...i}=e;super({sharedModel:n!==null&&n!==void 0?n:(0,N.createStandaloneCell)({cell_type:t!==null&&t!==void 0?t:"raw",id:e.id}),...i});this.contentChanged=new P.Signal(this);this.stateChanged=new P.Signal(this);this._metadataChanged=new P.Signal(this);this._trusted=false;this.standaloneModel=typeof e.sharedModel==="undefined";this.trusted=!!this.getMetadata("trusted")||!!e.trusted;this.sharedModel.changed.connect(this.onGenericChange,this);this.sharedModel.metadataChanged.connect(this._onMetadataChanged,this)}get metadataChanged(){return this._metadataChanged}get id(){return this.sharedModel.getId()}get metadata(){return this.sharedModel.metadata}get trusted(){return this._trusted}set trusted(e){const t=this.trusted;if(t!==e){this._trusted=e;this.onTrustedChanged(this,{newValue:e,oldValue:t})}}dispose(){if(this.isDisposed){return}this.sharedModel.changed.disconnect(this.onGenericChange,this);this.sharedModel.metadataChanged.disconnect(this._onMetadataChanged,this);super.dispose()}onTrustedChanged(e,t){}deleteMetadata(e){return this.sharedModel.deleteMetadata(e)}getMetadata(e){return this.sharedModel.getMetadata(e)}setMetadata(e,t){if(typeof t==="undefined"){this.sharedModel.deleteMetadata(e)}else{this.sharedModel.setMetadata(e,t)}}toJSON(){return this.sharedModel.toJSON()}onGenericChange(){this.contentChanged.emit(void 0)}_onMetadataChanged(e,t){this._metadataChanged.emit(t)}}class W extends H{constructor(e){var t;super(e);const n=(t=e.contentFactory)!==null&&t!==void 0?t:W.defaultContentFactory;const i=this.sharedModel.getAttachments();this._attachments=n.createAttachmentsModel({values:i});this._attachments.stateChanged.connect(this.onGenericChange,this);this._attachments.changed.connect(this._onAttachmentsChange,this);this.sharedModel.changed.connect(this._onSharedModelChanged,this)}get attachments(){return this._attachments}dispose(){if(this.isDisposed){return}this._attachments.stateChanged.disconnect(this.onGenericChange,this);this._attachments.changed.disconnect(this._onAttachmentsChange,this);this._attachments.dispose();this.sharedModel.changed.disconnect(this._onSharedModelChanged,this);super.dispose()}toJSON(){return super.toJSON()}_onAttachmentsChange(e,t){const n=this.sharedModel;O((()=>n.setAttachments(e.toJSON())))}_onSharedModelChanged(e,t){if(t.attachmentsChange){const e=this.sharedModel;O((()=>{var t;return this._attachments.fromJSON((t=e.getAttachments())!==null&&t!==void 0?t:{})}))}}}(function(e){class t{createAttachmentsModel(e){return new L.AttachmentsModel(e)}}e.ContentFactory=t;e.defaultContentFactory=new t})(W||(W={}));class V extends W{constructor(e={}){super({cell_type:"raw",...e})}get type(){return"raw"}toJSON(){return super.toJSON()}}class U extends W{constructor(e={}){super({cell_type:"markdown",...e});this.mimeType="text/x-ipythongfm"}get type(){return"markdown"}toJSON(){return super.toJSON()}}class q extends H{constructor(e={}){var t;super({cell_type:"code",...e});this._executedCode="";this._isDirty=false;const n=(t=e===null||e===void 0?void 0:e.contentFactory)!==null&&t!==void 0?t:q.defaultContentFactory;const i=this.trusted;const s=this.sharedModel.getOutputs();this._outputs=n.createOutputArea({trusted:i,values:s});this.sharedModel.changed.connect(this._onSharedModelChanged,this);this._outputs.changed.connect(this.onGenericChange,this);this._outputs.changed.connect(this.onOutputsChange,this)}get type(){return"code"}get executionCount(){return this.sharedModel.execution_count||null}set executionCount(e){this.sharedModel.execution_count=e||null}get executionState(){return this.sharedModel.executionState}set executionState(e){this.sharedModel.executionState=e}get isDirty(){return this._isDirty}set isDirty(e){this._setDirty(e)}get outputs(){return this._outputs}clearExecution(){this.outputs.clear();this.executionCount=null;this.executionState="idle";this._setDirty(false);this.sharedModel.deleteMetadata("execution");this.trusted=true}dispose(){if(this.isDisposed){return}this.sharedModel.changed.disconnect(this._onSharedModelChanged,this);this._outputs.changed.disconnect(this.onGenericChange,this);this._outputs.changed.disconnect(this.onOutputsChange,this);this._outputs.dispose();this._outputs=null;super.dispose()}onTrustedChanged(e,t){const n=t.newValue;if(this._outputs){this._outputs.trusted=n}if(n){const e=this.sharedModel;const t=e.getMetadata();t.trusted=true;e.setMetadata(t)}this.stateChanged.emit({name:"trusted",oldValue:t.oldValue,newValue:n})}toJSON(){return super.toJSON()}onOutputsChange(e,t){const n=this.sharedModel;O((()=>{switch(t.type){case"add":{for(const n of t.newValues){if(n.type==="stream"){n.streamText.changed.connect(((e,n)=>{if(n.options!==undefined&&n.options["silent"]){return}const i=this.sharedModel;if(n.type==="remove"){i.removeStreamOutput(t.newIndex,n.start,"silent-change")}else{i.appendStreamOutput(t.newIndex,n.value,"silent-change")}}),this)}}const e=t.newValues.map((e=>e.toJSON()));n.updateOutputs(t.newIndex,t.newIndex,e,"silent-change");break}case"set":{const e=t.newValues.map((e=>e.toJSON()));n.updateOutputs(t.oldIndex,t.oldIndex+e.length,e,"silent-change");break}case"remove":n.updateOutputs(t.oldIndex,t.oldValues.length,[],"silent-change");break;default:throw new Error(`Invalid event type: ${t.type}`)}}))}_onSharedModelChanged(e,t){if(t.streamOutputChange){O((()=>{for(const e of t.streamOutputChange){if("delete"in e){this._outputs.removeStreamOutput(e.delete)}if("insert"in e){this._outputs.appendStreamOutput(e.insert.toString())}}}))}if(t.outputsChange){O((()=>{let e=0;for(const n of t.outputsChange){if("retain"in n){e+=n.retain}if("delete"in n){for(let t=0;t<n.delete;t++){this._outputs.remove(e)}}if("insert"in n){for(const e of n.insert){this._outputs.add("toJSON"in e?e.toJSON():e)}}}}))}if(t.executionCountChange){if(t.executionCountChange.newValue&&(this.isDirty||!t.executionCountChange.oldValue)){this._setDirty(false)}this.stateChanged.emit({name:"executionCount",oldValue:t.executionCountChange.oldValue,newValue:t.executionCountChange.newValue})}if(t.executionStateChange){this.stateChanged.emit({name:"executionState",oldValue:t.executionStateChange.oldValue,newValue:t.executionStateChange.newValue})}if(t.sourceChange&&this.executionCount!==null){this._setDirty(this._executedCode!==this.sharedModel.getSource().trim())}}_setDirty(e){if(!e){this._executedCode=this.sharedModel.getSource().trim()}if(e!==this._isDirty){this._isDirty=e;this.stateChanged.emit({name:"isDirty",oldValue:!e,newValue:e})}}}(function(e){class t{createOutputArea(e){return new R.OutputAreaModel(e)}}e.ContentFactory=t;e.defaultContentFactory=new t})(q||(q={}));var $=n(21760);const K="jp-Placeholder";const J="jp-Placeholder-prompt jp-InputPrompt";const G="jp-Placeholder-prompt jp-OutputPrompt";const Y="jp-Placeholder-content";const X="jp-InputPlaceholder";const Q="jp-OutputPlaceholder";class Z extends w.Widget{constructor(e){var t,n,i;const s=document.createElement("div");super({node:s});const o=((t=e.translator)!==null&&t!==void 0?t:$.nullTranslator).load("jupyterlab");const r=document.createElement("div");r.className=(n=e.promptClass)!==null&&n!==void 0?n:"";s.insertAdjacentHTML("afterbegin",r.outerHTML);this._cell=document.createElement("div");this._cell.classList.add(Y);this._cell.title=o.__("Click to expand");const a=this._cell.appendChild(document.createElement("div"));a.classList.add("jp-Placeholder-contentContainer");this._textContent=a.appendChild(document.createElement("span"));this._textContent.className="jp-PlaceholderText";this._textContent.innerText=(i=e.text)!==null&&i!==void 0?i:"";s.appendChild(this._cell);h.ellipsesIcon.element({container:a.appendChild(document.createElement("span")),className:"jp-MoreHorizIcon",elementPosition:"center",height:"auto",width:"32px"});this.addClass(K);this._callback=e.callback}set text(e){this._textContent.innerText=e}get text(){return this._textContent.innerText}onAfterAttach(e){super.onAfterAttach(e);this.node.addEventListener("click",this._callback)}onBeforeDetach(e){this.node.removeEventListener("click",this._callback);super.onBeforeDetach(e)}}class ee extends Z{constructor(e){super({...e,promptClass:J});this.addClass(X)}}class te extends Z{constructor(e){super({...e,promptClass:G});this.addClass(Q)}}var ne=n(84878);var ie=n(66646);var se=n(99264);const oe="jp-mod-selected";class re extends ne.EditorSearchProvider{constructor(e){super();this.cell=e;if(!this.cell.inViewport&&!this.cell.editor){void(0,ie.signalToPromise)(e.inViewportChanged).then((([,e])=>{if(e){this.cmHandler.setEditor(this.editor)}}))}}get editor(){return this.cell.editor}get model(){return this.cell.model}}class ae extends re{constructor(e){super(e);this.currentProviderIndex=-1;this.outputsProvider=[];const t=this.cell.outputArea;this._onOutputsChanged(t,t.widgets.length).catch((e=>{console.error(`Failed to initialize search on cell outputs.`,e)}));t.outputLengthChanged.connect(this._onOutputsChanged,this);t.disposed.connect((()=>{t.outputLengthChanged.disconnect(this._onOutputsChanged)}),this)}get matchesCount(){if(!this.isActive){return 0}return super.matchesCount+this.outputsProvider.reduce(((e,t)=>{var n;return e+((n=t.matchesCount)!==null&&n!==void 0?n:0)}),0)}async clearHighlight(){await super.clearHighlight();await Promise.all(this.outputsProvider.map((e=>e.clearHighlight())))}dispose(){if(this.isDisposed){return}super.dispose();this.outputsProvider.map((e=>{e.dispose()}));this.outputsProvider.length=0}async highlightNext(e,t){var n;const i=(n=t===null||t===void 0?void 0:t.from)!==null&&n!==void 0?n:"";if(this.matchesCount===0||i==="previous-match"&&this.currentIndex!==null&&this.currentIndex+1>=this.cmHandler.matches.length||!this.isActive){this.currentIndex=null}else{if(this.currentProviderIndex===-1){const n=await super.highlightNext(e,t);if(n){this.currentIndex=this.cmHandler.currentIndex;return n}else{this.currentProviderIndex=0}}while(this.currentProviderIndex<this.outputsProvider.length){const e=this.outputsProvider[this.currentProviderIndex];const t=await e.highlightNext(false);if(t){this.currentIndex=super.matchesCount+this.outputsProvider.slice(0,this.currentProviderIndex).reduce(((e,t)=>{var n;return e+=(n=t.matchesCount)!==null&&n!==void 0?n:0}),0)+e.currentMatchIndex;return t}else{this.currentProviderIndex+=1}}this.currentProviderIndex=-1;this.currentIndex=null;return undefined}}async highlightPrevious(){if(this.matchesCount===0||!this.isActive){this.currentIndex=null}else{if(this.currentIndex===null){this.currentProviderIndex=this.outputsProvider.length-1}while(this.currentProviderIndex>=0){const e=this.outputsProvider[this.currentProviderIndex];const t=await e.highlightPrevious(false);if(t){this.currentIndex=super.matchesCount+this.outputsProvider.slice(0,this.currentProviderIndex).reduce(((e,t)=>{var n;return e+=(n=t.matchesCount)!==null&&n!==void 0?n:0}),0)+e.currentMatchIndex;return t}else{this.currentProviderIndex-=1}}const e=await super.highlightPrevious();if(e){this.currentIndex=this.cmHandler.currentIndex;return e}else{this.currentIndex=null;return undefined}}}async startQuery(e,t){await super.startQuery(e,t);if((t===null||t===void 0?void 0:t.output)!==false&&this.isActive){await Promise.all(this.outputsProvider.map((t=>t.startQuery(e))))}}async endQuery(){var e;await super.endQuery();if(((e=this.filters)===null||e===void 0?void 0:e.output)!==false&&this.isActive){await Promise.all(this.outputsProvider.map((e=>e.endQuery())))}}async replaceAllMatches(e,t){if(this.model.getMetadata("editable")===false)return Promise.resolve(false);const n=await super.replaceAllMatches(e,t);return n}async replaceCurrentMatch(e,t,n){if(this.model.getMetadata("editable")===false)return Promise.resolve(false);const i=await super.replaceCurrentMatch(e,t,n);return i}async _onOutputsChanged(e,t){var n;this.outputsProvider.forEach((e=>{e.dispose()}));this.outputsProvider.length=0;this.currentProviderIndex=-1;this.outputsProvider=this.cell.outputArea.widgets.map((e=>new se.GenericSearchProvider(e)));if(this.isActive&&this.query&&((n=this.filters)===null||n===void 0?void 0:n.output)!==false){await Promise.all([this.outputsProvider.map((e=>{void e.startQuery(this.query)}))])}this._stateChanged.emit()}}class le extends re{constructor(e){super(e);this._unrenderedByHighlight=false;this.renderedProvider=new se.GenericSearchProvider(e.renderer)}async clearHighlight(){await super.clearHighlight();await this.renderedProvider.clearHighlight()}dispose(){if(this.isDisposed){return}super.dispose();this.renderedProvider.dispose()}async endQuery(){await super.endQuery();await this.renderedProvider.endQuery()}async highlightNext(e=true,t){let n=undefined;if(!this.isActive){return n}const i=this.cell;if(i.rendered&&this.matchesCount>0){this._unrenderedByHighlight=true;const e=(0,ie.signalToPromise)(i.renderedChanged);i.rendered=false;await e}n=await super.highlightNext(e,t);return n}async highlightPrevious(){let e=undefined;const t=this.cell;if(t.rendered&&this.matchesCount>0){this._unrenderedByHighlight=true;const e=(0,ie.signalToPromise)(t.renderedChanged);t.rendered=false;await e}e=await super.highlightPrevious();return e}async startQuery(e,t){await super.startQuery(e,t);const n=this.cell;if(n.rendered){this.onRenderedChanged(n,n.rendered)}n.renderedChanged.connect(this.onRenderedChanged,this)}async replaceAllMatches(e,t){if(this.model.getMetadata("editable")===false)return Promise.resolve(false);const n=await super.replaceAllMatches(e,t);if(this.cell.rendered){this.cell.update()}return n}async replaceCurrentMatch(e,t,n){if(this.model.getMetadata("editable")===false)return Promise.resolve(false);const i=await super.replaceCurrentMatch(e,t,n);return i}onRenderedChanged(e,t){var n;if(!this._unrenderedByHighlight){this.currentIndex=null}this._unrenderedByHighlight=false;if(this.isActive){if(t){void this.renderedProvider.startQuery(this.query)}else{(n=e.editor)===null||n===void 0?void 0:n.setCursorPosition({column:0,line:0});void this.renderedProvider.endQuery()}}}}function de(e){if(e.isPlaceholder()){return new re(e)}switch(e.model.type){case"code":return new ae(e);case"markdown":return new le(e);default:return new re(e)}}var ce=n(22819);var he=n(48287);var ue=n(61314);var pe=n(72130);var me=n(5592);var ge=n(34236);var fe=n(42856);var ve=n(26568);const _e="jp-CellResizeHandle";const be="jp-mod-resizedCell";class ye extends w.Widget{constructor(e){super();this.targetNode=e;this._isActive=false;this._isDragging=false;this.sizeChanged=new P.Signal(this);this.addClass(_e);this._resizer=new ve.Throttler((e=>this._resize(e)),50)}dispose(){this._resizer.dispose();super.dispose()}handleEvent(e){var t,n;switch(e.type){case"dblclick":(t=this.targetNode.parentNode)===null||t===void 0?void 0:t.childNodes.forEach((e=>{e.classList.remove(be)}));document.documentElement.style.setProperty("--jp-side-by-side-output-size",`1fr`);this._isActive=false;break;case"mousedown":this._isDragging=true;if(!this._isActive){(n=this.targetNode.parentNode)===null||n===void 0?void 0:n.childNodes.forEach((e=>{e.classList.add(be)}));this._isActive=true}window.addEventListener("mousemove",this);window.addEventListener("mouseup",this);break;case"mousemove":{if(this._isActive&&this._isDragging){void this._resizer.invoke(e)}break}case"mouseup":this._isDragging=false;window.removeEventListener("mousemove",this);window.removeEventListener("mouseup",this);break;default:break}}onAfterAttach(e){this.node.addEventListener("dblclick",this);this.node.addEventListener("mousedown",this);super.onAfterAttach(e)}onBeforeDetach(e){this.node.removeEventListener("dblclick",this);this.node.removeEventListener("mousedown",this);super.onBeforeDetach(e)}_resize(e){const{width:t,x:n}=this.targetNode.getBoundingClientRect();const i=e.clientX-n;const s=t/i-1;if(0<s){const e=Math.max(Math.min(Math.abs(s),50),.05);document.documentElement.style.setProperty("--jp-side-by-side-output-size",`${e}fr`);this.sizeChanged.emit(e)}}}const we="jp-Cell";const Ce="jp-Cell-header";const xe="jp-Cell-footer";const Se="jp-Cell-inputWrapper";const ke="jp-Cell-outputWrapper";const je="jp-Cell-inputArea";const Ie="jp-Cell-outputArea";const Ee="jp-Cell-inputCollapser";const Te="jp-Cell-outputCollapser";const Me="jp-mod-dirty";const De="jp-CodeCell";const Ae="jp-MarkdownCell";const Pe="jp-MarkdownOutput";const Le="jp-MarkdownHeadingCollapsed";const Re="jp-collapseHeadingButton";const Ne="jp-showHiddenCellsButton";const Oe="jp-RawCell";const Be="jp-mod-rendered";const Fe="jp-mod-noOutputs";const ze="Type Markdown and LaTeX: $ ^2 $";const He=1e3;const We="application/x-jupyter-icontentsrich";class Ve extends w.Widget{constructor(e){var t,n,i,s;super();this.prompt="";this._displayChanged=new P.Signal(this);this._scrollRequested=new P.Signal(this);this._scrollHandlerExtension=ce.EditorView.scrollHandler.of(((e,t,n)=>{const i=this._inViewport!==null;const s=i&&!this._inViewport;this._scrollRequested.emit({defaultPrevented:s,scrollWithinCell:()=>{e.dispatch({effects:ce.EditorView.scrollIntoView(t,n)})}});return s}));this._editorConfig={};this._editorExtensions=[];this._inputHidden=false;this._inViewportChanged=new P.Signal(this);this._readOnly=false;this._ready=new me.PromiseDelegate;this._resizeDebouncer=new ve.Debouncer((()=>{this._displayChanged.emit()}),0);this._syncCollapse=false;this._syncEditable=false;this.addClass(we);const o=this._model=e.model;this.contentFactory=e.contentFactory;this.layout=(t=e.layout)!==null&&t!==void 0?t:new w.PanelLayout;this.translator=(n=e.translator)!==null&&n!==void 0?n:$.nullTranslator;this._editorConfig={searchWithCM:false,...e.editorConfig};this._editorExtensions=(i=e.editorExtensions)!==null&&i!==void 0?i:[];this._editorExtensions.push(this._scrollHandlerExtension);this._placeholder=true;this._inViewport=null;this.placeholder=(s=e.placeholder)!==null&&s!==void 0?s:true;o.metadataChanged.connect(this.onMetadataChanged,this)}initializeState(){this.loadCollapseState();this.loadEditableState();return this}get displayChanged(){return this._displayChanged}get inViewport(){var e;return(e=this._inViewport)!==null&&e!==void 0?e:false}set inViewport(e){if(this._inViewport!==e){this._inViewport=e;this._inViewportChanged.emit(this._inViewport)}}get inViewportChanged(){return this._inViewportChanged}get placeholder(){return this._placeholder}set placeholder(e){if(this._placeholder!==e&&e===false){this.initializeDOM();this._placeholder=e;this._ready.resolve()}}get promptNode(){if(this.placeholder){return null}if(!this._inputHidden){return this._input.promptNode}else{return this._inputPlaceholder.node.firstElementChild}}get editorWidget(){var e,t;return(t=(e=this._input)===null||e===void 0?void 0:e.editorWidget)!==null&&t!==void 0?t:null}get editor(){var e,t;return(t=(e=this._input)===null||e===void 0?void 0:e.editor)!==null&&t!==void 0?t:null}get editorConfig(){return this._editorConfig}get headings(){return new Array}get model(){return this._model}get inputArea(){return this._input}get readOnly(){return this._readOnly}set readOnly(e){if(e===this._readOnly){return}this._readOnly=e;if(this.syncEditable){this.saveEditableState()}this.update()}isPlaceholder(){return this.placeholder}saveEditableState(){const{sharedModel:e}=this.model;const t=e.getMetadata("editable");if(this.readOnly&&t===false||!this.readOnly&&t===undefined){return}if(this.readOnly){e.setMetadata("editable",false)}else{e.deleteMetadata("editable")}}loadEditableState(){this.readOnly=this.model.sharedModel.getMetadata("editable")===false}get ready(){return this._ready.promise}setPrompt(e){return this._setPrompt(e)}_setPrompt(e){var t;this.prompt=e;(t=this._input)===null||t===void 0?void 0:t.setPrompt(e)}get inputHidden(){return this._inputHidden}set inputHidden(e){var t;if(this._inputHidden===e){return}if(!this.placeholder){const n=this._inputWrapper.layout;if(e){this._input.parent=null;if(this._inputPlaceholder){this._inputPlaceholder.text=(t=this.model.sharedModel.getSource().split("\n"))===null||t===void 0?void 0:t[0]}n.addWidget(this._inputPlaceholder)}else{this._inputPlaceholder.parent=null;n.addWidget(this._input)}}this._inputHidden=e;if(this.syncCollapse){this.saveCollapseState()}this.handleInputHidden(e)}saveCollapseState(){const e={...this.model.getMetadata("jupyter")};if(this.inputHidden&&e.source_hidden===true||!this.inputHidden&&e.source_hidden===undefined){return}if(this.inputHidden){e.source_hidden=true}else{delete e.source_hidden}if(Object.keys(e).length===0){this.model.deleteMetadata("jupyter")}else{this.model.setMetadata("jupyter",e)}}loadCollapseState(){var e;const t=(e=this.model.getMetadata("jupyter"))!==null&&e!==void 0?e:{};this.inputHidden=!!t.source_hidden}handleInputHidden(e){return}get syncCollapse(){return this._syncCollapse}set syncCollapse(e){if(this._syncCollapse===e){return}this._syncCollapse=e;if(e){this.loadCollapseState()}}get syncEditable(){return this._syncEditable}set syncEditable(e){if(this._syncEditable===e){return}this._syncEditable=e;if(e){this.loadEditableState()}}clone(){const e=this.constructor;return new e({model:this.model,contentFactory:this.contentFactory,placeholder:false,translator:this.translator})}dispose(){if(this.isDisposed){return}this._resizeDebouncer.dispose();this._input=null;this._model=null;this._inputWrapper=null;this._inputPlaceholder=null;super.dispose()}updateEditorConfig(e){this._editorConfig={...this._editorConfig,...e};if(this.editor){this.editor.setBaseOptions(this._editorConfig)}}get scrollRequested(){return this._scrollRequested}initializeDOM(){if(!this.placeholder){return}const e=this.contentFactory;const t=this._model;const n=e.createCellHeader();n.addClass(Ce);this.layout.addWidget(n);const i=this._inputWrapper=new w.Panel;i.addClass(Se);const s=new b;s.addClass(Ee);const o=this._input=new D({model:t,contentFactory:e,editorOptions:this.getEditorOptions()});o.addClass(je);i.addWidget(s);i.addWidget(o);this.layout.addWidget(i);this._inputPlaceholder=new ee({callback:()=>{this.inputHidden=!this.inputHidden},text:o.model.sharedModel.getSource().split("\n")[0],translator:this.translator});o.model.contentChanged.connect(((e,t)=>{var n;if(this._inputPlaceholder&&this.inputHidden){this._inputPlaceholder.text=(n=e.sharedModel.getSource().split("\n"))===null||n===void 0?void 0:n[0]}}));if(this.inputHidden){o.parent=null;i.layout.addWidget(this._inputPlaceholder)}const r=this.contentFactory.createCellFooter();r.addClass(xe);this.layout.addWidget(r)}getEditorOptions(){return{config:this.editorConfig,extensions:this._editorExtensions}}onBeforeAttach(e){if(this.placeholder){this.placeholder=false}}onAfterAttach(e){this.update()}onActivateRequest(e){var t;(t=this.editor)===null||t===void 0?void 0:t.focus()}onResize(e){void this._resizeDebouncer.invoke()}onUpdateRequest(e){var t,n;if(!this._model){return}if(((t=this.editor)===null||t===void 0?void 0:t.getOption("readOnly"))!==this._readOnly){(n=this.editor)===null||n===void 0?void 0:n.setOption("readOnly",this._readOnly)}}onContentChanged(){var e;if(this.inputHidden&&this._inputPlaceholder){this._inputPlaceholder.text=(e=this.model.sharedModel.getSource().split("\n"))===null||e===void 0?void 0:e[0]}}onMetadataChanged(e,t){switch(t.key){case"jupyter":if(this.syncCollapse){this.loadCollapseState()}break;case"editable":if(this.syncEditable){this.loadEditableState()}break;default:break}}}(function(e){let t;(function(e){e[e["HTML"]=0]="HTML";e[e["Markdown"]=1]="Markdown"})(t=e.HeadingType||(e.HeadingType={}));class n{constructor(e){this._editorFactory=e.editorFactory}get editorFactory(){return this._editorFactory}createCellHeader(){return new S}createCellFooter(){return new k}createInputPrompt(){return new A}createOutputPrompt(){return new R.OutputPrompt}createStdin(e){return new R.Stdin(e)}}e.ContentFactory=n})(Ve||(Ve={}));class Ue extends w.PanelLayout{onBeforeAttach(e){let t=true;const n=this.parent.node.firstElementChild;for(const i of this){if(n){if(i.node===n){t=false}else{fe.MessageLoop.sendMessage(i,e);if(t){this.parent.node.insertBefore(i.node,n)}else{this.parent.node.appendChild(i.node)}if(!this.parent.isHidden){i.setFlag(w.Widget.Flag.IsVisible)}fe.MessageLoop.sendMessage(i,w.Widget.Msg.AfterAttach)}}}}onAfterDetach(e){for(const t of this){if(!t.hasClass(ke)&&t.node.isConnected){fe.MessageLoop.sendMessage(t,w.Widget.Msg.BeforeDetach);this.parent.node.removeChild(t.node);fe.MessageLoop.sendMessage(t,e)}}}}class qe extends Ve{constructor(e){var t;super({layout:new Ue,...e,placeholder:true});this._detectCaretMovementInOuput=e=>{const t=this._inViewport!==null;const n=t&&!this._inViewport;const i=e.target;if(!i||!(i instanceof HTMLElement)){return}if(this._lastTarget){this._lastTarget.removeEventListener("selectionchange",this._lastOnCaretMovedHandler);document.removeEventListener("selectionchange",this._lastOnCaretMovedHandler)}const s=()=>{this._scrollRequested.emit({scrollWithinCell:({scroller:e})=>{u.ElementExt.scrollIntoViewIfNeeded(e,i)},defaultPrevented:n})};this._lastTarget=i;this._lastOnCaretMovedHandler=s;i.addEventListener("selectionchange",s,{once:true});document.addEventListener("selectionchange",s,{once:true});setTimeout((()=>{i.removeEventListener("selectionchange",s);document.removeEventListener("selectionchange",s)}),250)};this._headingsCache=null;this._outputHidden=false;this._outputWrapper=null;this._outputPlaceholder=null;this._syncScrolled=false;this._lastTarget=null;this._lastOutputHeight="";this.addClass(De);const n=this.translator.load("jupyterlab");const i=this._rendermime=e.rendermime;const s=this.contentFactory;const o=this.model;this.maxNumberOutputs=e.maxNumberOutputs;const r=o.outputs.length===0?n.__("Code Cell Content"):n.__("Code Cell Content with Output");this.node.setAttribute("aria-label",r);const a=this._output=new R.OutputArea({model:this.model.outputs,rendermime:i,contentFactory:s,maxNumberOutputs:this.maxNumberOutputs,translator:this.translator,promptOverlay:true,inputHistoryScope:e.inputHistoryScope,showInputPlaceholder:e.showInputPlaceholder});a.node.addEventListener("keydown",this._detectCaretMovementInOuput);a.addClass(Ie);a.toggleScrolling.connect((()=>{this.outputsScrolled=!this.outputsScrolled}));a.initialize.connect((()=>{this.updatePromptOverlayIcon()}));this.placeholder=(t=e.placeholder)!==null&&t!==void 0?t:true;o.outputs.changed.connect(this.onOutputChanged,this);o.outputs.stateChanged.connect(this.onOutputChanged,this);o.stateChanged.connect(this.onStateChanged,this)}initializeDOM(){if(!this.placeholder){return}super.initializeDOM();this._updatePrompt();const e=this._outputWrapper=new w.Panel;e.addClass(ke);const t=new y;t.addClass(Te);e.addWidget(t);if(this.model.outputs.length===0){this.addClass(Fe)}this._output.outputLengthChanged.connect(this._outputLengthHandler,this);e.addWidget(this._output);const n=this.layout;const i=new ye(this.node);i.sizeChanged.connect(this._sizeChangedHandler,this);n.insertWidget(n.widgets.length-1,i);n.insertWidget(n.widgets.length-1,e);if(this.model.isDirty){this.addClass(Me)}this._outputPlaceholder=new te({callback:()=>{this.outputHidden=!this.outputHidden},text:this.getOutputPlaceholderText(),translator:this.translator});const s=e.layout;if(this.outputHidden){s.removeWidget(this._output);s.addWidget(this._outputPlaceholder);if(this.inputHidden&&!e.isHidden){this._outputWrapper.hide()}}const o=this.translator.load("jupyterlab");const r=this.model.outputs.length===0?o.__("Code Cell Content"):o.__("Code Cell Content with Output");this.node.setAttribute("aria-label",r)}getOutputPlaceholderText(){var e;const t=this.model.outputs.get(0);const n=t===null||t===void 0?void 0:t.data;if(!n){return undefined}const i=["text/html","image/svg+xml","application/pdf","text/markdown","text/plain","application/vnd.jupyter.stderr","application/vnd.jupyter.stdout","text"];const s=i.find((e=>{const n=t.data[e];return(Array.isArray(n)?typeof n[0]:typeof n)==="string"}));const o=t.data[s!==null&&s!==void 0?s:""];if(o!==undefined){return(e=Array.isArray(o)?o:o===null||o===void 0?void 0:o.split("\n"))===null||e===void 0?void 0:e.find((e=>e!==""))}return undefined}initializeState(){super.initializeState();this.loadScrolledState();this._updatePrompt();return this}get headings(){if(!this._headingsCache){const e=[];const t=this.model.outputs;for(let n=0;n<t.length;n++){const i=t.get(n);let s=null;let o=null;Object.keys(i.data).forEach((e=>{if(!o&&pe.TableOfContentsUtils.Markdown.isMarkdown(e)){o=e}else if(!s&&pe.TableOfContentsUtils.isHTML(e)){s=e}}));if(s){let t=i.data[s];if(typeof t!=="string"){t=t.join("\n")}e.push(...pe.TableOfContentsUtils.getHTMLHeadings(this._rendermime.sanitizer.sanitize(t)).map((e=>({...e,outputIndex:n,type:Ve.HeadingType.HTML}))))}else if(o){e.push(...pe.TableOfContentsUtils.Markdown.getHeadings(i.data[o]).map((e=>({...e,outputIndex:n,type:Ve.HeadingType.Markdown}))))}}this._headingsCache=e}return[...this._headingsCache]}get outputArea(){return this._output}get outputHidden(){return this._outputHidden}set outputHidden(e){var t;if(this._outputHidden===e){return}if(!this.placeholder){const n=this._outputWrapper.layout;if(e){n.removeWidget(this._output);n.addWidget(this._outputPlaceholder);if(this.inputHidden&&!this._outputWrapper.isHidden){this._outputWrapper.hide()}if(this._outputPlaceholder){this._outputPlaceholder.text=(t=this.getOutputPlaceholderText())!==null&&t!==void 0?t:""}}else{if(this._outputWrapper.isHidden){this._outputWrapper.show()}n.removeWidget(this._outputPlaceholder);n.addWidget(this._output)}}this._outputHidden=e;if(this.syncCollapse){this.saveCollapseState()}}saveCollapseState(){this.model.sharedModel.transact((()=>{super.saveCollapseState();const e=this.model.getMetadata("collapsed");if(this.outputHidden&&e===true||!this.outputHidden&&e===undefined){return}if(this.outputHidden){this.model.setMetadata("collapsed",true)}else{this.model.deleteMetadata("collapsed")}}),false,"silent-change")}loadCollapseState(){super.loadCollapseState();this.outputHidden=!!this.model.getMetadata("collapsed")}get outputsScrolled(){return this._outputsScrolled}set outputsScrolled(e){this.toggleClass("jp-mod-outputsScrolled",e);this._outputsScrolled=e;if(this.syncScrolled){this.saveScrolledState()}this.updatePromptOverlayIcon()}updatePromptOverlayIcon(){var e;const t=he.DOMUtils.findElement(this.node,"jp-OutputArea-promptOverlay");if(!t){return}const n=16+4+4;if(t.clientHeight<=n){(e=t.firstChild)===null||e===void 0?void 0:e.remove();return}let i;if(this._outputsScrolled){h.expandIcon.element({container:t});i="Expand Output"}else{h.collapseIcon.element({container:t});i="Collapse Output"}const s=this.translator.load("jupyterlab");t.title=s.__(i)}saveScrolledState(){const e=this.model.getMetadata("scrolled");if(this.outputsScrolled&&e===true||!this.outputsScrolled&&e===undefined){return}if(this.outputsScrolled){this.model.setMetadata("scrolled",true)}else{this.outputArea.node.style.height="";this.model.deleteMetadata("scrolled")}}loadScrolledState(){if(this.model.getMetadata("scrolled")==="auto"){this.outputsScrolled=false}else{this.outputsScrolled=!!this.model.getMetadata("scrolled")}}get syncScrolled(){return this._syncScrolled}set syncScrolled(e){if(this._syncScrolled===e){return}this._syncScrolled=e;if(e){this.loadScrolledState()}}handleInputHidden(e){if(this.placeholder){return}if(!e&&this._outputWrapper.isHidden){this._outputWrapper.show()}else if(e&&!this._outputWrapper.isHidden&&this._outputHidden){this._outputWrapper.hide()}}clone(){const e=this.constructor;return new e({model:this.model,contentFactory:this.contentFactory,rendermime:this._rendermime,placeholder:false,translator:this.translator})}cloneOutputArea(){return new R.SimplifiedOutputArea({model:this.model.outputs,contentFactory:this.contentFactory,rendermime:this._rendermime})}dispose(){if(this.isDisposed){return}this._output.outputLengthChanged.disconnect(this._outputLengthHandler,this);this._output.node.removeEventListener("keydown",this._detectCaretMovementInOuput);this._rendermime=null;this._output=null;this._outputWrapper=null;this._outputPlaceholder=null;super.dispose()}onStateChanged(e,t){switch(t.name){case"executionCount":if(t.newValue!==null){this.model.executionState="idle"}this._updatePrompt();break;case"executionState":this._updatePrompt();break;case"isDirty":if(e.isDirty){this.addClass(Me)}else{this.removeClass(Me)}break;default:break}}onOutputChanged(){var e;this._headingsCache=null;if(this._outputPlaceholder&&this.outputHidden){this._outputPlaceholder.text=(e=this.getOutputPlaceholderText())!==null&&e!==void 0?e:""}this.updatePromptOverlayIcon();const t=this.outputArea.node.style.height;if(this.model.outputs.length===0&&t!==""){this._lastOutputHeight=t;this.outputArea.node.style.height=""}else if(this.model.outputs.length>0&&t===""){this.outputArea.node.style.height=this._lastOutputHeight}}onMetadataChanged(e,t){switch(t.key){case"scrolled":if(this.syncScrolled){this.loadScrolledState()}break;case"collapsed":if(this.syncCollapse){this.loadCollapseState()}break;default:break}super.onMetadataChanged(e,t)}_updatePrompt(){let e;if(this.model.executionState=="running"){e="*"}else{e=`${this.model.executionCount||""}`}this._setPrompt(e)}_outputLengthHandler(e,t){const n=t===0?true:false;this.toggleClass(Fe,n);const i=this.translator.load("jupyterlab");const s=n?i.__("Code Cell Content"):i.__("Code Cell Content with Output");this.node.setAttribute("aria-label",s)}_sizeChangedHandler(e){this._displayChanged.emit()}}(function(e){async function t(e,t,n){var i;const s=e.model;const o=s.sharedModel.getSource();if(!o.trim()||!((i=t.session)===null||i===void 0?void 0:i.kernel)){s.sharedModel.transact((()=>{s.clearExecution()}),false,"silent-change");return}const r={cellId:s.sharedModel.getId()};n={...s.metadata,...n,...r};const{recordTiming:a}=n;s.sharedModel.transact((()=>{s.clearExecution();e.outputHidden=false}),false,"silent-change");s.executionState="running";s.trusted=true;let l;try{const i=R.OutputArea.execute(o,e.outputArea,t,n);if(a){const t=e=>{let t;switch(e.header.msg_type){case"status":t=`status.${e.content.execution_state}`;break;case"execute_input":t="execute_input";break;default:return true}const n=e.header.date||(new Date).toISOString();const i=Object.assign({},s.getMetadata("execution"));i[`iopub.${t}`]=n;s.setMetadata("execution",i);return true};e.outputArea.future.registerMessageHook(t)}else{s.deleteMetadata("execution")}l=e.outputArea.future;const r=await i;s.executionCount=r.content.execution_count;if(a){const e=Object.assign({},s.getMetadata("execution"));const t=r.metadata.started;if(t){e["shell.execute_reply.started"]=t}const n=r.header.date;e["shell.execute_reply"]=n||(new Date).toISOString();s.setMetadata("execution",e)}return r}catch(d){if(l&&!e.isDisposed&&e.outputArea.future===l){e.model.executionState="idle";if(a&&l.isDisposed){const e=Object.assign({},s.getMetadata("execution"));e["execution_failed"]=(new Date).toISOString();s.setMetadata("execution",e)}}throw d}}e.execute=t})(qe||(qe={}));class $e extends Ve{handleEvent(e){switch(e.type){case"lm-dragover":this._evtDragOver(e);break;case"lm-drop":this._evtDrop(e);break;default:break}}getEditorOptions(){var e,t;const n=(e=super.getEditorOptions())!==null&&e!==void 0?e:{};n.extensions=[...(t=n.extensions)!==null&&t!==void 0?t:[],ce.EditorView.domEventHandlers({dragenter:e=>{e.preventDefault()},dragover:e=>{e.preventDefault()},drop:e=>{this._evtNativeDrop(e)},paste:e=>{this._evtPaste(e)}})];return n}onAfterAttach(e){super.onAfterAttach(e);const t=this.node;t.addEventListener("lm-dragover",this);t.addEventListener("lm-drop",this)}onBeforeDetach(e){const t=this.node;t.removeEventListener("lm-dragover",this);t.removeEventListener("lm-drop",this);super.onBeforeDetach(e)}_evtDragOver(e){const t=(0,ge.some)(ue.imageRendererFactory.mimeTypes,(t=>{if(!e.mimeData.hasData(We)){return false}const n=e.mimeData.getData(We);return n.model.mimetype===t}));if(!t){return}e.preventDefault();e.stopPropagation();e.dropAction=e.proposedAction}_evtPaste(e){var t;const n=(t=this.model.getMetadata("editable"))!==null&&t!==void 0?t:true;if(e.clipboardData&&n){const t=e.clipboardData.items;for(let n=0;n<t.length;n++){if(t[n].type==="text/plain"){if(n<t.length-1&&t[n+1].kind==="file"){continue}t[n].getAsString((e=>{var t,n;(n=(t=this.editor).replaceSelection)===null||n===void 0?void 0:n.call(t,e.replace(/\r\n/g,"\n").replace(/\r/g,"\n"))}))}this._attachFiles(e.clipboardData.items)}}e.preventDefault()}_evtNativeDrop(e){if(e.dataTransfer){this._attachFiles(e.dataTransfer.items)}e.preventDefault()}_evtDrop(e){const t=e.mimeData.types().filter((t=>{if(t===We){const t=e.mimeData.getData(We);return ue.imageRendererFactory.mimeTypes.indexOf(t.model.mimetype)!==-1}return ue.imageRendererFactory.mimeTypes.indexOf(t)!==-1}));if(t.length===0){return}e.preventDefault();e.stopPropagation();if(e.proposedAction==="none"){e.dropAction="none";return}e.dropAction="copy";for(const n of t){if(n===We){const{model:t,withContent:n}=e.mimeData.getData(We);if(t.type==="file"){const e=this._generateURI(t.name);this.updateCellSourceWithAttachment(t.name,e);void n().then((t=>{this.model.attachments.set(e,{[t.mimetype]:t.content})}))}}else{const t=this._generateURI();this.model.attachments.set(t,{[n]:e.mimeData.getData(n)});this.updateCellSourceWithAttachment(t,t)}}}_attachFiles(e){for(let t=0;t<e.length;t++){const n=e[t];if(n.kind==="file"){const e=n.getAsFile();if(e){this._attachFile(e)}}}}_attachFile(e){const t=new FileReader;t.onload=n=>{const{href:i,protocol:s}=ie.URLExt.parse(t.result);if(s!=="data:"){return}const o=/([\w+\/\+]+)?(?:;(charset=[\w\d-]*|base64))?,(.*)/;const r=o.exec(i);if(!r||r.length!==4){return}const a=r[1];const l=r[3];const d={[a]:l};const c=this._generateURI(e.name);if(a.startsWith("image/")){this.model.attachments.set(c,d);this.updateCellSourceWithAttachment(e.name,c)}};t.onerror=t=>{console.error(`Failed to attach ${e.name}`+t)};t.readAsDataURL(e)}_generateURI(e=""){const t=e.lastIndexOf(".");return t!==-1?me.UUID.uuid4().concat(e.substring(t)):me.UUID.uuid4()}}class Ke extends $e{constructor(e){var t,n,i,s;super({...e,placeholder:true});this._headingsCache=null;this._headingCollapsedChanged=new P.Signal(this);this._prevText="";this._rendered=true;this._renderedChanged=new P.Signal(this);this._showEditorForReadOnlyMarkdown=true;this.addClass(Ae);this.model.contentChanged.connect(this.onContentChanged,this);const o=this.translator.load("jupyterlab");this.node.setAttribute("aria-label",o.__("Markdown Cell Content"));this._rendermime=e.rendermime.clone({resolver:new L.AttachmentsResolver({parent:(t=e.rendermime.resolver)!==null&&t!==void 0?t:undefined,model:this.model.attachments})});this._renderer=this._rendermime.createRenderer("text/markdown");this._renderer.addClass(Pe);this._headingCollapsed=(n=this.model.getMetadata(Le))!==null&&n!==void 0?n:false;this._showEditorForReadOnlyMarkdown=(i=e.showEditorForReadOnlyMarkdown)!==null&&i!==void 0?i:Ke.defaultShowEditorForReadOnlyMarkdown;this.placeholder=(s=e.placeholder)!==null&&s!==void 0?s:true;this._monitor=new ie.ActivityMonitor({signal:this.model.contentChanged,timeout:He});this.ready.then((()=>{if(this.isDisposed){return}this._monitor.activityStopped.connect((()=>{if(this._rendered){this.update()}}),this)})).catch((e=>{console.error("Failed to be ready",e)}))}get headingInfo(){const e=this.headings;if(e.length>0){const{text:t,level:n}=e.reduce(((e,t)=>e.level<=t.level?e:t),e[0]);return{text:t,level:n}}else{return{text:"",level:-1}}}get headings(){if(!this._headingsCache){const e=pe.TableOfContentsUtils.Markdown.getHeadings(this.model.sharedModel.getSource());this._headingsCache=e.map((e=>({...e,type:Ve.HeadingType.Markdown})))}return[...this._headingsCache]}get headingCollapsed(){return this._headingCollapsed}set headingCollapsed(e){var t;if(this._headingCollapsed!==e){this._headingCollapsed=e;if(e){this.model.setMetadata(Le,e)}else if(this.model.getMetadata(Le)!=="undefined"){this.model.deleteMetadata(Le)}const n=(t=this.inputArea)===null||t===void 0?void 0:t.promptNode.getElementsByClassName(Re)[0];if(n){if(e){n.classList.add("jp-mod-collapsed")}else{n.classList.remove("jp-mod-collapsed")}}this.renderCollapseButtons(this._renderer);this._headingCollapsedChanged.emit(this._headingCollapsed)}}get numberChildNodes(){return this._numberChildNodes}set numberChildNodes(e){this._numberChildNodes=e;this.renderCollapseButtons(this._renderer)}get headingCollapsedChanged(){return this._headingCollapsedChanged}get rendered(){return this._rendered}set rendered(e){if(this.readOnly&&this._showEditorForReadOnlyMarkdown===false){e=true}if(e===this._rendered){return}this._rendered=e;this._handleRendered().then((()=>{this._displayChanged.emit();this._renderedChanged.emit(this._rendered)})).catch((e=>{console.error("Failed to render",e)}))}get renderedChanged(){return this._renderedChanged}get showEditorForReadOnly(){return this._showEditorForReadOnlyMarkdown}set showEditorForReadOnly(e){this._showEditorForReadOnlyMarkdown=e;if(e===false){this.rendered=true}}get renderer(){return this._renderer}dispose(){if(this.isDisposed){return}this._monitor.dispose();super.dispose()}initializeDOM(){if(!this.placeholder){return}super.initializeDOM();this.renderCollapseButtons(this._renderer);this._handleRendered().catch((e=>{console.error("Failed to render",e)}))}maybeCreateCollapseButton(){var e;const{level:t}=this.headingInfo;if(t>0&&((e=this.inputArea)===null||e===void 0?void 0:e.promptNode.getElementsByClassName(Re).length)==0){let e=this.inputArea.promptNode.appendChild(document.createElement("button"));e.className=`jp-Button ${Re}`;e.setAttribute("data-heading-level",t.toString());if(this._headingCollapsed){e.classList.add("jp-mod-collapsed")}else{e.classList.remove("jp-mod-collapsed")}e.onclick=e=>{this.headingCollapsed=!this.headingCollapsed}}}maybeCreateOrUpdateExpandButton(){const e=this.node.getElementsByClassName(Ne);let t=this.translator.load("jupyterlab");let n=t._n("%1 cell hidden","%1 cells hidden",this._numberChildNodes);let i=this.headingCollapsed&&this._numberChildNodes>0&&e.length==0;if(i){const e=document.createElement("button");e.className=`jp-mod-minimal jp-Button ${Ne}`;h.addIcon.render(e);const t=document.createElement("div");t.textContent=n;e.appendChild(t);e.onclick=()=>{this.headingCollapsed=false};this.node.appendChild(e)}let s=this.headingCollapsed&&this._numberChildNodes>0&&e.length==1;if(s){e[0].childNodes[1].textContent=n}let o=!(this.headingCollapsed&&this._numberChildNodes>0);if(o){for(const t of e){this.node.removeChild(t)}}}onContentChanged(){super.onContentChanged();this._headingsCache=null}renderCollapseButtons(e){this.node.classList.toggle(Le,this._headingCollapsed);this.maybeCreateCollapseButton();this.maybeCreateOrUpdateExpandButton()}renderInput(e){this.addClass(Be);if(!this.placeholder&&!this.isDisposed){this.renderCollapseButtons(e);this.inputArea.renderInput(e)}}showEditor(){this.removeClass(Be);if(!this.placeholder&&!this.isDisposed){this.inputArea.showEditor();let e=(this.model.sharedModel.getSource().match(/^#+/g)||[""])[0].length;if(e>0){this.inputArea.editor.setCursorPosition({column:e+1,line:0},{scroll:false})}}}onUpdateRequest(e){this._handleRendered().catch((e=>{console.error("Failed to render",e)}));super.onUpdateRequest(e)}updateCellSourceWithAttachment(e,t){var n,i;const s=`![${e}](attachment:${t!==null&&t!==void 0?t:e})`;(i=(n=this.editor)===null||n===void 0?void 0:n.replaceSelection)===null||i===void 0?void 0:i.call(n,s)}async _handleRendered(){if(!this._rendered){this.showEditor()}else{await this._updateRenderedInput();if(this._rendered){this.renderInput(this._renderer)}}}_updateRenderedInput(){if(this.placeholder){return Promise.resolve()}const e=this.model;const t=e&&e.sharedModel.getSource()||ze;if(t!==this._prevText){const e=new ue.MimeModel({data:{"text/markdown":t}});this._prevText=t;return this._renderer.renderModel(e)}return Promise.resolve()}clone(){const e=this.constructor;return new e({model:this.model,contentFactory:this.contentFactory,rendermime:this._rendermime,placeholder:false,translator:this.translator})}}(function(e){e.defaultShowEditorForReadOnlyMarkdown=true})(Ke||(Ke={}));class Je extends Ve{constructor(e){super(e);this.addClass(Oe);const t=this.translator.load("jupyterlab");this.node.setAttribute("aria-label",t.__("Raw Cell Content"))}clone(){const e=this.constructor;return new e({model:this.model,contentFactory:this.contentFactory,placeholder:false,translator:this.translator})}}},53377:(e,t,n)=>{"use strict";var i=n(10395);var s=n(40662);var o=n(97913);var r=n(5893);var a=n(38457);var l=n(17325);var d=n(19562);var c=n(23359);var h=n(39063);var u=n(1649);var p=n(66731);var m=n(85072);var g=n.n(m);var f=n(97825);var v=n.n(f);var _=n(77659);var b=n.n(_);var y=n(55056);var w=n.n(y);var C=n(10540);var x=n.n(C);var S=n(41113);var k=n.n(S);var j=n(55717);var I={};I.styleTagTransform=k();I.setAttributes=w();I.insert=b().bind(null,"head");I.domAPI=v();I.insertStyleElement=x();var E=g()(j.A,I);const T=j.A&&j.A.locals?j.A.locals:undefined},28211:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>_});var i=n(99872);var s=n(44914);var o=n.n(s);var r=n(78464);var a=n(34236);var l=n(21760);const d="jp-CellTags";const c="jp-CellTags-Tag";const h="jp-CellTags-Applied";const u="jp-CellTags-Unapplied";const p="jp-CellTags-Holder";const m="jp-CellTags-Add";const g="jp-CellTags-Empty";class f{constructor(e,t){this._tracker=e;this._translator=t||l.nullTranslator;this._trans=this._translator.load("jupyterlab");this._editing=false}addTag(e,t){const n=e.formData;if(t&&!n.includes(t)){n.push(t);e.formContext.updateMetadata({[e.name]:n},true)}}pullTags(){var e,t;const n=(e=this._tracker)===null||e===void 0?void 0:e.currentWidget;const i=(t=n===null||n===void 0?void 0:n.model)===null||t===void 0?void 0:t.cells;if(i===undefined){return[]}const s=(0,a.reduce)(i,((e,t)=>{var n;const i=(n=t.getMetadata("tags"))!==null&&n!==void 0?n:[];return[...e,...i]}),[]);return[...new Set(s)].filter((e=>e!==""))}_emptyAddTag(e){e.value="";e.style.width="";e.classList.add(g)}_onAddTagKeyDown(e,t){const n=t.target;if(t.ctrlKey)return;if(t.key==="Enter"){this.addTag(e,n.value)}else if(t.key==="Escape"){this._emptyAddTag(n)}}_onAddTagFocus(e){if(!this._editing){e.target.blur()}}_onAddTagBlur(e){if(this._editing){this._editing=false;this._emptyAddTag(e)}}_onChange(e){if(!e.target.value){this._emptyAddTag(e.target)}else{e.target.classList.remove(g);const t=document.createElement("span");t.className=m;t.textContent=e.target.value;document.body.appendChild(t);e.target.style.setProperty("width",`calc(${t.getBoundingClientRect().width}px + var(--jp-add-tag-extra-width))`);document.body.removeChild(t)}}_onAddTagClick(e,t){const n=t.target.closest("div");const i=n===null||n===void 0?void 0:n.childNodes[0];if(!this._editing){this._editing=true;i.value="";i.focus()}else if(t.target!==i){this.addTag(e,i.value)}t.preventDefault()}_onTagClick(e,t){const n=e.formData;if(n.includes(t)){n.splice(n.indexOf(t),1)}else{n.push(t)}e.formContext.updateMetadata({[e.name]:n},true)}render(e){const t=this.pullTags();return o().createElement("div",{className:d},o().createElement("div",{className:"jp-FormGroup-fieldLabel jp-FormGroup-contentItem"},"Cell Tags"),t&&t.map(((t,n)=>o().createElement("div",{key:n,className:`${c} ${e.formData.includes(t)?h:u}`,onClick:()=>this._onTagClick(e,t)},o().createElement("div",{className:p},o().createElement("span",null,t),e.formData.includes(t)&&o().createElement(r.LabIcon.resolveReact,{icon:r.checkIcon,tag:"span",elementPosition:"center",height:"18px",width:"18px",marginLeft:"5px",marginRight:"-3px"}))))),o().createElement("div",{className:`${c} ${u}`},o().createElement("div",{className:p,onMouseDown:t=>this._onAddTagClick(e,t)},o().createElement("input",{className:`${m} ${g}`,type:"text",placeholder:this._trans.__("Add Tag"),onKeyDown:t=>this._onAddTagKeyDown(e,t),onFocus:e=>this._onAddTagFocus(e),onBlur:e=>this._onAddTagBlur(e.target),onChange:e=>{this._onChange(e)}}),o().createElement(r.LabIcon.resolveReact,{icon:r.addIcon,tag:"span",height:"18px",width:"18px",className:p}))))}}const v={id:"@jupyterlab/celltags-extension:plugin",description:"Adds the cell tags editor.",autoStart:true,requires:[i.INotebookTracker],optional:[r.IFormRendererRegistry],activate:(e,t,n)=>{if(n){const e={fieldRenderer:e=>new f(t).render(e)};n.addRenderer("@jupyterlab/celltags-extension:plugin.renderer",e)}}};const _=[v]},11114:(e,t,n)=>{"use strict";var i=n(40662);var s=n(3579);var o=n(28006);var r=n(85072);var a=n.n(r);var l=n(97825);var d=n.n(l);var c=n(77659);var h=n.n(c);var u=n(55056);var p=n.n(u);var m=n(10540);var g=n.n(m);var f=n(41113);var v=n.n(f);var _=n(96415);var b={};b.styleTagTransform=v();b.setAttributes=p();b.insert=h().bind(null,"head");b.domAPI=d();b.insertStyleElement=g();var y=a()(_.A,b);const w=_.A&&_.A.locals?_.A.locals:undefined},32069:(e,t,n)=>{"use strict";n.r(t);n.d(t,{COMPLETER_ACTIVE_CLASS:()=>k,COMPLETER_ENABLED_CLASS:()=>S,COMPLETER_LINE_BEGINNING_CLASS:()=>j,CodeEditor:()=>a,CodeEditorWrapper:()=>P,CodeViewerWidget:()=>R,IEditorMimeTypeService:()=>r,IEditorServices:()=>I,IPositionModel:()=>E,JSONEditor:()=>f,LineCol:()=>x});var i=n(95917);var s=n(97539);var o=n(2336);var r;(function(e){e.defaultMimeType="text/plain"})(r||(r={}));var a;(function(e){class t{constructor(e={}){var t,n;this.standaloneModel=false;this._isDisposed=false;this._selections=new s.ObservableMap;this._mimeType=r.defaultMimeType;this._mimeTypeChanged=new o.Signal(this);this.standaloneModel=typeof e.sharedModel==="undefined";this.sharedModel=(t=e.sharedModel)!==null&&t!==void 0?t:new i.YFile;this._mimeType=(n=e.mimeType)!==null&&n!==void 0?n:r.defaultMimeType}get mimeTypeChanged(){return this._mimeTypeChanged}get selections(){return this._selections}get mimeType(){return this._mimeType}set mimeType(e){const t=this.mimeType;if(t===e){return}this._mimeType=e;this._mimeTypeChanged.emit({name:"mimeType",oldValue:t,newValue:e})}get isDisposed(){return this._isDisposed}dispose(){if(this._isDisposed){return}this._isDisposed=true;this._selections.dispose();if(this.standaloneModel){this.sharedModel.dispose()}o.Signal.clearData(this)}}e.Model=t})(a||(a={}));var l=n(21760);var d=n(78464);var c=n(5592);var h=n(1143);const u="jp-JSONEditor";const p="jp-mod-error";const m="jp-JSONEditor-host";const g="jp-JSONEditor-header";class f extends h.Widget{constructor(e){super();this._dataDirty=false;this._inputDirty=false;this._source=null;this._originalValue=c.JSONExt.emptyObject;this._changeGuard=false;this.translator=e.translator||l.nullTranslator;this._trans=this.translator.load("jupyterlab");this.addClass(u);this.headerNode=document.createElement("div");this.headerNode.className=g;this.revertButtonNode=d.undoIcon.element({tag:"span",title:this._trans.__("Revert changes to data")});this.commitButtonNode=d.checkIcon.element({tag:"span",title:this._trans.__("Commit changes to data"),marginLeft:"8px"});this.editorHostNode=document.createElement("div");this.editorHostNode.className=m;this.headerNode.appendChild(this.revertButtonNode);this.headerNode.appendChild(this.commitButtonNode);this.node.appendChild(this.headerNode);this.node.appendChild(this.editorHostNode);const t=new a.Model({mimeType:"application/json"});t.sharedModel.changed.connect(this._onModelChanged,this);this.model=t;this.editor=e.editorFactory({host:this.editorHostNode,model:t,config:{readOnly:true}})}get source(){return this._source}set source(e){if(this._source===e){return}if(this._source){this._source.changed.disconnect(this._onSourceChanged,this)}this._source=e;this.editor.setOption("readOnly",e===null);if(e){e.changed.connect(this._onSourceChanged,this)}this._setValue()}get isDirty(){return this._dataDirty||this._inputDirty}dispose(){var e;if(this.isDisposed){return}(e=this.source)===null||e===void 0?void 0:e.dispose();this.model.dispose();this.editor.dispose();super.dispose()}handleEvent(e){switch(e.type){case"blur":this._evtBlur(e);break;case"click":this._evtClick(e);break;default:break}}onAfterAttach(e){const t=this.editorHostNode;t.addEventListener("blur",this,true);t.addEventListener("click",this,true);this.revertButtonNode.hidden=true;this.commitButtonNode.hidden=true;this.headerNode.addEventListener("click",this)}onBeforeDetach(e){const t=this.editorHostNode;t.removeEventListener("blur",this,true);t.removeEventListener("click",this,true);this.headerNode.removeEventListener("click",this)}_onSourceChanged(e,t){if(this._changeGuard){return}if(this._inputDirty||this.editor.hasFocus()){this._dataDirty=true;return}this._setValue()}_onModelChanged(e,t){if(t.sourceChange){let e=true;try{const e=JSON.parse(this.editor.model.sharedModel.getSource());this.removeClass(p);this._inputDirty=!this._changeGuard&&!c.JSONExt.deepEqual(e,this._originalValue)}catch(n){this.addClass(p);this._inputDirty=true;e=false}this.revertButtonNode.hidden=!this._inputDirty;this.commitButtonNode.hidden=!e||!this._inputDirty}}_evtBlur(e){if(!this._inputDirty&&this._dataDirty){this._setValue()}}_evtClick(e){const t=e.target;if(this.revertButtonNode.contains(t)){this._setValue()}else if(this.commitButtonNode.contains(t)){if(!this.commitButtonNode.hidden&&!this.hasClass(p)){this._changeGuard=true;this._mergeContent();this._changeGuard=false;this._setValue()}}else if(this.editorHostNode.contains(t)){this.editor.focus()}}_mergeContent(){const e=this.editor.model;const t=this._originalValue;const n=JSON.parse(e.sharedModel.getSource());const i=this.source;if(!i){return}for(const s in n){if(!c.JSONExt.deepEqual(n[s],t[s]||null)){i.set(s,n[s])}}for(const s in t){if(!(s in n)){i.delete(s)}}}_setValue(){this._dataDirty=false;this._inputDirty=false;this.revertButtonNode.hidden=true;this.commitButtonNode.hidden=true;this.removeClass(p);const e=this.editor.model;const t=this._source?this._source.toJSON():{};this._changeGuard=true;if(t===void 0){e.sharedModel.setSource(this._trans.__("No data!"));this._originalValue=c.JSONExt.emptyObject}else{const n=JSON.stringify(t,null,4);e.sharedModel.setSource(n);this._originalValue=t;if(n.length>1&&n[0]==="{"){this.editor.setCursorPosition({line:0,column:1})}}this._changeGuard=false;this.commitButtonNode.hidden=true;this.revertButtonNode.hidden=true}}var v=n(83444);var _=n(44914);var b=n.n(_);var y=n(48287);class w extends b().Component{constructor(e){super(e);this._handleChange=e=>{this.setState({value:e.currentTarget.value})};this._handleSubmit=e=>{e.preventDefault();const t=parseInt(this._textInput.value,10);if(!isNaN(t)&&isFinite(t)&&1<=t&&t<=this.props.maxLine){this.props.handleSubmit(t)}return false};this._handleFocus=()=>{this.setState({hasFocus:true})};this._handleBlur=()=>{this.setState({hasFocus:false})};this._textInput=null;this.translator=e.translator||l.nullTranslator;this._trans=this.translator.load("jupyterlab");this.state={value:"",hasFocus:false,textInputId:y.DOMUtils.createDomID()+"-line-number-input"}}componentDidMount(){this._textInput.focus()}render(){return b().createElement("div",{className:"jp-lineFormSearch"},b().createElement("form",{name:"lineColumnForm",onSubmit:this._handleSubmit,noValidate:true},b().createElement("div",{className:(0,d.classes)("jp-lineFormWrapper","lm-lineForm-wrapper",this.state.hasFocus?"jp-lineFormWrapperFocusWithin":undefined)},b().createElement("input",{type:"text",id:this.state.textInputId,className:"jp-lineFormInput",onChange:this._handleChange,onFocus:this._handleFocus,onBlur:this._handleBlur,value:this.state.value,ref:e=>{this._textInput=e}}),b().createElement("div",{className:"jp-baseLineForm jp-lineFormButtonContainer"},b().createElement(d.lineFormIcon.react,{className:"jp-baseLineForm jp-lineFormButtonIcon",elementPosition:"center"}),b().createElement("input",{type:"submit",className:"jp-baseLineForm jp-lineFormButton",value:""}))),b().createElement("label",{className:"jp-lineFormCaption",htmlFor:this.state.textInputId},this._trans.__("Go to line number between 1 and %1",this.props.maxLine))))}}function C(e){const t=e.translator||l.nullTranslator;const n=t.load("jupyterlab");const i=t=>{if(t.key==="Enter"||t.key==="Spacebar"||t.key===" "){t.preventDefault();t.stopPropagation();e.handleClick()}else{return}};return b().createElement(v.TextItem,{onClick:e.handleClick,source:n.__("Ln %1, Col %2",e.line,e.column),title:n.__("Go to line number"),tabIndex:0,onKeyDown:i})}class x extends d.VDomRenderer{constructor(e){super(new x.Model);this._popup=null;this.addClass("jp-mod-highlighted");this.translator=e||l.nullTranslator}render(){if(this.model===null){return null}else{return b().createElement(C,{line:this.model.line,column:this.model.column,translator:this.translator,handleClick:()=>this._handleClick()})}}_handleClick(){if(this._popup){this._popup.dispose()}const e=d.ReactWidget.create(b().createElement(w,{handleSubmit:e=>this._handleSubmit(e),currentLine:this.model.line,maxLine:this.model.editor.lineCount,translator:this.translator}));this._popup=(0,v.showPopup)({body:e,anchor:this,align:"right"})}_handleSubmit(e){this.model.editor.setCursorPosition({line:e-1,column:0});this._popup.dispose();this.model.editor.focus()}}(function(e){class t extends d.VDomModel{constructor(){super(...arguments);this._onSelectionChanged=()=>{const e=this._getAllState();const t=this.editor.getCursorPosition();this._line=t.line+1;this._column=t.column+1;this._triggerChange(e,this._getAllState())};this._line=1;this._column=1;this._editor=null}get editor(){return this._editor}set editor(e){var t;const n=this._editor;if((t=n===null||n===void 0?void 0:n.model)===null||t===void 0?void 0:t.selections){n.model.selections.changed.disconnect(this._onSelectionChanged)}const i=this._getAllState();this._editor=e;if(!this._editor){this._column=1;this._line=1}else{this._editor.model.selections.changed.connect(this._onSelectionChanged);const e=this._editor.getCursorPosition();this._column=e.column+1;this._line=e.line+1}this._triggerChange(i,this._getAllState())}get line(){return this._line}get column(){return this._column}_getAllState(){return[this._line,this._column]}_triggerChange(e,t){if(e[0]!==t[0]||e[1]!==t[1]){this.stateChanged.emit(void 0)}}}e.Model=t})(x||(x={}));const S="jp-mod-completer-enabled";const k="jp-mod-completer-active";const j="jp-mod-at-line-beginning";const I=new c.Token("@jupyterlab/codeeditor:IEditorServices",`A service for the text editor provider\n  for the application. Use this to create new text editors and host them in your\n  UI elements.`);const E=new c.Token("@jupyterlab/codeeditor:IPositionModel",`A service to handle an code editor cursor position.`);const T="jp-mod-has-primary-selection";const M="jp-mod-in-leading-whitespace";const D="jp-mod-dropTarget";const A=/^\s+$/;class P extends h.Widget{constructor(e){super();const{factory:t,model:n,editorOptions:i}=e;const s=this.editor=t({host:this.node,model:n,...i});s.model.selections.changed.connect(this._onSelectionsChanged,this)}get model(){return this.editor.model}dispose(){if(this.isDisposed){return}this.editor.dispose();super.dispose()}handleEvent(e){switch(e.type){case"lm-dragenter":this._evtDragEnter(e);break;case"lm-dragleave":this._evtDragLeave(e);break;case"lm-dragover":this._evtDragOver(e);break;case"lm-drop":this._evtDrop(e);break;default:break}}onActivateRequest(e){this.editor.focus()}onAfterAttach(e){super.onAfterAttach(e);const t=this.node;t.addEventListener("lm-dragenter",this);t.addEventListener("lm-dragleave",this);t.addEventListener("lm-dragover",this);t.addEventListener("lm-drop",this)}onBeforeDetach(e){const t=this.node;t.removeEventListener("lm-dragenter",this);t.removeEventListener("lm-dragleave",this);t.removeEventListener("lm-dragover",this);t.removeEventListener("lm-drop",this)}_onSelectionsChanged(){const{start:e,end:t}=this.editor.getSelection();if(e.column!==t.column||e.line!==t.line){this.addClass(T);this.removeClass(M)}else{this.removeClass(T);if(this.editor.getLine(t.line).slice(0,t.column).match(A)){this.addClass(M)}else{this.removeClass(M)}}}_evtDragEnter(e){if(this.editor.getOption("readOnly")===true){return}const t=L.findTextData(e.mimeData);if(t===undefined){return}e.preventDefault();e.stopPropagation();this.addClass("jp-mod-dropTarget")}_evtDragLeave(e){this.removeClass(D);if(this.editor.getOption("readOnly")===true){return}const t=L.findTextData(e.mimeData);if(t===undefined){return}e.preventDefault();e.stopPropagation()}_evtDragOver(e){this.removeClass(D);if(this.editor.getOption("readOnly")===true){return}const t=L.findTextData(e.mimeData);if(t===undefined){return}e.preventDefault();e.stopPropagation();e.dropAction="copy";this.addClass(D)}_evtDrop(e){if(this.editor.getOption("readOnly")===true){return}const t=L.findTextData(e.mimeData);if(t===undefined){return}const n={top:e.y,bottom:e.y,left:e.x,right:e.x};const i=this.editor.getPositionForCoordinate(n);if(i===null){return}this.removeClass(D);e.preventDefault();e.stopPropagation();if(e.proposedAction==="none"){e.dropAction="none";return}const s=this.editor.getOffsetAt(i);this.model.sharedModel.updateSource(s,s,t)}}var L;(function(e){function t(e){const t=e.types();const n=t.find((e=>e.indexOf("text")===0));if(n===undefined){return undefined}return e.getData(n)}e.findTextData=t})(L||(L={}));class R extends h.Widget{constructor(e){var t;super();this.model=e.model;const n=new P({factory:e.factory,model:this.model,editorOptions:{...e.editorOptions,config:{...(t=e.editorOptions)===null||t===void 0?void 0:t.config,readOnly:true}}});this.editor=n.editor;const i=this.layout=new h.StackedLayout;i.addWidget(n)}static createCodeViewer(e){const{content:t,mimeType:n,...i}=e;const s=new a.Model({mimeType:n});s.sharedModel.setSource(t);const o=new R({...i,model:s});o.disposed.connect((()=>{s.dispose()}));return o}get content(){return this.model.sharedModel.getSource()}get mimeType(){return this.model.mimeType}}},17325:(e,t,n)=>{"use strict";var i=n(10395);var s=n(40662);var o=n(24800);var r=n(97913);var a=n(38457);var l=n(85072);var d=n.n(l);var c=n(97825);var h=n.n(c);var u=n(77659);var p=n.n(u);var m=n(55056);var g=n.n(m);var f=n(10540);var v=n.n(f);var _=n(41113);var b=n.n(_);var y=n(9534);var w={};w.styleTagTransform=b();w.setAttributes=g();w.insert=p().bind(null,"head");w.domAPI=h();w.insertStyleElement=v();var C=d()(y.A,w);const x=y.A&&y.A.locals?y.A.locals:undefined},21699:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>T,lineColItem:()=>I});var i=n(30244);var s=n(84958);var o=n(83444);var r=n(21760);var a=n(58285);var l=n(43370);var d;(function(e){e.deleteLine="codemirror:delete-line";e.toggleBlockComment="codemirror:toggle-block-comment";e.toggleComment="codemirror:toggle-comment";e.selectNextOccurrence="codemirror:select-next-occurrence";e.toggleTabFocusMode="codemirror:toggle-tab-focus-mode"})(d||(d={}));const c=".cm-content";const h={id:"@jupyterlab/codemirror-extension:commands",description:"Registers commands acting on selected/active CodeMirror editor.",autoStart:true,optional:[r.ITranslator],activate:(e,t)=>{t=t!==null&&t!==void 0?t:r.nullTranslator;const n=t.load("jupyterlab");const i=e=>e.classList.contains(c);const s=()=>{var t,n;const s=(t=e.contextMenuHitTest(i))!==null&&t!==void 0?t:(n=document.activeElement)===null||n===void 0?void 0:n.closest(c);if(!s){return}if(!("cmView"in s)){return}return s.cmView.view};const o=()=>!!s();e.commands.addCommand(d.deleteLine,{label:n.__("Delete the current line"),execute:()=>{const e=s();if(!e){return}(0,a.deleteLine)(e)},isEnabled:o});e.commands.addCommand(d.toggleBlockComment,{label:n.__("Toggle Block Comment"),caption:n.__("Toggles block comments in languages which support it (e.g. C, JavaScript)"),execute:()=>{const e=s();if(!e){return}(0,a.toggleBlockComment)(e)},isEnabled:o});e.commands.addCommand(d.toggleComment,{label:n.__("Toggle Comment"),execute:()=>{const e=s();if(!e){return}(0,a.toggleComment)(e)},isEnabled:o});e.commands.addCommand(d.toggleTabFocusMode,{label:n.__("Toggle Tab Focus Mode"),caption:n.__("Toggles behavior of Tab key between inserting indentation and moving to next focusable element"),execute:()=>{const e=s();if(!e){return}(0,a.toggleTabFocusMode)(e)},isEnabled:o});e.commands.addCommand(d.selectNextOccurrence,{label:n.__("Select Next Occurrence"),execute:()=>{const e=s();if(!e){return}(0,l.selectNextOccurrence)(e)},isEnabled:o})}};var u=n(4452);var p=n(84878);var m=n(90600);var g=n(78464);var f=n(5592);var v=n(41742);var _=n.n(v);var b=n(44914);var y=n.n(b);const w="@jupyterlab/codemirror-extension:plugin";const C={id:"@jupyterlab/codemirror-extension:languages",description:"Provides the CodeMirror languages registry.",provides:p.IEditorLanguageRegistry,optional:[r.ITranslator],activate:(e,t)=>{const i=new p.EditorLanguageRegistry;for(const n of p.EditorLanguageRegistry.getDefaultLanguages(t)){i.addLanguage(n)}i.addLanguage({name:"ipythongfm",mime:"text/x-ipythongfm",load:async()=>{const[e,t,s]=await Promise.all([n.e(5625).then(n.t.bind(n,95625,23)),Promise.all([n.e(1423),n.e(9329),n.e(2819),n.e(1674),n.e(6575),n.e(5145)]).then(n.bind(n,9329)),n.e(9746).then(n.bind(n,89746))]);const o=e.markdown({base:e.markdownLanguage,codeLanguages:e=>i.findBest(e),extensions:[(0,p.parseMathIPython)(u.StreamLanguage.define(s.stexMath).parser)]});return new u.LanguageSupport(o.language,[o.support,(0,p.pythonBuiltin)(t.pythonLanguage)])}});return i}};const x={id:"@jupyterlab/codemirror-extension:themes",description:"Provides the CodeMirror theme registry",provides:p.IEditorThemeRegistry,optional:[r.ITranslator],activate:(e,t)=>{const n=new p.EditorThemeRegistry;for(const i of p.EditorThemeRegistry.getDefaultThemes(t)){n.addTheme(i)}return n}};const S={id:"@jupyterlab/codemirror-extension:extensions",description:"Provides the CodeMirror extension factory registry.",provides:p.IEditorExtensionRegistry,requires:[p.IEditorThemeRegistry],optional:[r.ITranslator,m.ISettingRegistry,g.IFormRendererRegistry],activate:(e,t,n,i,s)=>{const o=new p.EditorExtensionRegistry;for(const r of p.EditorExtensionRegistry.getDefaultExtensions({themes:t,translator:n})){o.addExtension(r)}if(i){const t=e=>{var t;o.baseConfiguration=(t=e.get("defaultConfig").composite)!==null&&t!==void 0?t:{}};void Promise.all([i.load(w),e.restored]).then((([e])=>{t(e);e.changed.connect(t)}));s===null||s===void 0?void 0:s.addRenderer(`${w}.defaultConfig`,{fieldRenderer:e=>{const t=y().useMemo((()=>o.settingsSchema),[]);const i={};for(const[n,s]of Object.entries(o.defaultConfiguration)){if(typeof t[n]!=="undefined"){i[n]=s}}return y().createElement("div",{className:"jp-FormGroup-contentNormal"},y().createElement("h3",{className:"jp-FormGroup-fieldLabel jp-FormGroup-contentItem"},e.schema.title),e.schema.description&&y().createElement("div",{className:"jp-FormGroup-description"},e.schema.description),y().createElement(g.FormComponent,{schema:{title:e.schema.title,description:e.schema.description,type:"object",properties:t,additionalProperties:false},validator:_(),formData:{...i,...e.formData},formContext:{defaultFormData:i},liveValidate:true,onChange:t=>{var n;const s={};for(const[e,o]of Object.entries((n=t.formData)!==null&&n!==void 0?n:{})){const t=i[e];if(t===undefined||!f.JSONExt.deepEqual(o,t)){s[e]=o}}e.onChange(s)},tagName:"div",translator:n!==null&&n!==void 0?n:r.nullTranslator}))}})}return o}};const k={id:"@jupyterlab/codemirror-extension:binding",description:"Register the CodeMirror extension factory binding the editor and the shared model.",autoStart:true,requires:[p.IEditorExtensionRegistry],activate:(e,t)=>{t.addExtension({name:"shared-model-binding",factory:e=>{var t;const n=e.model.sharedModel;return p.EditorExtensionRegistry.createImmutableExtension((0,p.ybinding)({ytext:n.ysource,undoManager:(t=n.undoManager)!==null&&t!==void 0?t:undefined}))}})}};const j={id:"@jupyterlab/codemirror-extension:services",description:"Provides the service to instantiate CodeMirror editors.",provides:s.IEditorServices,requires:[p.IEditorLanguageRegistry,p.IEditorExtensionRegistry],optional:[r.ITranslator],activate:(e,t,n,i)=>{const s=new p.CodeMirrorEditorFactory({extensions:n,languages:t,translator:i!==null&&i!==void 0?i:r.nullTranslator});return{factoryService:s,mimeTypeService:new p.CodeMirrorMimeTypeService(t)}}};const I={id:"@jupyterlab/codemirror-extension:line-col-status",description:"Provides the code editor cursor position model.",autoStart:true,requires:[r.ITranslator],optional:[i.ILabShell,o.IStatusBar],provides:s.IPositionModel,activate:(e,t,n,i)=>{const o=new s.LineCol(t);const r=new Set;if(i){i.registerStatusItem(I.id,{priority:1,item:o,align:"right",rank:2,isActive:()=>!!o.model.editor})}const a=t=>{r.add(t);if(e.shell.currentWidget){d(e.shell,{newValue:e.shell.currentWidget,oldValue:null})}};const l=()=>{d(e.shell,{oldValue:e.shell.currentWidget,newValue:e.shell.currentWidget})};function d(e,t){Promise.all([...r].map((e=>e(t.newValue)))).then((e=>{var t;o.model.editor=(t=e.filter((e=>e!==null))[0])!==null&&t!==void 0?t:null})).catch((e=>{console.error("Get editors",e)}))}if(n){n.currentChanged.connect(d)}return{addEditorProvider:a,update:l}}};const E=[h,C,x,k,S,j,I];const T=E},72508:(e,t,n)=>{"use strict";var i=n(10395);var s=n(40662);var o=n(24800);var r=n(17325);var a=n(3579);var l=n(23359)},68191:(e,t,n)=>{"use strict";n.r(t);n.d(t,{CodeMirrorEditor:()=>le,CodeMirrorEditorFactory:()=>ce,CodeMirrorMimeTypeService:()=>he,CodeMirrorSearchHighlighter:()=>me,EditorExtensionRegistry:()=>J,EditorLanguageRegistry:()=>se,EditorSearchProvider:()=>pe,EditorThemeRegistry:()=>ee,ExtensionsHandler:()=>K,IEditorExtensionRegistry:()=>fe,IEditorLanguageRegistry:()=>ve,IEditorThemeRegistry:()=>_e,PythonBuiltin:()=>te,StateCommands:()=>d,YRange:()=>F,YSyncConfig:()=>z,customTheme:()=>b,jupyterEditorTheme:()=>X,jupyterHighlightStyle:()=>Q,jupyterTheme:()=>Z,parseMathIPython:()=>E,pythonBuiltin:()=>ne,rulers:()=>P,ySync:()=>V,ySyncAnnotation:()=>W,ySyncFacet:()=>H,ybinding:()=>U});var i=n(58285);var s=n(84958);const o="[data-jp-code-runner]";const r='[data-jp-interaction-mode="terminal"]';const a=".jp-CodeMirrorEditor:not(.jp-mod-has-primary-selection):not(.jp-mod-in-leading-whitespace):not(.jp-mod-completer-active)";const l=".jp-mod-editMode .jp-Cell.jp-mod-active";var d;(function(e){function t(e){var t;let n=(t=e.dom.parentElement)===null||t===void 0?void 0:t.classList;let o=n===null||n===void 0?void 0:n.contains(s.COMPLETER_ENABLED_CLASS);let r=n===null||n===void 0?void 0:n.contains(s.COMPLETER_LINE_BEGINNING_CLASS);if(o&&!r){return false}const a={state:e.state,dispatch:e.dispatch};const l=e.state.selection.main.from;const d=e.state.selection.main.to;if(l!=d){return(0,i.indentMore)(a)}const c=e.state.doc.lineAt(l);const h=e.state.doc.slice(c.from,l).toString();if(/^\s*$/.test(h)){return(0,i.indentMore)(a)}else{return(0,i.insertTab)(a)}}e.indentMoreOrInsertTab=t;function n(e){var t;if((t=e.dom.parentElement)===null||t===void 0?void 0:t.classList.contains(s.COMPLETER_ACTIVE_CLASS)){return false}if(e.dom.closest(r)){return false}const n={state:e.state,dispatch:e.dispatch};return(0,i.insertNewlineAndIndent)(n)}e.completerOrInsertNewLine=n;function d(e){if(e.dom.closest(o)){return true}return false}e.preventNewLineOnRun=d;function c(e){if(e.dom.closest(o)){return false}else{const t={state:e.state,dispatch:e.dispatch};return(0,i.insertBlankLine)(t)}}e.insertBlankLineOnRun=c;function h(e){const t={state:e.state,dispatch:e.dispatch};const n=(0,i.simplifySelection)(t);if(e.dom.closest(l)){return false}else{return n}}e.simplifySelectionAndMaybeSwitchToCommandMode=h;function u(e){if(e.dom.closest(a)){return false}return(0,i.indentLess)(e)}e.dedentIfNotLaunchingTooltip=u})(d||(d={}));var c=n(4452);var h=n(71674);var u=n(22819);var p=n(5592);var m=n(2336);var g=n(75128);var f=n(21760);const v=h.Facet.define({combine(e){return(0,h.combineConfig)(e,{fontFamily:null,fontSize:null,lineHeight:null},{fontFamily:(e,t)=>e!==null&&e!==void 0?e:t,fontSize:(e,t)=>e!==null&&e!==void 0?e:t,lineHeight:(e,t)=>e!==null&&e!==void 0?e:t})}});function _(e){const{fontFamily:t,fontSize:n,lineHeight:i}=e.state.facet(v);let s="";if(n){s+=`font-size: ${n}px !important;`}if(t){s+=`font-family: ${t} !important;`}if(i){s+=`line-height: ${i.toString()} !important`}return{style:s}}function b(e){return[v.of(e),u.EditorView.editorAttributes.of(_)]}var y=n(66575);var w=n(45145);const C="InlineMathDollar";const x="InlineMathBracket";const S="BlockMathDollar";const k="BlockMathBracket";const j={[C]:1,[x]:3,[S]:2,[k]:3};const I=Object.keys(j).reduce(((e,t)=>{e[t]={mark:`${t}Mark`,resolve:t};return e}),{});function E(e){const t=new Array;Object.keys(j).forEach((e=>{t.push({name:e,style:w.tags.emphasis},{name:`${e}Mark`,style:w.tags.processingInstruction})}));return{defineNodes:t,parseInline:[{name:S,parse(e,t,n){if(t!=36||e.char(n+1)!=36){return-1}return e.addDelimiter(I[S],n,n+j[S],true,true)}},{name:C,parse(e,t,n){if(t!=36||e.char(n+1)==36){return-1}return e.addDelimiter(I[C],n,n+j[C],true,true)}},{name:x,before:"Escape",parse(e,t,n){if(t!=92||e.char(n+1)!=92||![40,41].includes(e.char(n+2))){return-1}return e.addDelimiter(I[x],n,n+j[x],e.char(n+2)==40,e.char(n+2)==41)}},{name:k,before:"Escape",parse(e,t,n){if(t!=92||e.char(n+1)!=92||![91,93].includes(e.char(n+2))){return-1}return e.addDelimiter(I[k],n,n+j[k],e.char(n+2)==91,e.char(n+2)==93)}}],wrap:e?(0,y.parseMixed)(((t,n)=>{const i=j[t.type.name];if(i){return{parser:e,overlay:[{from:t.from+i,to:t.to-i}]}}return null})):undefined}}const T="cm-rulers";const M=u.EditorView.baseTheme({[`.${T}`]:{borderRight:"1px dotted gray",opacity:.7}});const D=h.Facet.define({combine(e){const t=e.reduce(((e,t)=>e.concat(t.filter(((n,i)=>!e.includes(n)&&i==t.lastIndexOf(n))))),[]);return t}});const A=u.ViewPlugin.fromClass(class{constructor(e){var t,n;this.rulersContainer=e.dom.appendChild(document.createElement("div"));this.rulersContainer.style.cssText=`\n                position: absolute;\n                left: 0;\n                top: 0;\n                width: 100%;\n                height: 100%;\n                pointer-events: none;\n                overflow: hidden;\n            `;const i=e.defaultCharacterWidth;const s=e.state.facet(D);const o=(n=(t=e.scrollDOM.querySelector(".cm-gutters"))===null||t===void 0?void 0:t.clientWidth)!==null&&n!==void 0?n:0;this.rulers=s.map((e=>{const t=this.rulersContainer.appendChild(document.createElement("div"));t.classList.add(T);t.style.cssText=`\n                position: absolute;\n                left: ${o+e*i}px;\n                height: 100%;\n            `;t.style.width="6px";return t}))}update(e){var t,n;const i=e.view.state.facet(D);if(e.viewportChanged||e.geometryChanged||!p.JSONExt.deepEqual(i,e.startState.facet(D))){const s=(n=(t=e.view.scrollDOM.querySelector(".cm-gutters"))===null||t===void 0?void 0:t.clientWidth)!==null&&n!==void 0?n:0;const o=e.view.defaultCharacterWidth;this.rulers.forEach(((e,t)=>{e.style.left=`${s+i[t]*o}px`}))}}destroy(){this.rulers.forEach((e=>{e.remove()}));this.rulersContainer.remove()}});function P(e){return[M,D.of(e),A]}class L{constructor(e){this.undoManager=e}}const R=h.Facet.define({combine(e){return e[e.length-1]}});class N{constructor(e){this._onStackItemAdded=({stackItem:e,changedParentTypes:t})=>{if(t.has(this._syncConf.ytext)&&this._beforeChangeSelection&&!e.meta.has(this)){e.meta.set(this,this._beforeChangeSelection)}};this._onStackItemPopped=({stackItem:e})=>{const t=e.meta.get(this);if(t){const e=this._syncConf.fromYRange(t);this._view.dispatch(this._view.state.update({selection:e,effects:[u.EditorView.scrollIntoView(e)]}));this._storeSelection()}};this._storeSelection=()=>{this._beforeChangeSelection=this._syncConf.toYRange(this._view.state.selection.main)};this._view=e;this._conf=e.state.facet(R);this._undoManager=this._conf.undoManager;this._syncConf=e.state.facet(H);this._beforeChangeSelection=null;this._undoManager.on("stack-item-added",this._onStackItemAdded);this._undoManager.on("stack-item-popped",this._onStackItemPopped);this._undoManager.addTrackedOrigin(this._syncConf)}update(e){if(e.selectionSet&&(e.transactions.length===0||e.transactions[0].annotation(W)!==this._syncConf)){this._storeSelection()}}destroy(){this._undoManager.off("stack-item-added",this._onStackItemAdded);this._undoManager.off("stack-item-popped",this._onStackItemPopped);this._undoManager.removeTrackedOrigin(this._syncConf)}}const O=u.ViewPlugin.fromClass(N);var B=n(74356);class F{constructor(e,t){this.yanchor=e;this.yhead=t}toJSON(){return{yanchor:(0,B.relativePositionToJSON)(this.yanchor),yhead:(0,B.relativePositionToJSON)(this.yhead)}}static fromJSON(e){return new F((0,B.createRelativePositionFromJSON)(e.yanchor),(0,B.createRelativePositionFromJSON)(e.yhead))}}class z{constructor(e){this.ytext=e}toYPos(e,t=0){return(0,B.createRelativePositionFromTypeIndex)(this.ytext,e,t)}fromYPos(e){const t=(0,B.createAbsolutePositionFromRelativePosition)((0,B.createRelativePositionFromJSON)(e),this.ytext.doc);if(t==null||t.type!==this.ytext){throw new Error("[y-codemirror] The position you want to retrieve was created by a different document")}return{pos:t.index,assoc:t.assoc}}toYRange(e){const t=e.assoc;const n=this.toYPos(e.anchor,t);const i=this.toYPos(e.head,t);return new F(n,i)}fromYRange(e){const t=this.fromYPos(e.yanchor);const n=this.fromYPos(e.yhead);if(t.pos===n.pos){return h.EditorSelection.cursor(n.pos,n.assoc)}return h.EditorSelection.range(t.pos,n.pos)}}const H=h.Facet.define({combine(e){return e[e.length-1]}});const W=h.Annotation.define();const V=u.ViewPlugin.fromClass(class{constructor(e){this.conf=e.state.facet(H);this._observer=(t,n)=>{var i;if(n.origin!==this.conf){const n=t.delta;const s=[];let o=0;for(let e=0;e<n.length;e++){const t=n[e];if(t.insert!=null){s.push({from:o,to:o,insert:t.insert})}else if(t.delete!=null){s.push({from:o,to:o+t.delete,insert:""});o+=t.delete}else{o+=(i=t.retain)!==null&&i!==void 0?i:0}}e.dispatch({changes:s,annotations:[W.of(this.conf)]})}};this._ytext=this.conf.ytext;this._ytext.observe(this._observer)}update(e){if(!e.docChanged||e.transactions.length>0&&e.transactions[0].annotation(W)===this.conf){return}const t=this.conf.ytext;t.doc.transact((()=>{let n=0;e.changes.iterChanges(((e,i,s,o,r)=>{const a=r.sliceString(0,r.length,"\n");if(e!==i){t.delete(e+n,i-e)}if(a.length>0){t.insert(e+n,a)}n+=a.length-(i-e)}))}),this.conf)}destroy(){this._ytext.unobserve(this._observer)}});function U({ytext:e,undoManager:t}){const n=new z(e);const i=[H.of(n),V];if(t){i.push(R.of(new L(t)),O)}return i}var q=n(43370);const $="jp-mod-readOnly";class K{constructor({baseConfiguration:e,config:t,defaultExtensions:n}={}){this._configChanged=new m.Signal(this);this._disposed=new m.Signal(this);this._isDisposed=false;this._immutables=new Set;this._baseConfig=e!==null&&e!==void 0?e:{};this._config=t!==null&&t!==void 0?t:{};this._configurableBuilderMap=new Map(n);const i=Object.keys(this._config).concat(Object.keys(this._baseConfig));this._immutables=new Set([...this._configurableBuilderMap.keys()].filter((e=>!i.includes(e))))}get configChanged(){return this._configChanged}get disposed(){return this._disposed}get isDisposed(){return this._isDisposed}dispose(){if(this.isDisposed){return}this._isDisposed=true;this._disposed.emit();m.Signal.clearData(this)}getOption(e){var t;return(t=this._config[e])!==null&&t!==void 0?t:this._baseConfig[e]}hasOption(e){return Object.keys(this._config).includes(e)||Object.keys(this._baseConfig).includes(e)}setOption(e,t){if(this._config[e]!==t){this._config[e]=t;this._configChanged.emit({[e]:t})}}setBaseOptions(e){const t=this._getChangedOptions(e,this._baseConfig);if(t.length>0){this._baseConfig=e;const n=Object.keys(this._config);const i=t.filter((e=>!n.includes(e)));if(i.length>0){this._configChanged.emit(i.reduce(((e,t)=>{e[t]=this._baseConfig[t];return e}),{}))}}for(const n of Object.keys(e)){if(n in this._config&&this._config[n]!=e[n]){this.setOption(n,e[n])}}}setOptions(e){const t=this._getChangedOptions(e,this._config);if(t.length>0){this._config={...e};this._configChanged.emit(t.reduce(((e,t)=>{var n;e[t]=(n=this._config[t])!==null&&n!==void 0?n:this._baseConfig[t];return e}),{}))}}reconfigureExtension(e,t,n){const i=this.getEffect(e.state,t,n);if(i){e.dispatch({effects:[i]})}}reconfigureExtensions(e,t){const n=Object.keys(t).filter((e=>this.has(e))).map((n=>this.getEffect(e.state,n,t[n])));e.dispatch({effects:n.filter((e=>e!==null))})}injectExtension(e,t){e.dispatch({effects:h.StateEffect.appendConfig.of(t)})}getInitialExtensions(){const e={...this._baseConfig,...this._config};const t=[...this._immutables].map((e=>{var t;return(t=this.get(e))===null||t===void 0?void 0:t.instance(undefined)})).filter((e=>e));for(const n of Object.keys(e)){const i=this.get(n);if(i){const s=e[n];t.push(i.instance(s))}}return t}get(e){return this._configurableBuilderMap.get(e)}has(e){return this._configurableBuilderMap.has(e)}getEffect(e,t,n){var i;const s=this.get(t);return(i=s===null||s===void 0?void 0:s.reconfigure(n))!==null&&i!==void 0?i:null}_getChangedOptions(e,t){const n=new Array;const i=new Array;for(const[s,o]of Object.entries(e)){i.push(s);if(t[s]!==o){n.push(s)}}n.push(...Object.keys(t).filter((e=>!i.includes(e))));return n}}class J{constructor(){this.configurationBuilder=new Map;this.configurationSchema={};this.defaultOptions={};this.handlers=new Set;this.immutableExtensions=new Set;this._baseConfiguration={}}get baseConfiguration(){return{...this.defaultOptions,...this._baseConfiguration}}set baseConfiguration(e){if(!p.JSONExt.deepEqual(e,this._baseConfiguration)){this._baseConfiguration=e;for(const e of this.handlers){e.setBaseOptions(this.baseConfiguration)}}}get defaultConfiguration(){return Object.freeze({...this.defaultOptions})}get settingsSchema(){return Object.freeze(p.JSONExt.deepCopy(this.configurationSchema))}addExtension(e){var t;if(this.configurationBuilder.has(e.name)){throw new Error(`Extension named ${e.name} is already registered.`)}this.configurationBuilder.set(e.name,e);if(typeof e.default!="undefined"){this.defaultOptions[e.name]=e.default}if(e.schema){this.configurationSchema[e.name]={default:(t=e.default)!==null&&t!==void 0?t:null,...e.schema};this.defaultOptions[e.name]=this.configurationSchema[e.name].default}}createNew(e){const t=new Array;for(const[i,s]of this.configurationBuilder.entries()){const n=s.factory(e);if(n){t.push([i,n])}}const n=new K({baseConfiguration:this.baseConfiguration,config:e.config,defaultExtensions:t});this.handlers.add(n);n.disposed.connect((()=>{this.handlers.delete(n)}));return n}}(function(e){class t{constructor(e){this._compartment=new h.Compartment;this._builder=e}instance(e){return this._compartment.of(this._builder(e))}reconfigure(e){return this._compartment.reconfigure(this._builder(e))}}class n{constructor(e){this._extension=e}instance(){return this._extension}reconfigure(){return null}}function s(e){return new t(e)}e.createConfigurableExtension=s;function o(e,n=[]){return new t((t=>t?e:n))}e.createConditionalExtension=o;function r(e){return new n(e)}e.createImmutableExtension=r;function a(e={}){const{themes:t,translator:n}=e;const a=(n!==null&&n!==void 0?n:f.nullTranslator).load("jupyterlab");const l=[Object.freeze({name:"autoClosingBrackets",default:false,factory:()=>o((0,g.wm)()),schema:{type:"boolean",title:a.__("Auto Closing Brackets")}}),Object.freeze({name:"codeFolding",default:false,factory:()=>o((0,c.foldGutter)()),schema:{type:"boolean",title:a.__("Code Folding")}}),Object.freeze({name:"cursorBlinkRate",default:1200,factory:()=>s((e=>(0,u.drawSelection)({cursorBlinkRate:e}))),schema:{type:"number",title:a.__("Cursor blinking rate"),description:a.__("Half-period in milliseconds used for cursor blinking. The default blink rate is 1200ms. By setting this to zero, blinking can be disabled.")}}),Object.freeze({name:"highlightActiveLine",default:false,factory:()=>o((0,u.highlightActiveLine)()),schema:{type:"boolean",title:a.__("Highlight the active line")}}),Object.freeze({name:"highlightSpecialCharacters",default:true,factory:()=>o((0,u.highlightSpecialChars)()),schema:{type:"boolean",title:a.__("Highlight special characters")}}),Object.freeze({name:"highlightTrailingWhitespace",default:false,factory:()=>o((0,u.highlightTrailingWhitespace)()),schema:{type:"boolean",title:a.__("Highlight trailing white spaces")}}),Object.freeze({name:"highlightWhitespace",default:false,factory:()=>o((0,u.highlightWhitespace)()),schema:{type:"boolean",title:a.__("Highlight white spaces")}}),Object.freeze({name:"indentUnit",default:"4",factory:()=>s((e=>e=="Tab"?c.indentUnit.of("\t"):c.indentUnit.of(" ".repeat(parseInt(e,10))))),schema:{type:"string",title:a.__("Indentation unit"),description:a.__("The indentation is a `Tab` or the number of spaces. This defaults to 4 spaces."),enum:["Tab","1","2","4","8"]}}),Object.freeze({name:"keymap",default:[{key:"Mod-Enter",run:d.insertBlankLineOnRun},{key:"Enter",run:d.completerOrInsertNewLine},{key:"Escape",run:d.simplifySelectionAndMaybeSwitchToCommandMode},...i.defaultKeymap.filter((e=>!["Ctrl-m","Mod-Enter","Shift-Mod-k","Mod-/","Alt-A","Escape","Enter"].includes(e.key))),{key:"Tab",run:d.indentMoreOrInsertTab,shift:d.dedentIfNotLaunchingTooltip}],factory:()=>s((e=>u.keymap.of(e)))}),Object.freeze({name:"lineNumbers",default:true,factory:()=>o((0,u.lineNumbers)()),schema:{type:"boolean",title:a.__("Line Numbers")}}),Object.freeze({name:"lineWrap",factory:()=>o(u.EditorView.lineWrapping),default:true,schema:{type:"boolean",title:a.__("Line Wrap")}}),Object.freeze({name:"dropCursor",default:true,factory:()=>o((0,u.dropCursor)()),schema:{type:"boolean",title:a.__("Drop Cursor")}}),Object.freeze({name:"matchBrackets",default:true,factory:()=>o([(0,c.bracketMatching)(),h.Prec.high(u.keymap.of(g.Bc))]),schema:{type:"boolean",title:a.__("Match Brackets")}}),Object.freeze({name:"rectangularSelection",default:true,factory:()=>o([(0,u.rectangularSelection)(),(0,u.crosshairCursor)()]),schema:{type:"boolean",title:a.__("Rectangular selection"),description:a.__("Rectangular (block) selection can be created by dragging the mouse pointer while holding the left mouse button and the Alt key. When the Alt key is pressed, a crosshair cursor will appear, indicating that the rectangular selection mode is active.")}}),Object.freeze({name:"readOnly",default:false,factory:()=>s((e=>[h.EditorState.readOnly.of(e),e?u.EditorView.editorAttributes.of({class:$}):[]]))}),Object.freeze({name:"rulers",default:[],factory:()=>s((e=>e.length>0?P(e):[])),schema:{type:"array",title:a.__("Rulers"),items:{type:"number",minimum:0}}}),Object.freeze({name:"extendSelection",default:true,factory:()=>o(u.keymap.of([{key:"Mod-Shift-l",run:q.selectSelectionMatches,preventDefault:true}]))}),Object.freeze({name:"searchWithCM",default:false,factory:()=>o(u.keymap.of([{key:"Mod-f",run:q.openSearchPanel,scope:"editor search-panel"},{key:"F3",run:q.findNext,shift:q.findPrevious,scope:"editor search-panel",preventDefault:true},{key:"Mod-g",run:q.findNext,shift:q.findPrevious,scope:"editor search-panel",preventDefault:true},{key:"Escape",run:q.closeSearchPanel,scope:"editor search-panel"}]))}),Object.freeze({name:"scrollPastEnd",default:false,factory:e=>e.inline?null:o((0,u.scrollPastEnd)())}),Object.freeze({name:"smartIndent",default:true,factory:()=>o((0,c.indentOnInput)()),schema:{type:"boolean",title:a.__("Smart Indentation")}}),Object.freeze({name:"tabFocusable",default:true,factory:()=>o(u.EditorView.contentAttributes.of({tabIndex:"0"}),u.EditorView.contentAttributes.of({tabIndex:"-1"}))}),Object.freeze({name:"tabSize",default:4,factory:()=>s((e=>h.EditorState.tabSize.of(e))),schema:{type:"number",title:a.__("Tab size")}}),Object.freeze({name:"tooltips",factory:()=>r((0,u.tooltips)({position:"absolute",parent:document.body}))}),Object.freeze({name:"allowMultipleSelections",default:true,factory:()=>s((e=>h.EditorState.allowMultipleSelections.of(e))),schema:{type:"boolean",title:a.__("Multiple selections")}}),Object.freeze({name:"customStyles",factory:()=>s((e=>b(e))),default:{fontFamily:null,fontSize:null,lineHeight:null},schema:{title:a.__("Custom editor styles"),type:"object",properties:{fontFamily:{type:["string","null"],title:a.__("Font Family")},fontSize:{type:["number","null"],minimum:1,maximum:100,title:a.__("Font Size")},lineHeight:{type:["number","null"],title:a.__("Line Height")}},additionalProperties:false}})];if(t){l.push(Object.freeze({name:"theme",default:"jupyter",factory:()=>s((e=>t.getTheme(e))),schema:{type:"string",title:a.__("Theme"),description:a.__("CodeMirror theme")}}))}if(n){l.push(Object.freeze({name:"translation",default:{"Control character":a.__("Control character"),"Selection deleted":a.__("Selection deleted"),"Folded lines":a.__("Folded lines"),"Unfolded lines":a.__("Unfolded lines"),to:a.__("to"),"folded code":a.__("folded code"),unfold:a.__("unfold"),"Fold line":a.__("Fold line"),"Unfold line":a.__("Unfold line"),"Go to line":a.__("Go to line"),go:a.__("go"),Find:a.__("Find"),Replace:a.__("Replace"),next:a.__("next"),previous:a.__("previous"),all:a.__("all"),"match case":a.__("match case"),replace:a.__("replace"),"replace all":a.__("replace all"),close:a.__("close"),"current match":a.__("current match"),"replaced $ matches":a.__("replaced $ matches"),"replaced match on line $":a.__("replaced match on line $"),"on line":a.__("on line"),Completions:a.__("Completions"),Diagnostics:a.__("Diagnostics"),"No diagnostics":a.__("No diagnostics")},factory:()=>s((e=>h.EditorState.phrases.of(e)))}))}return l}e.getDefaultExtensions=a})(J||(J={}));var G=n(66646);var Y=n(91268);const X=u.EditorView.theme({"&":{background:"var(--jp-layout-color0)",color:"var(--jp-content-font-color1)"},".jp-CodeConsole &, .jp-Notebook &":{background:"transparent"},".cm-content":{caretColor:"var(--jp-editor-cursor-color)"},".cm-scroller":{fontFamily:"inherit"},".cm-cursor, .cm-dropCursor":{borderLeft:"var(--jp-code-cursor-width0) solid var(--jp-editor-cursor-color)"},".cm-selectionBackground, .cm-content ::selection":{backgroundColor:"var(--jp-editor-selected-background)"},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{backgroundColor:"var(--jp-editor-selected-focused-background)"},".cm-gutters":{borderRight:"1px solid var(--jp-border-color2)",backgroundColor:"var(--jp-layout-color2)"},".cm-gutter":{backgroundColor:"var(--jp-layout-color2)"},".cm-activeLine":{backgroundColor:"color-mix(in srgb, var(--jp-layout-color3) 25%, transparent)"},".cm-lineNumbers":{color:"var(--jp-ui-font-color2)"},".cm-searchMatch":{backgroundColor:"var(--jp-search-unselected-match-background-color)",color:"var(--jp-search-unselected-match-color)"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"var(--jp-search-selected-match-background-color) !important",color:"var(--jp-search-selected-match-color) !important"},".cm-tooltip":{backgroundColor:"var(--jp-layout-color1)"}});const Q=c.HighlightStyle.define([{tag:w.tags.meta,color:"var(--jp-mirror-editor-meta-color)"},{tag:w.tags.heading,color:"var(--jp-mirror-editor-header-color)"},{tag:[w.tags.heading1,w.tags.heading2,w.tags.heading3,w.tags.heading4],color:"var(--jp-mirror-editor-header-color)",fontWeight:"bold"},{tag:w.tags.keyword,color:"var(--jp-mirror-editor-keyword-color)",fontWeight:"bold"},{tag:w.tags.atom,color:"var(--jp-mirror-editor-atom-color)"},{tag:w.tags.number,color:"var(--jp-mirror-editor-number-color)"},{tag:[w.tags.definition(w.tags.name),w.tags.function(w.tags.definition(w.tags.variableName))],color:"var(--jp-mirror-editor-def-color)"},{tag:w.tags.standard(w.tags.variableName),color:"var(--jp-mirror-editor-builtin-color)"},{tag:[w.tags.special(w.tags.variableName),w.tags.self],color:"var(--jp-mirror-editor-variable-2-color)"},{tag:w.tags.punctuation,color:"var(--jp-mirror-editor-punctuation-color)"},{tag:w.tags.propertyName,color:"var(--jp-mirror-editor-property-color)"},{tag:w.tags.operator,color:"var(--jp-mirror-editor-operator-color)",fontWeight:"bold"},{tag:w.tags.comment,color:"var(--jp-mirror-editor-comment-color)",fontStyle:"italic"},{tag:w.tags.string,color:"var(--jp-mirror-editor-string-color)"},{tag:[w.tags.labelName,w.tags.monospace,w.tags.special(w.tags.string)],color:"var(--jp-mirror-editor-string-2-color)"},{tag:w.tags.bracket,color:"var(--jp-mirror-editor-bracket-color)"},{tag:w.tags.tagName,color:"var(--jp-mirror-editor-tag-color)"},{tag:w.tags.attributeName,color:"var(--jp-mirror-editor-attribute-color)"},{tag:w.tags.quote,color:"var(--jp-mirror-editor-quote-color)"},{tag:w.tags.link,color:"var(--jp-mirror-editor-link-color)",textDecoration:"underline"},{tag:[w.tags.separator,w.tags.derefOperator,w.tags.paren],color:""},{tag:w.tags.strong,fontWeight:"bold"},{tag:w.tags.emphasis,fontStyle:"italic"},{tag:w.tags.strikethrough,textDecoration:"line-through"},{tag:w.tags.bool,color:"var(--jp-mirror-editor-keyword-color)",fontWeight:"bold"}]);const Z=[X,(0,c.syntaxHighlighting)(Q)];class ee{constructor(){this._themeMap=new Map([["jupyter",Object.freeze({name:"jupyter",theme:Z})]])}get themes(){return Array.from(this._themeMap.values())}defaultTheme(){return this._themeMap.get("jupyter").theme}addTheme(e){if(this._themeMap.has(e.name)){throw new Error(`A theme named '${e.name}' is already registered.`)}this._themeMap.set(e.name,{displayName:e.name,...e})}getTheme(e){var t;const n=(t=this._themeMap.get(e))===null||t===void 0?void 0:t.theme;return n!==null&&n!==void 0?n:this.defaultTheme()}}(function(e){function t(e){const t=(e!==null&&e!==void 0?e:f.nullTranslator).load("jupyterlab");return[Object.freeze({name:"codemirror",displayName:t.__("codemirror"),theme:[u.EditorView.baseTheme({}),(0,c.syntaxHighlighting)(c.defaultHighlightStyle)]})]}e.getDefaultThemes=t})(ee||(ee={}));class te{constructor(e,t){this.langPython=t;this.tree=(0,c.syntaxTree)(e.state);this.mark=u.Decoration.mark({class:"cm-builtin"});this.decorations=this.buildDeco(e);this.decoratedTo=e.viewport.to}update(e){let t=(0,c.syntaxTree)(e.state);let{viewport:n}=e.view,i=e.changes.mapPos(this.decoratedTo,1);if(t.length<n.to&&t.type==this.tree.type&&i>=n.to){this.decorations=this.decorations.map(e.changes);this.decoratedTo=i}else if(t!=this.tree||e.viewportChanged){this.tree=t;this.decorations=this.buildDeco(e.view);this.decoratedTo=n.to}}buildDeco(e){if(!this.tree.length)return u.Decoration.none;let t=new h.RangeSetBuilder;const n=i=>{var s;const o=i.node.cursor();const r=o.tree&&o.tree.prop(y.NodeProp.mounted);if(r&&r.overlay){(s=i.node.enter(r.overlay[0].from+i.from,1))===null||s===void 0?void 0:s.cursor().iterate(n)}if(this.langPython.isActiveAt(e.state,i.from+1)&&i.name==="VariableName"){const n=e.state.sliceDoc(i.from,i.to);if(ie.includes(n)){t.add(i.from,i.to,this.mark)}}};for(let{from:i,to:s}of e.visibleRanges){this.tree.iterate({enter:n,from:i,to:s})}return t.finish()}}function ne(e){return u.ViewPlugin.define((t=>new te(t,e)),{decorations:e=>e.decorations})}const ie=["abs","aiter","all","any","anext","ascii","bin","bool","breakpoint","bytearray","bytes","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","exec","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip","__import__"];class se{constructor(){this._modeList=[];this.addLanguage({name:"none",mime:"text/plain",support:new c.LanguageSupport(c.LRLanguage.define({parser:(0,Y.KO)("@top Program { }")}))})}addLanguage(e){var t;const n=(t=this.findByName(e.name))!==null&&t!==void 0?t:this.findByMIME(e.mime,true);if(n){throw new Error(`${e.mime} already registered`)}this._modeList.push(this.makeSpec(e))}async getLanguage(e){const t=this.findBest(e);if(t&&!t.support){t.support=await t.load()}return t}getLanguages(){return[...this._modeList]}findByMIME(e,t=false){if(Array.isArray(e)){for(let t=0;t<e.length;t++){const n=this.findByMIME(e[t]);if(n)return n}return null}e=e.toLowerCase();for(let n=0;n<this._modeList.length;n++){let t=this._modeList[n];if(Array.isArray(t.mime)){for(let n=0;n<t.mime.length;n++){if(t.mime[n]==e){return t}}}else if(t.mime==e){return t}}if(!t){if(/\+xml$/.test(e))return this.findByMIME("application/xml");if(/\+json$/.test(e))return this.findByMIME("application/json")}return null}findByName(e){e=e.toLowerCase();for(let t=0;t<this._modeList.length;t++){let n=this._modeList[t];if(n.name.toLowerCase()==e)return n;if(n.alias){for(let t=0;t<n.alias.length;t++){if(n.alias[t].toLowerCase()==e){return n}}}}return null}findByExtension(e){if(Array.isArray(e)){for(let t=0;t<e.length;t++){const n=this.findByExtension(e[t]);if(n)return n}return null}e=e.toLowerCase();for(let t=0;t<this._modeList.length;t++){let n=this._modeList[t];for(let t=0;t<n.extensions.length;t++){if(n.extensions[t].toLowerCase()==e){return n}}}return null}findByFileName(e){const t=G.PathExt.basename(e);for(let s=0;s<this._modeList.length;s++){let e=this._modeList[s];if(e.filename&&e.filename.test(t)){return e}}let n=t.lastIndexOf(".");let i=n>-1&&t.substring(n+1,t.length);if(i){return this.findByExtension(i)}return null}findBest(e,t=true){var n,i,o,r;const a=typeof e==="string"?e:e.name;const l=typeof e!=="string"?e.mime:a;const d=typeof e!=="string"?(n=e.extensions)!==null&&n!==void 0?n:[]:[];return(r=(o=(i=a?this.findByName(a):null)!==null&&i!==void 0?i:l?this.findByMIME(l):null)!==null&&o!==void 0?o:this.findByExtension(d))!==null&&r!==void 0?r:t?this.findByMIME(s.IEditorMimeTypeService.defaultMimeType):null}async highlight(e,t,n){var i;if(t){await this.getLanguage(t)}const s=(i=t===null||t===void 0?void 0:t.support)===null||i===void 0?void 0:i.language;if(!s){n.appendChild(document.createTextNode(e));return}const o=s.parser.parse(e);let r=0;(0,w.highlightTree)(o,Q,((t,i,s)=>{if(t>r){n.appendChild(document.createTextNode(e.slice(r,t)))}const o=n.appendChild(document.createElement("span"));o.className=s;o.appendChild(document.createTextNode(e.slice(t,i)));r=i}));if(r<o.length-1){n.appendChild(document.createTextNode(e.slice(r,o.length)))}}makeSpec(e){let t=c.LanguageDescription.of(e);t.mime=e.mime;t.displayName=e.displayName;return t}}(function(e){function t(e){return new c.LanguageSupport(c.StreamLanguage.define(e))}e.legacy=t;async function i(e){const t=await n.e(6492).then(n.bind(n,46492));return t.sql({dialect:t[e]})}function s(e){const s=(e!==null&&e!==void 0?e:f.nullTranslator).load("jupyterlab");return[{name:"C",displayName:s.__("C"),mime:"text/x-csrc",extensions:["c","h","ino"],async load(){const e=await n.e(6166).then(n.bind(n,66166));return e.cpp()}},{name:"C++",displayName:s.__("C++"),mime:"text/x-c++src",extensions:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],async load(){const e=await n.e(6166).then(n.bind(n,66166));return e.cpp()}},{name:"CQL",displayName:s.__("CQL"),mime:"text/x-cassandra",extensions:["cql"],load(){return i("Cassandra")}},{name:"CSS",displayName:s.__("CSS"),mime:"text/css",extensions:["css"],async load(){const e=await n.e(7425).then(n.bind(n,37425));return e.css()}},{name:"HTML",displayName:s.__("HTML"),alias:["xhtml"],mime:"text/html",extensions:["html","htm","handlebars","hbs"],async load(){const e=await Promise.all([n.e(8103),n.e(7425),n.e(1962)]).then(n.bind(n,91962));return e.html()}},{name:"Java",displayName:s.__("Java"),mime:"text/x-java",extensions:["java"],async load(){const e=await n.e(8779).then(n.bind(n,88779));return e.java()}},{name:"Javascript",displayName:s.__("Javascript"),alias:["ecmascript","js","node"],mime:["text/javascript","text/ecmascript","application/javascript","application/x-javascript","application/ecmascript"],extensions:["js","mjs","cjs"],async load(){const e=await n.e(8103).then(n.bind(n,88103));return e.javascript()}},{name:"JSON",displayName:s.__("JSON"),alias:["json5"],mime:["application/json","application/x-json"],extensions:["json","map"],async load(){const e=await n.e(2729).then(n.bind(n,22729));return e.json()}},{name:"JSX",displayName:s.__("JSX"),mime:"text/jsx",extensions:["jsx"],async load(){const e=await n.e(8103).then(n.bind(n,88103));return e.javascript({jsx:true})}},{name:"MariaDB SQL",displayName:s.__("MariaDB SQL"),mime:"text/x-mariadb",load(){return i("MariaSQL")}},{name:"Markdown",displayName:s.__("Markdown"),mime:"text/x-markdown",extensions:["md","markdown","mkd"],async load(){const e=await n.e(5625).then(n.t.bind(n,95625,23));return e.markdown({codeLanguages:this._modeList})}},{name:"MS SQL",displayName:s.__("MS SQL"),mime:"text/x-mssql",load(){return i("MSSQL")}},{name:"MySQL",displayName:s.__("MySQL"),mime:"text/x-mysql",load(){return i("MySQL")}},{name:"PHP",displayName:s.__("PHP"),mime:["text/x-php","application/x-httpd-php","application/x-httpd-php-open"],extensions:["php","php3","php4","php5","php7","phtml"],async load(){const e=await Promise.all([n.e(8103),n.e(7425),n.e(1962),n.e(5942)]).then(n.bind(n,35942));return e.php()}},{name:"PLSQL",displayName:s.__("PLSQL"),mime:"text/x-plsql",extensions:["pls"],load(){return i("PLSQL")}},{name:"PostgreSQL",displayName:s.__("PostgreSQL"),mime:"text/x-pgsql",load(){return i("PostgreSQL")}},{name:"Python",displayName:s.__("Python"),mime:"text/x-python",extensions:["BUILD","bzl","py","pyw"],filename:/^(BUCK|BUILD)$/,async load(){const e=await n.e(9329).then(n.bind(n,9329));return new c.LanguageSupport(e.pythonLanguage,ne(e.pythonLanguage))}},{name:"ipython",displayName:s.__("ipython"),mime:"text/x-ipython",async load(){const e=await n.e(9329).then(n.bind(n,9329));return new c.LanguageSupport(e.pythonLanguage,ne(e.pythonLanguage))}},{name:"Rust",displayName:s.__("Rust"),mime:"text/x-rustsrc",extensions:["rs"],async load(){const e=await n.e(7250).then(n.bind(n,97250));return e.rust()}},{name:"SQL",displayName:s.__("SQL"),mime:["application/sql","text/x-sql"],extensions:["sql"],load(){return i("StandardSQL")}},{name:"SQLite",displayName:s.__("SQLite"),mime:"text/x-sqlite",load(){return i("SQLite")}},{name:"TSX",displayName:s.__("TSX"),alias:["TypeScript-JSX"],mime:"text/typescript-jsx",extensions:["tsx"],async load(){const e=await n.e(8103).then(n.bind(n,88103));return e.javascript({jsx:true,typescript:true})}},{name:"TypeScript",displayName:s.__("TypeScript"),alias:["ts"],mime:"application/typescript",extensions:["ts"],async load(){const e=await n.e(8103).then(n.bind(n,88103));return e.javascript({typescript:true})}},{name:"WebAssembly",displayName:s.__("WebAssembly"),mime:"text/webassembly",extensions:["wat","wast"],async load(){const e=await n.e(6095).then(n.bind(n,86095));return e.wast()}},{name:"XML",displayName:s.__("XML"),alias:["rss","wsdl","xsd"],mime:["application/xml","text/xml"],extensions:["xml","xsl","xsd","svg"],async load(){const e=await n.e(1495).then(n.bind(n,21495));return e.xml()}},{name:"APL",displayName:s.__("APL"),mime:"text/apl",extensions:["dyalog","apl"],async load(){const e=await n.e(5085).then(n.bind(n,65085));return t(e.apl)}},{name:"PGP",displayName:s.__("PGP"),alias:["asciiarmor"],mime:["application/pgp","application/pgp-encrypted","application/pgp-keys","application/pgp-signature"],extensions:["asc","pgp","sig"],async load(){const e=await n.e(1834).then(n.bind(n,11834));return t(e.asciiArmor)}},{name:"ASN.1",displayName:s.__("ASN.1"),mime:"text/x-ttcn-asn",extensions:["asn","asn1"],async load(){const e=await n.e(5929).then(n.bind(n,25929));return t(e.asn1({}))}},{name:"Asterisk",displayName:s.__("Asterisk"),mime:"text/x-asterisk",filename:/^extensions\.conf$/i,async load(){const e=await n.e(1436).then(n.bind(n,11436));return t(e.asterisk)}},{name:"Brainfuck",displayName:s.__("Brainfuck"),mime:"text/x-brainfuck",extensions:["b","bf"],async load(){const e=await n.e(1737).then(n.bind(n,94118));return t(e.brainfuck)}},{name:"Cobol",displayName:s.__("Cobol"),mime:"text/x-cobol",extensions:["cob","cpy"],async load(){const e=await n.e(8217).then(n.bind(n,58217));return t(e.cobol)}},{name:"C#",displayName:s.__("C#"),alias:["csharp","cs"],mime:"text/x-csharp",extensions:["cs"],async load(){const e=await n.e(4528).then(n.bind(n,24528));return t(e.csharp)}},{name:"Clojure",displayName:s.__("Clojure"),mime:"text/x-clojure",extensions:["clj","cljc","cljx"],async load(){const e=await n.e(3974).then(n.bind(n,93974));return t(e.clojure)}},{name:"ClojureScript",displayName:s.__("ClojureScript"),mime:"text/x-clojurescript",extensions:["cljs"],async load(){const e=await n.e(3974).then(n.bind(n,93974));return t(e.clojure)}},{name:"Closure Stylesheets (GSS)",displayName:s.__("Closure Stylesheets (GSS)"),mime:"text/x-gss",extensions:["gss"],async load(){const e=await n.e(9137).then(n.bind(n,59137));return t(e.gss)}},{name:"CMake",displayName:s.__("CMake"),mime:"text/x-cmake",extensions:["cmake","cmake.in"],filename:/^CMakeLists\.txt$/,async load(){const e=await n.e(5317).then(n.bind(n,55317));return t(e.cmake)}},{name:"CoffeeScript",displayName:s.__("CoffeeScript"),alias:["coffee","coffee-script"],mime:["application/vnd.coffeescript","text/coffeescript","text/x-coffeescript"],extensions:["coffee"],async load(){const e=await n.e(2823).then(n.bind(n,82823));return t(e.coffeeScript)}},{name:"Common Lisp",displayName:s.__("Common Lisp"),alias:["lisp"],mime:"text/x-common-lisp",extensions:["cl","lisp","el"],async load(){const e=await n.e(4797).then(n.bind(n,14797));return t(e.commonLisp)}},{name:"Cypher",displayName:s.__("Cypher"),mime:"application/x-cypher-query",extensions:["cyp","cypher"],async load(){const e=await n.e(9023).then(n.bind(n,99023));return t(e.cypher)}},{name:"Cython",displayName:s.__("Cython"),mime:"text/x-cython",extensions:["pyx","pxd","pxi"],async load(){const e=await n.e(8830).then(n.bind(n,68830));return t(e.cython)}},{name:"Crystal",displayName:s.__("Crystal"),mime:"text/x-crystal",extensions:["cr"],async load(){const e=await n.e(3372).then(n.bind(n,43372));return t(e.crystal)}},{name:"D",displayName:s.__("D"),mime:"text/x-d",extensions:["d"],async load(){const e=await n.e(5318).then(n.bind(n,55318));return t(e.d)}},{name:"Dart",displayName:s.__("Dart"),mime:["application/dart","text/x-dart"],extensions:["dart"],async load(){const e=await n.e(4528).then(n.bind(n,24528));return t(e.dart)}},{name:"diff",displayName:s.__("diff"),mime:"text/x-diff",extensions:["diff","patch"],async load(){const e=await n.e(1991).then(n.bind(n,91991));return t(e.diff)}},{name:"Dockerfile",displayName:s.__("Dockerfile"),mime:"text/x-dockerfile",filename:/^Dockerfile$/,async load(){const e=await n.e(2574).then(n.bind(n,92574));return t(e.dockerFile)}},{name:"DTD",displayName:s.__("DTD"),mime:"application/xml-dtd",extensions:["dtd"],async load(){const e=await n.e(246).then(n.bind(n,30246));return t(e.dtd)}},{name:"Dylan",displayName:s.__("Dylan"),mime:"text/x-dylan",extensions:["dylan","dyl","intr"],async load(){const e=await n.e(4076).then(n.bind(n,24076));return t(e.dylan)}},{name:"EBNF",displayName:s.__("EBNF"),mime:"text/x-ebnf",async load(){const e=await n.e(7587).then(n.bind(n,17587));return t(e.ebnf)}},{name:"ECL",displayName:s.__("ECL"),mime:"text/x-ecl",extensions:["ecl"],async load(){const e=await n.e(6294).then(n.bind(n,26294));return t(e.ecl)}},{name:"edn",displayName:s.__("edn"),mime:"application/edn",extensions:["edn"],async load(){const e=await n.e(3974).then(n.bind(n,93974));return t(e.clojure)}},{name:"Eiffel",displayName:s.__("Eiffel"),mime:"text/x-eiffel",extensions:["e"],async load(){const e=await n.e(1887).then(n.bind(n,81887));return t(e.eiffel)}},{name:"Elm",displayName:s.__("Elm"),mime:"text/x-elm",extensions:["elm"],async load(){const e=await n.e(7318).then(n.bind(n,97318));return t(e.elm)}},{name:"Erlang",displayName:s.__("Erlang"),mime:"text/x-erlang",extensions:["erl"],async load(){const e=await n.e(867).then(n.bind(n,90867));return t(e.erlang)}},{name:"Esper",displayName:s.__("Esper"),mime:"text/x-esper",async load(){const e=await n.e(5566).then(n.bind(n,95566));return t(e.esper)}},{name:"Factor",displayName:s.__("Factor"),mime:"text/x-factor",extensions:["factor"],async load(){const e=await n.e(5211).then(n.bind(n,5211));return t(e.factor)}},{name:"FCL",displayName:s.__("FCL"),mime:"text/x-fcl",async load(){const e=await n.e(6831).then(n.bind(n,86831));return t(e.fcl)}},{name:"Forth",displayName:s.__("Forth"),mime:"text/x-forth",extensions:["forth","fth","4th"],async load(){const e=await n.e(6941).then(n.bind(n,46941));return t(e.forth)}},{name:"Fortran",displayName:s.__("Fortran"),mime:"text/x-fortran",extensions:["f","for","f77","f90","f95"],async load(){const e=await n.e(4408).then(n.bind(n,74408));return t(e.fortran)}},{name:"F#",displayName:s.__("F#"),alias:["fsharp"],mime:"text/x-fsharp",extensions:["fs"],async load(){const e=await n.e(1954).then(n.bind(n,21954));return t(e.fSharp)}},{name:"Gas",displayName:s.__("Gas"),mime:"text/x-gas",extensions:["s"],async load(){const e=await n.e(9123).then(n.bind(n,19123));return t(e.gas)}},{name:"Gherkin",displayName:s.__("Gherkin"),mime:"text/x-feature",extensions:["feature"],async load(){const e=await n.e(6060).then(n.bind(n,56060));return t(e.gherkin)}},{name:"Go",displayName:s.__("Go"),mime:"text/x-go",extensions:["go"],async load(){const e=await n.e(8418).then(n.bind(n,28418));return t(e.go)}},{name:"Groovy",displayName:s.__("Groovy"),mime:"text/x-groovy",extensions:["groovy","gradle"],filename:/^Jenkinsfile$/,async load(){const e=await n.e(8493).then(n.bind(n,40874));return t(e.groovy)}},{name:"Haskell",displayName:s.__("Haskell"),mime:"text/x-haskell",extensions:["hs"],async load(){const e=await n.e(1986).then(n.bind(n,1986));return t(e.haskell)}},{name:"Haxe",displayName:s.__("Haxe"),mime:"text/x-haxe",extensions:["hx"],async load(){const e=await n.e(6412).then(n.bind(n,56412));return t(e.haxe)}},{name:"HXML",displayName:s.__("HXML"),mime:"text/x-hxml",extensions:["hxml"],async load(){const e=await n.e(6412).then(n.bind(n,56412));return t(e.hxml)}},{name:"HTTP",displayName:s.__("HTTP"),mime:"message/http",async load(){const e=await n.e(3112).then(n.bind(n,3112));return t(e.http)}},{name:"IDL",displayName:s.__("IDL"),mime:"text/x-idl",extensions:["pro"],async load(){const e=await n.e(7769).then(n.bind(n,7769));return t(e.idl)}},{name:"JSON-LD",displayName:s.__("JSON-LD"),alias:["jsonld"],mime:"application/ld+json",extensions:["jsonld"],async load(){const e=await n.e(8368).then(n.bind(n,85987));return t(e.jsonld)}},{name:"Jinja2",displayName:s.__("Jinja2"),mime:"text/jinja2",extensions:["j2","jinja","jinja2"],async load(){const e=await n.e(7694).then(n.bind(n,57694));return t(e.jinja2)}},{name:"Julia",displayName:s.__("Julia"),mime:"text/x-julia",extensions:["jl"],async load(){const e=await n.e(7575).then(n.bind(n,47575));return t(e.julia)}},{name:"Kotlin",displayName:s.__("Kotlin"),mime:"text/x-kotlin",extensions:["kt"],async load(){const e=await n.e(4528).then(n.bind(n,24528));return t(e.kotlin)}},{name:"LESS",displayName:s.__("LESS"),mime:"text/x-less",extensions:["less"],async load(){const e=await n.e(9137).then(n.bind(n,59137));return t(e.less)}},{name:"LiveScript",displayName:s.__("LiveScript"),alias:["ls"],mime:"text/x-livescript",extensions:["ls"],async load(){const e=await n.e(7881).then(n.bind(n,27881));return t(e.liveScript)}},{name:"Lua",displayName:s.__("Lua"),mime:"text/x-lua",extensions:["lua"],async load(){const e=await n.e(1960).then(n.bind(n,41960));return t(e.lua)}},{name:"mIRC",displayName:s.__("mIRC"),mime:"text/mirc",async load(){const e=await n.e(1449).then(n.bind(n,21449));return t(e.mirc)}},{name:"Mathematica",displayName:s.__("Mathematica"),mime:"text/x-mathematica",extensions:["m","nb","wl","wls"],async load(){const e=await n.e(5862).then(n.bind(n,95862));return t(e.mathematica)}},{name:"Modelica",displayName:s.__("Modelica"),mime:"text/x-modelica",extensions:["mo"],async load(){const e=await n.e(3832).then(n.bind(n,83832));return t(e.modelica)}},{name:"MUMPS",displayName:s.__("MUMPS"),mime:"text/x-mumps",extensions:["mps"],async load(){const e=await n.e(2658).then(n.bind(n,12658));return t(e.mumps)}},{name:"mbox",displayName:s.__("mbox"),mime:"application/mbox",extensions:["mbox"],async load(){const e=await n.e(4068).then(n.bind(n,34068));return t(e.mbox)}},{name:"Nginx",displayName:s.__("Nginx"),mime:"text/x-nginx-conf",filename:/nginx.*\.conf$/i,async load(){const e=await n.e(8326).then(n.bind(n,98326));return t(e.nginx)}},{name:"NSIS",displayName:s.__("NSIS"),mime:"text/x-nsis",extensions:["nsh","nsi"],async load(){const e=await n.e(339).then(n.bind(n,70339));return t(e.nsis)}},{name:"NTriples",displayName:s.__("NTriples"),mime:["application/n-triples","application/n-quads","text/n-triples"],extensions:["nt","nq"],async load(){const e=await n.e(5847).then(n.bind(n,85847));return t(e.ntriples)}},{name:"Objective-C",displayName:s.__("Objective-C"),alias:["objective-c","objc"],mime:"text/x-objectivec",extensions:["m"],async load(){const e=await n.e(4528).then(n.bind(n,24528));return t(e.objectiveC)}},{name:"Objective-C++",displayName:s.__("Objective-C++"),alias:["objective-c++","objc++"],mime:"text/x-objectivec++",extensions:["mm"],async load(){const e=await n.e(4528).then(n.bind(n,24528));return t(e.objectiveCpp)}},{name:"OCaml",displayName:s.__("OCaml"),mime:"text/x-ocaml",extensions:["ml","mli","mll","mly"],async load(){const e=await n.e(1954).then(n.bind(n,21954));return t(e.oCaml)}},{name:"Octave",displayName:s.__("Octave"),mime:"text/x-octave",extensions:["m"],async load(){const e=await n.e(7260).then(n.bind(n,7260));return t(e.octave)}},{name:"Oz",displayName:s.__("Oz"),mime:"text/x-oz",extensions:["oz"],async load(){const e=await n.e(7445).then(n.bind(n,57445));return t(e.oz)}},{name:"Pascal",displayName:s.__("Pascal"),mime:"text/x-pascal",extensions:["p","pas"],async load(){const e=await n.e(8232).then(n.bind(n,38232));return t(e.pascal)}},{name:"Perl",displayName:s.__("Perl"),mime:"text/x-perl",extensions:["pl","pm"],async load(){const e=await n.e(3709).then(n.bind(n,73709));return t(e.perl)}},{name:"Pig",displayName:s.__("Pig"),mime:"text/x-pig",extensions:["pig"],async load(){const e=await n.e(4486).then(n.bind(n,14486));return t(e.pig)}},{name:"PowerShell",displayName:s.__("PowerShell"),mime:"application/x-powershell",extensions:["ps1","psd1","psm1"],async load(){const e=await n.e(6145).then(n.bind(n,26145));return t(e.powerShell)}},{name:"Properties files",displayName:s.__("Properties files"),alias:["ini","properties"],mime:"text/x-properties",extensions:["properties","ini","in"],async load(){const e=await n.e(9517).then(n.bind(n,79517));return t(e.properties)}},{name:"ProtoBuf",displayName:s.__("ProtoBuf"),mime:"text/x-protobuf",extensions:["proto"],async load(){const e=await n.e(3303).then(n.bind(n,73303));return t(e.protobuf)}},{name:"Pug",displayName:s.__("Pug"),mime:"text/x-pug",extensions:["pug"],async load(){const e=await n.e(6170).then(n.bind(n,96170));return t(e.pug)}},{name:"Puppet",displayName:s.__("Puppet"),mime:"text/x-puppet",extensions:["pp"],async load(){const e=await n.e(4878).then(n.bind(n,54878));return t(e.puppet)}},{name:"Q",displayName:s.__("Q"),mime:"text/x-q",extensions:["q"],async load(){const e=await n.e(89).then(n.bind(n,30089));return t(e.q)}},{name:"R",displayName:s.__("R"),alias:["rscript"],mime:"text/x-rsrc",extensions:["r","R"],async load(){const e=await n.e(7136).then(n.bind(n,97136));return t(e.r)}},{name:"RPM Changes",displayName:s.__("RPM Changes"),mime:"text/x-rpm-changes",async load(){const e=await n.e(4323).then(n.bind(n,24323));return t(e.rpmChanges)}},{name:"RPM Spec",displayName:s.__("RPM Spec"),mime:"text/x-rpm-spec",extensions:["spec"],async load(){const e=await n.e(4323).then(n.bind(n,24323));return t(e.rpmSpec)}},{name:"Ruby",displayName:s.__("Ruby"),alias:["jruby","macruby","rake","rb","rbx"],mime:"text/x-ruby",extensions:["rb"],async load(){const e=await n.e(4616).then(n.bind(n,44616));return t(e.ruby)}},{name:"SAS",displayName:s.__("SAS"),mime:"text/x-sas",extensions:["sas"],async load(){const e=await n.e(247).then(n.bind(n,90247));return t(e.sas)}},{name:"Scala",displayName:s.__("Scala"),mime:"text/x-scala",extensions:["scala"],async load(){const e=await n.e(4528).then(n.bind(n,24528));return t(e.scala)}},{name:"Scheme",displayName:s.__("Scheme"),mime:"text/x-scheme",extensions:["scm","ss"],async load(){const e=await n.e(2959).then(n.bind(n,42959));return t(e.scheme)}},{name:"SCSS",displayName:s.__("SCSS"),mime:"text/x-scss",extensions:["scss"],async load(){const e=await n.e(9137).then(n.bind(n,59137));return t(e.sCSS)}},{name:"Shell",displayName:s.__("Shell"),alias:["bash","sh","zsh"],mime:["text/x-sh","application/x-sh"],extensions:["sh","ksh","bash"],filename:/^PKGBUILD$/,async load(){const e=await n.e(84).then(n.bind(n,50084));return t(e.shell)}},{name:"Sieve",displayName:s.__("Sieve"),mime:"application/sieve",extensions:["siv","sieve"],async load(){const e=await n.e(5224).then(n.bind(n,15224));return t(e.sieve)}},{name:"Smalltalk",displayName:s.__("Smalltalk"),mime:"text/x-stsrc",extensions:["st"],async load(){const e=await n.e(5987).then(n.bind(n,8368));return t(e.smalltalk)}},{name:"Solr",displayName:s.__("Solr"),mime:"text/x-solr",async load(){const e=await n.e(2280).then(n.bind(n,82280));return t(e.solr)}},{name:"SML",displayName:s.__("SML"),mime:"text/x-sml",extensions:["sml","sig","fun","smackspec"],async load(){const e=await n.e(1954).then(n.bind(n,21954));return t(e.sml)}},{name:"SPARQL",displayName:s.__("SPARQL"),alias:["sparul"],mime:"application/sparql-query",extensions:["rq","sparql"],async load(){const e=await n.e(8753).then(n.bind(n,58753));return t(e.sparql)}},{name:"Spreadsheet",displayName:s.__("Spreadsheet"),alias:["excel","formula"],mime:"text/x-spreadsheet",async load(){const e=await n.e(3780).then(n.bind(n,23780));return t(e.spreadsheet)}},{name:"Squirrel",displayName:s.__("Squirrel"),mime:"text/x-squirrel",extensions:["nut"],async load(){const e=await n.e(4528).then(n.bind(n,24528));return t(e.squirrel)}},{name:"Stylus",displayName:s.__("Stylus"),mime:"text/x-styl",extensions:["styl"],async load(){const e=await n.e(4462).then(n.bind(n,84462));return t(e.stylus)}},{name:"Swift",displayName:s.__("Swift"),mime:"text/x-swift",extensions:["swift"],async load(){const e=await n.e(321).then(n.bind(n,90321));return t(e.swift)}},{name:"sTeX",displayName:s.__("sTeX"),mime:"text/x-stex",async load(){const e=await n.e(9746).then(n.bind(n,89746));return t(e.stex)}},{name:"LaTeX",displayName:s.__("LaTeX"),alias:["tex"],mime:"text/x-latex",extensions:["text","ltx","tex"],async load(){const e=await n.e(9746).then(n.bind(n,89746));return t(e.stex)}},{name:"SystemVerilog",displayName:s.__("SystemVerilog"),mime:"text/x-systemverilog",extensions:["v","sv","svh"],async load(){const e=await n.e(4372).then(n.bind(n,14372));return t(e.verilog)}},{name:"Tcl",displayName:s.__("Tcl"),mime:"text/x-tcl",extensions:["tcl"],async load(){const e=await n.e(1189).then(n.bind(n,91189));return t(e.tcl)}},{name:"Textile",displayName:s.__("Textile"),mime:"text/x-textile",extensions:["textile"],async load(){const e=await n.e(4611).then(n.bind(n,64611));return t(e.textile)}},{name:"TiddlyWiki",displayName:s.__("TiddlyWiki"),mime:"text/x-tiddlywiki",async load(){const e=await n.e(7756).then(n.bind(n,7756));return t(e.tiddlyWiki)}},{name:"Tiki wiki",displayName:s.__("Tiki wiki"),mime:"text/tiki",async load(){const e=await n.e(6843).then(n.bind(n,6843));return t(e.tiki)}},{name:"TOML",displayName:s.__("TOML"),mime:"text/x-toml",extensions:["toml"],async load(){const e=await n.e(6460).then(n.bind(n,56460));return t(e.toml)}},{name:"troff",displayName:s.__("troff"),mime:"text/troff",extensions:["1","2","3","4","5","6","7","8","9"],async load(){const e=await n.e(4053).then(n.bind(n,34053));return t(e.troff)}},{name:"TTCN",displayName:s.__("TTCN"),mime:"text/x-ttcn",extensions:["ttcn","ttcn3","ttcnpp"],async load(){const e=await n.e(7269).then(n.bind(n,57269));return t(e.ttcn)}},{name:"TTCN_CFG",displayName:s.__("TTCN_CFG"),mime:"text/x-ttcn-cfg",extensions:["cfg"],async load(){const e=await n.e(6874).then(n.bind(n,96874));return t(e.ttcnCfg)}},{name:"Turtle",displayName:s.__("Turtle"),mime:"text/turtle",extensions:["ttl"],async load(){const e=await n.e(9474).then(n.bind(n,59474));return t(e.turtle)}},{name:"Web IDL",displayName:s.__("Web IDL"),mime:"text/x-webidl",extensions:["webidl"],async load(){const e=await n.e(265).then(n.bind(n,50265));return t(e.webIDL)}},{name:"VB.NET",displayName:s.__("VB.NET"),mime:"text/x-vb",extensions:["vb"],async load(){const e=await n.e(492).then(n.bind(n,30492));return t(e.vb)}},{name:"VBScript",displayName:s.__("VBScript"),mime:"text/vbscript",extensions:["vbs"],async load(){const e=await n.e(6767).then(n.bind(n,56767));return t(e.vbScript)}},{name:"Velocity",displayName:s.__("Velocity"),mime:"text/velocity",extensions:["vtl"],async load(){const e=await n.e(2467).then(n.bind(n,2467));return t(e.velocity)}},{name:"Verilog",displayName:s.__("Verilog"),mime:"text/x-verilog",extensions:["v"],async load(){const e=await n.e(4372).then(n.bind(n,14372));return t(e.verilog)}},{name:"VHDL",displayName:s.__("VHDL"),mime:"text/x-vhdl",extensions:["vhd","vhdl"],async load(){const e=await n.e(4838).then(n.bind(n,84838));return t(e.vhdl)}},{name:"XQuery",displayName:s.__("XQuery"),mime:"application/xquery",extensions:["xy","xquery"],async load(){const e=await n.e(4484).then(n.bind(n,34484));return t(e.xQuery)}},{name:"Yacas",displayName:s.__("Yacas"),mime:"text/x-yacas",extensions:["ys"],async load(){const e=await n.e(2681).then(n.bind(n,82681));return t(e.yacas)}},{name:"YAML",displayName:s.__("YAML"),alias:["yml"],mime:["text/x-yaml","text/yaml"],extensions:["yaml","yml"],async load(){const e=await n.e(731).then(n.bind(n,30731));return t(e.yaml)}},{name:"Z80",displayName:s.__("Z80"),mime:"text/x-z80",extensions:["z80"],async load(){const e=await n.e(4296).then(n.bind(n,44296));return t(e.z80)}},{name:"mscgen",displayName:s.__("mscgen"),mime:"text/x-mscgen",extensions:["mscgen","mscin","msc"],async load(){const e=await n.e(5877).then(n.bind(n,15877));return t(e.mscgen)}},{name:"xu",displayName:s.__("xu"),mime:"text/x-xu",extensions:["xu"],async load(){const e=await n.e(5877).then(n.bind(n,15877));return t(e.xu)}},{name:"msgenny",displayName:s.__("msgenny"),mime:"text/x-msgenny",extensions:["msgenny"],async load(){const e=await n.e(5877).then(n.bind(n,15877));return t(e.msgenny)}}]}e.getDefaultLanguages=s})(se||(se={}));const oe="jp-CodeMirrorEditor";const re=38;const ae=40;class le{constructor(e){var t,n,i,s,o,r;this.edgeRequested=new m.Signal(this);this._isDisposed=false;this._language=new h.Compartment;this._uuid="";this._languages=(t=e.languages)!==null&&t!==void 0?t:new se;this._configurator=(s=(n=e.extensionsRegistry)===null||n===void 0?void 0:n.createNew({...e,inline:(i=e.inline)!==null&&i!==void 0?i:false}))!==null&&s!==void 0?s:new K;const a=this.host=e.host;a.classList.add(oe);a.classList.add("jp-Editor");a.addEventListener("focus",this,true);a.addEventListener("blur",this,true);a.addEventListener("scroll",this,true);this._uuid=(o=e.uuid)!==null&&o!==void 0?o:p.UUID.uuid4();const l=this._model=e.model;const d=u.EditorView.domEventHandlers({keydown:(e,t)=>this.onKeydown(e)});const c=u.EditorView.updateListener.of((e=>{this._onDocChanged(e)}));this._editor=de.createEditor(a,this._configurator,[h.Prec.high(d),c,this._language.of([]),...(r=e.extensions)!==null&&r!==void 0?r:[]],l.sharedModel.source);this._onMimeTypeChanged();this._onCursorActivity();this._configurator.configChanged.connect(this.onConfigChanged,this);l.mimeTypeChanged.connect(this._onMimeTypeChanged,this)}get uuid(){return this._uuid}set uuid(e){this._uuid=e}get editor(){return this._editor}get doc(){return this._editor.state.doc}get lineCount(){return this.doc.lines}get model(){return this._model}get lineHeight(){return this._editor.defaultLineHeight}get charWidth(){return this._editor.defaultCharacterWidth}get isDisposed(){return this._isDisposed}dispose(){if(this.isDisposed){return}this._isDisposed=true;this.host.removeEventListener("focus",this,true);this.host.removeEventListener("blur",this,true);this.host.removeEventListener("scroll",this,true);this._configurator.dispose();m.Signal.clearData(this);this.editor.destroy()}getOption(e){return this._configurator.getOption(e)}hasOption(e){return this._configurator.hasOption(e)}setOption(e,t){this._configurator.setOption(e,t)}setOptions(e){this._configurator.setOptions(e)}setBaseOptions(e){this._configurator.setBaseOptions(e)}injectExtension(e){this._configurator.injectExtension(this._editor,e)}getLine(e){e=e+1;return e<=this.doc.lines?this.doc.line(e).text:undefined}getOffsetAt(e){return this.doc.line(e.line+1).from+e.column}getPositionAt(e){const t=this.doc.lineAt(e);return{line:t.number-1,column:e-t.from}}undo(){this.model.sharedModel.undo()}redo(){this.model.sharedModel.redo()}clearHistory(){this.model.sharedModel.clearUndoHistory()}focus(){this._editor.focus()}hasFocus(){return this._editor.hasFocus}blur(){this._editor.contentDOM.blur()}get state(){return this._editor.state}firstLine(){return 0}lastLine(){return this.doc.lines-1}cursorCoords(e,t){const n=this.state.selection.main;const i=e?n.from:n.to;const s=this.editor.coordsAtPos(i);return s}getRange(e,t,n){const i=this.getOffsetAt(this._toPosition(e));const s=this.getOffsetAt(this._toPosition(t));return this.state.sliceDoc(i,s)}revealPosition(e){const t=this.getOffsetAt(e);this._editor.dispatch({effects:u.EditorView.scrollIntoView(t)})}revealSelection(e){const t=this.getOffsetAt(e.start);const n=this.getOffsetAt(e.end);this._editor.dispatch({effects:u.EditorView.scrollIntoView(h.EditorSelection.range(t,n))})}getCoordinateForPosition(e){const t=this.getOffsetAt(e);const n=this.editor.coordsAtPos(t);return n}getPositionForCoordinate(e){const t=this.editor.posAtCoords({x:e.left,y:e.top});return this.getPositionAt(t)||null}getCursorPosition(){const e=this.state.selection.main.head;return this.getPositionAt(e)}setCursorPosition(e,t={}){const n=this.getOffsetAt(e);this.editor.dispatch({selection:{anchor:n},scrollIntoView:t.scroll===false?false:true});if(!this.editor.hasFocus){this.model.selections.set(this.uuid,this.getSelections())}}getSelection(){return this.getSelections()[0]}setSelection(e){this.setSelections([e])}getSelections(){const e=this.state.selection.ranges;if(e.length>0){const t=e.map((e=>({anchor:this._toCodeMirrorPosition(this.getPositionAt(e.from)),head:this._toCodeMirrorPosition(this.getPositionAt(e.to))})));return t.map((e=>this._toSelection(e)))}const t=this._toCodeMirrorPosition(this.getPositionAt(this.state.selection.main.head));const n=this._toSelection({anchor:t,head:t});return[n]}setSelections(e){const t=e.length?e.map((e=>h.EditorSelection.range(this.getOffsetAt(e.start),this.getOffsetAt(e.end)))):[h.EditorSelection.range(0,0)];this.editor.dispatch({selection:h.EditorSelection.create(t)})}replaceSelection(e){const t=this.getSelections()[0];this.model.sharedModel.updateSource(this.getOffsetAt(t.start),this.getOffsetAt(t.end),e);const n=this.getPositionAt(this.getOffsetAt(t.start)+e.length);this.setSelection({start:n,end:n})}getTokens(){const e=[];const t=(0,c.ensureSyntaxTree)(this.state,this.doc.length);if(t){t.iterate({enter:t=>{if(t.node.firstChild===null){e.push({value:this.state.sliceDoc(t.from,t.to),offset:t.from,type:t.name})}return true}})}return e}getTokenAt(e){const t=(0,c.ensureSyntaxTree)(this.state,e);let n=null;if(t){t.iterate({enter:t=>{if(n){return false}if(t.node.firstChild){return true}if(e>=t.from&&e<=t.to){let e=t;if(t.name===""&&t.from===t.to&&t.node.parent){e=t.node.parent}n={value:this.state.sliceDoc(e.from,e.to),offset:e.from,type:e.name};return false}return true}})}return n||{offset:e,value:""}}getTokenAtCursor(){return this.getTokenAt(this.state.selection.main.head)}newIndentedLine(){(0,i.insertNewlineAndIndent)({state:this.state,dispatch:this.editor.dispatch})}execCommand(e){e(this.editor)}onConfigChanged(e,t){const n=Object.keys(t).reduce(((e,n)=>{if(t[n]!=undefined){e[n]=t[n]}return e}),{});e.reconfigureExtensions(this._editor,n);if(t["customStyles"]&&!t["fontSize"]){this.editor.setState(this.editor.state)}}onKeydown(e){const t=this.state.selection.main.head;if(t===0&&e.keyCode===re){if(!e.shiftKey){this.edgeRequested.emit("top")}return false}const n=this.doc.lineAt(t).number;if(n===1&&e.keyCode===re){if(!e.shiftKey){this.edgeRequested.emit("topLine")}return false}const i=this.doc.length;if(t===i&&e.keyCode===ae){if(!e.shiftKey){this.edgeRequested.emit("bottom")}return false}return false}_onMimeTypeChanged(){this._languages.getLanguage(this._model.mimeType).then((e=>{var t;this._editor.dispatch({effects:this._language.reconfigure((t=e===null||e===void 0?void 0:e.support)!==null&&t!==void 0?t:[])})})).catch((e=>{console.log(`Failed to load language for '${this._model.mimeType}'.`,e);this._editor.dispatch({effects:this._language.reconfigure([])})}))}_onCursorActivity(){if(this._editor.hasFocus){const e=this.getSelections();this.model.selections.set(this.uuid,e)}}_toSelection(e){return{uuid:this.uuid,start:this._toPosition(e.anchor),end:this._toPosition(e.head)}}_toPosition(e){return{line:e.line,column:e.ch}}_toCodeMirrorPosition(e){return{line:e.line,ch:e.column}}_onDocChanged(e){if(e.transactions.length&&e.transactions[0].selection){this._onCursorActivity()}}handleEvent(e){switch(e.type){case"focus":this._evtFocus(e);break;case"blur":this._evtBlur(e);break;default:break}}_evtFocus(e){this.host.classList.add("jp-mod-focused");this._onCursorActivity()}_evtBlur(e){this.host.classList.remove("jp-mod-focused")}}var de;(function(e){function t(e,t,n,i){const s=t.getInitialExtensions();s.push(...n);const o=new u.EditorView({state:h.EditorState.create({doc:i,extensions:s}),parent:e});return o}e.createEditor=t})(de||(de={}));class ce{constructor(e={}){var t,n,i;this.newInlineEditor=e=>{e.host.dataset.type="inline";return this.newEditor({...e,config:{...this.inlineCodeMirrorConfig,...e.config||{}},inline:true})};this.newDocumentEditor=e=>{var t,n;e.host.dataset.type="document";return this.newEditor({...e,config:{...this.documentCodeMirrorConfig,...(t=e.config)!==null&&t!==void 0?t:{}},inline:false,extensions:[u.keymap.of([{key:"Shift-Enter",run:e=>true}])].concat((n=e.extensions)!==null&&n!==void 0?n:[])})};this.languages=(t=e.languages)!==null&&t!==void 0?t:new se;this.extensions=(n=e.extensions)!==null&&n!==void 0?n:new J;this.translator=(i=e.translator)!==null&&i!==void 0?i:f.nullTranslator;this.inlineCodeMirrorConfig={searchWithCM:true};this.documentCodeMirrorConfig={lineNumbers:true,scrollPastEnd:true}}newEditor(e){const t=new le({extensionsRegistry:this.extensions,languages:this.languages,translator:this.translator,...e});return t}}class he{constructor(e){this.languages=e}getMimeTypeByLanguage(e){var t;const n=e.file_extension||"";const i=this.languages.findBest(e.codemirror_mode||{mimetype:e.mimetype,name:e.name,ext:[n.split(".").slice(-1)[0]]});return i?Array.isArray(i.mime)?(t=i.mime[0])!==null&&t!==void 0?t:s.IEditorMimeTypeService.defaultMimeType:i.mime:s.IEditorMimeTypeService.defaultMimeType}getMimeTypeByFilePath(e){var t;const n=G.PathExt.extname(e);if(n===".ipy"){return"text/x-python"}else if(n===".md"){return"text/x-ipythongfm"}const i=this.languages.findByFileName(e);return i?Array.isArray(i.mime)?(t=i.mime[0])!==null&&t!==void 0?t:s.IEditorMimeTypeService.defaultMimeType:i.mime:s.IEditorMimeTypeService.defaultMimeType}}var ue=n(99264);class pe{constructor(){this.currentIndex=null;this.query=null;this._isActive=true;this._inSelection=null;this._isDisposed=false;this._cmHandler=null;this.currentIndex=null;this._stateChanged=new m.Signal(this)}get cmHandler(){if(!this._cmHandler){this._cmHandler=new me(this.editor)}return this._cmHandler}get stateChanged(){return this._stateChanged}get currentMatchIndex(){return this.isActive?this.currentIndex:null}get isActive(){return this._isActive}get isDisposed(){return this._isDisposed}get matchesCount(){return this.isActive?this.cmHandler.matches.length:0}clearHighlight(){this.currentIndex=null;this.cmHandler.clearHighlight();return Promise.resolve()}dispose(){if(this._isDisposed){return}this._isDisposed=true;m.Signal.clearData(this);if(this.isActive){this.endQuery().catch((e=>{console.error(`Failed to end search query on cells.`,e)}))}}async setIsActive(e){if(this._isActive===e){return}this._isActive=e;if(this._isActive){if(this.query!==null){await this.startQuery(this.query,this.filters)}}else{await this.endQuery()}}async setSearchSelection(e){if(this._inSelection===e){return}this._inSelection=e;await this.updateCodeMirror(this.model.sharedModel.getSource());this._stateChanged.emit()}setProtectSelection(e){this.cmHandler.protectSelection=e}async startQuery(e,t){this.query=e;this.filters=t;const n=this.model.sharedModel.getSource();await this.updateCodeMirror(n);this.model.sharedModel.changed.connect(this.onSharedModelChanged,this)}async endQuery(){await this.clearHighlight();await this.cmHandler.endQuery();this.currentIndex=null}async highlightNext(e=true,t){if(this.matchesCount===0||!this.isActive){this.currentIndex=null}else{let n=await this.cmHandler.highlightNext(t);if(n){this.currentIndex=this.cmHandler.currentIndex}else{this.currentIndex=e?0:null}return n}return Promise.resolve(this.getCurrentMatch())}async highlightPrevious(e=true,t){if(this.matchesCount===0||!this.isActive){this.currentIndex=null}else{let n=await this.cmHandler.highlightPrevious(t);if(n){this.currentIndex=this.cmHandler.currentIndex}else{this.currentIndex=e?this.matchesCount-1:null}return n}return Promise.resolve(this.getCurrentMatch())}replaceCurrentMatch(e,t,n){if(!this.isActive){return Promise.resolve(false)}if(this.currentIndex!==null&&this.currentIndex<this.cmHandler.matches.length){const t=this.getCurrentMatch();if(!t){this.currentIndex=null}else{const i=(n===null||n===void 0?void 0:n.regularExpression)?t.text.replace(this.query,e):e;const s=(n===null||n===void 0?void 0:n.preserveCase)?ue.GenericSearchProvider.preserveCase(t.text,i):i;this.model.sharedModel.updateSource(t.position,t.position+t.text.length,s);return new Promise(((e,n)=>{this.updateCodeMirror(this.model.sharedModel.getSource()).then((()=>{const n=this.cmHandler.matches;const i=t.position+s.length;let o=false;for(let e=this.currentIndex||0;e<n.length;e++){if(n[e].position>=i){this.currentIndex=e;o=true;break}void this.highlightNext(false,{from:"previous-match"})}if(!o){this.currentIndex=null}e(true)})).catch((e=>{const t=`Failed to regenerate match list: ${e}`;console.error(t);n(t)}))}))}}return Promise.resolve(false)}replaceAllMatches(e,t){if(!this.isActive){return Promise.resolve(false)}let n=this.cmHandler.matches.length>0;let i=this.model.sharedModel.getSource();let s=0;const o=this.cmHandler.matches.reduce(((n,o)=>{const r=o.position;const a=r+o.text.length;const l=(t===null||t===void 0?void 0:t.regularExpression)?o.text.replace(this.query,e):e;const d=(t===null||t===void 0?void 0:t.preserveCase)?ue.GenericSearchProvider.preserveCase(o.text,l):l;const c=`${n}${i.slice(s,r)}${d}`;s=a;return c}),"");if(n){this.cmHandler.matches=[];this.currentIndex=null;this.model.sharedModel.setSource(`${o}${i.slice(s)}`)}return Promise.resolve(n)}getCurrentMatch(){if(this.currentIndex===null){return undefined}else{let e=undefined;if(this.currentIndex<this.cmHandler.matches.length){e=this.cmHandler.matches[this.currentIndex]}return e}}async onSharedModelChanged(e,t){if(t.sourceChange){await this.updateCodeMirror(e.getSource());this._stateChanged.emit()}}async updateCodeMirror(e){if(this.query!==null&&this.isActive){const t=await ue.TextSearchEngine.search(this.query,e);if(this._inSelection){const e=this.editor;const n=e.getOffsetAt(this._inSelection.start);const i=e.getOffsetAt(this._inSelection.end);this.cmHandler.matches=t.filter((e=>e.position>=n&&e.position<=i));if(this.cmHandler.currentIndex===null&&this.cmHandler.matches.length>0){await this.cmHandler.highlightNext({from:"selection",select:false,scroll:false})}this.currentIndex=this.cmHandler.currentIndex}else{this.cmHandler.matches=t}}else{this.cmHandler.matches=[]}}}class me{constructor(e){this._current=null;this._cm=e;this._matches=new Array;this._currentIndex=null;this._highlightEffect=h.StateEffect.define({map:(e,t)=>{const n=e=>({text:e.text,position:t.mapPos(e.position)});return{matches:e.matches.map(n),currentMatch:e.currentMatch?n(e.currentMatch):null}}});this._highlightMark=u.Decoration.mark({class:"cm-searching"});this._currentMark=u.Decoration.mark({class:"jp-current-match"});this._highlightField=h.StateField.define({create:()=>u.Decoration.none,update:(e,t)=>{e=e.map(t.changes);for(let n of t.effects){if(n.is(this._highlightEffect)){const t=n;if(t.value.matches.length){e=e.update({add:t.value.matches.map((e=>this._highlightMark.range(e.position,e.position+e.text.length))),filter:()=>false});e=e.update({add:t.value.currentMatch?[this._currentMark.range(t.value.currentMatch.position,t.value.currentMatch.position+t.value.currentMatch.text.length)]:[]})}else{e=u.Decoration.none}}}return e},provide:e=>u.EditorView.decorations.from(e)});this._domEventHandlers=u.EditorView.domEventHandlers({focus:()=>{this._selectCurrentMatch()}})}get currentIndex(){return this._currentIndex}get matches(){return this._matches}set matches(e){this._matches=e;if(this._currentIndex!==null&&this._currentIndex>this._matches.length){this._currentIndex=this._matches.length>0?0:null}this._highlightCurrentMatch({select:false})}get protectSelection(){return this._protectSelection}set protectSelection(e){this._protectSelection=e}clearHighlight(){this._currentIndex=null;this._highlightCurrentMatch()}endQuery(){this._currentIndex=null;this._matches=[];if(this._cm){this._cm.editor.dispatch({effects:this._highlightEffect.of({matches:[],currentMatch:null})})}return Promise.resolve()}highlightNext(e){var t;this._currentIndex=this._findNext(false,(t=e===null||e===void 0?void 0:e.from)!==null&&t!==void 0?t:"auto");this._highlightCurrentMatch(e);return Promise.resolve(this._currentIndex!==null?this._matches[this._currentIndex]:undefined)}highlightPrevious(e){var t;this._currentIndex=this._findNext(true,(t=e===null||e===void 0?void 0:e.from)!==null&&t!==void 0?t:"auto");this._highlightCurrentMatch(e);return Promise.resolve(this._currentIndex!==null?this._matches[this._currentIndex]:undefined)}setEditor(e){if(this._cm){throw new Error("CodeMirrorEditor already set.")}else{this._cm=e;if(this._currentIndex!==null){this._highlightCurrentMatch()}this._cm.editor.dispatch({effects:h.StateEffect.appendConfig.of(this._domEventHandlers)});this._refresh()}}_selectCurrentMatch(e=true){const t=this._current;if(!t){return}if(!this._cm){return}const n={anchor:t.position,head:t.position+t.text.length};const i=this._cm.editor.state.selection.main;if(i.from===t.position&&i.to===t.position+t.text.length||this._protectSelection){if(e){this._cm.editor.dispatch({effects:u.EditorView.scrollIntoView(h.EditorSelection.range(n.anchor,n.head))});return}}else{this._cm.editor.dispatch({selection:n,scrollIntoView:e})}}_highlightCurrentMatch(e){var t,n,i;if(!this._cm){return}if(this._currentIndex!==null){const s=this.matches[this._currentIndex];this._current=s;if((t=e===null||e===void 0?void 0:e.select)!==null&&t!==void 0?t:true){if(this._cm.hasFocus()){this._selectCurrentMatch((n=e===null||e===void 0?void 0:e.scroll)!==null&&n!==void 0?n:true)}else if((i=e===null||e===void 0?void 0:e.scroll)!==null&&i!==void 0?i:true){this._cm.editor.dispatch({effects:u.EditorView.scrollIntoView(s.position)})}}}else{this._current=null}this._refresh()}_refresh(){if(!this._cm){return}let e=[this._highlightEffect.of({matches:this.matches,currentMatch:this._current})];if(!this._cm.state.field(this._highlightField,false)){e.push(h.StateEffect.appendConfig.of([this._highlightField]))}this._cm.editor.dispatch({effects:e})}_findNext(e,t="auto"){var n,i,s,o;if(this._matches.length===0){return null}if(!this._cm&&!["previous-match","start"].includes(t)){t="previous-match"}let r=0;if(t==="auto"&&((i=(n=this._cm)===null||n===void 0?void 0:n.hasFocus())!==null&&i!==void 0?i:false)||t==="selection"){const t=this._cm.state.selection.main;r=e?t.anchor:t.head}else if(t==="selection-start"){const e=this._cm.state.selection.main;r=Math.min(e.anchor,e.head)}else if(t==="start"){r=0}else if(this._current){r=e?this._current.position:this._current.position+this._current.text.length}if(r===0&&e&&this.currentIndex===null){r=(o=(s=this._cm)===null||s===void 0?void 0:s.doc.length)!==null&&o!==void 0?o:d(this._matches[this._matches.length-1])}const a=r;let l=ge.findNext(this._matches,a,0,this._matches.length-1);if(l===null){return e?this._matches.length-1:null}if(e){l-=1;if(l<0){return null}}return l;function d(e){return e?e.position+e.text.length:0}}}var ge;(function(e){function t(e,t,n=0,i=Infinity){i=Math.min(e.length-1,i);while(n<=i){let s=Math.floor(.5*(n+i));const o=e[s].position;if(o<t){n=s+1;if(n<e.length&&e[n].position>t){return n}}else if(o>t){i=s-1;if(i>0&&e[i].position<t){return s}}else{return s}}const s=n>0?n-1:0;const o=e[s];return o.position>=t?s:null}e.findNext=t})(ge||(ge={}));const fe=new p.Token("@jupyterlab/codemirror:IEditorExtensionRegistry",`A registry for CodeMirror extension factories.`);const ve=new p.Token("@jupyterlab/codemirror:IEditorLanguageRegistry","A registry for CodeMirror languages.");const _e=new p.Token("@jupyterlab/codemirror:IEditorThemeRegistry","A registry for CodeMirror theme.")},23359:(e,t,n)=>{"use strict";var i=n(17325);var s=n(19562);var o=n(85072);var r=n.n(o);var a=n(97825);var l=n.n(a);var d=n(77659);var c=n.n(d);var h=n(55056);var u=n.n(h);var p=n(10540);var m=n.n(p);var g=n(41113);var f=n.n(g);var v=n(29500);var _={};_.styleTagTransform=f();_.setAttributes=u();_.insert=c().bind(null,"head");_.domAPI=l();_.insertStyleElement=m();var b=r()(v.A,_);const y=v.A&&v.A.locals?v.A.locals:undefined},76177:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>C});var i=n(84958);var s=n(78464);var o=n(67296);var r=n(90600);var a=n(21760);var l=n(93247);var d=n(44914);var c=n.n(d);const h="availableProviders";function u(e){const{schema:t}=e;const n=t.title;const i=t.description;const s=e.formContext.settings;const o=s.get(h).user;const r={...t.default};if(o){for(const e of Object.keys(r)){if(e in o){r[e]=o[e]}else{r[e]=-1}}}const[a,l]=(0,d.useState)(r);const u=(e,t)=>{const n={...a,[e]:parseInt(t.target.value)};s.set(h,n).catch(console.error);l(n)};return c().createElement("div",null,c().createElement("fieldset",null,c().createElement("legend",null,n),c().createElement("p",{className:"field-description"},i),Object.keys(r).map((e=>c().createElement("div",{key:e,className:"form-group small-field"},c().createElement("div",null,c().createElement("h3",null," ",e),c().createElement("div",{className:"inputFieldWrapper"},c().createElement("input",{className:"form-control",type:"number",value:a[e],onChange:t=>{u(e,t)}}))))))))}const p="@jupyterlab/completer-extension:manager";const m="@jupyterlab/completer-extension:inline-completer";var g;(function(e){e.nextInline="inline-completer:next";e.previousInline="inline-completer:previous";e.acceptInline="inline-completer:accept";e.invokeInline="inline-completer:invoke"})(g||(g={}));const f={id:"@jupyterlab/completer-extension:base-service",description:"Adds context and kernel completion providers.",requires:[o.ICompletionProviderManager],autoStart:true,activate:(e,t)=>{t.registerProvider(new o.ContextCompleterProvider);t.registerProvider(new o.KernelCompleterProvider)}};const v={id:"@jupyterlab/completer-extension:inline-history",description:"Adds inline completion provider suggesting code from execution history.",requires:[o.ICompletionProviderManager],optional:[a.ITranslator],autoStart:true,activate:(e,t,n)=>{t.registerInlineProvider(new o.HistoryInlineCompletionProvider({translator:n!==null&&n!==void 0?n:a.nullTranslator}))}};const _={id:"@jupyterlab/completer-extension:inline-completer-factory",description:"Provides a factory for inline completer.",provides:o.IInlineCompleterFactory,optional:[a.ITranslator],autoStart:true,activate:(e,t)=>{const n=(t||a.nullTranslator).load("jupyterlab");return{factory:t=>{const i=new o.InlineCompleter({...t,trans:n});const r=t=>{const n=e.commands.keyBindings.find((e=>e.command===t));const i=n?l.CommandRegistry.formatKeystroke(n.keys):"";return i?`${i}`:""};const a={[g.previousInline]:r(g.previousInline),[g.nextInline]:r(g.nextInline),[g.acceptInline]:r(g.acceptInline)};e.commands.keyBindingChanged.connect(((t,n)=>{const i=n.binding.command;if(a.hasOwnProperty(i)){const t=a[i];const n=r(i);if(n!==t){a[i]=n;e.commands.notifyCommandChanged(i)}}}));i.toolbar.addItem("previous-inline-completion",new s.CommandToolbarButton({commands:e.commands,icon:s.caretLeftIcon,id:g.previousInline,label:()=>a[g.previousInline],caption:n.__("Previous")}));i.toolbar.addItem("next-inline-completion",new s.CommandToolbarButton({commands:e.commands,icon:s.caretRightIcon,id:g.nextInline,label:()=>a[g.nextInline],caption:n.__("Next")}));i.toolbar.addItem("accept-inline-completion",new s.CommandToolbarButton({commands:e.commands,icon:s.checkIcon,id:g.acceptInline,label:()=>a[g.acceptInline],caption:n.__("Accept")}));i.model.suggestionsChanged.connect((()=>{for(const t of[g.previousInline,g.nextInline,g.acceptInline]){e.commands.notifyCommandChanged(t)}}));return i}}}};const b={id:m,description:"Registers the inline completer factory; adds inline completer commands, shortcuts and settings.",requires:[o.ICompletionProviderManager,o.IInlineCompleterFactory,r.ISettingRegistry],optional:[a.ITranslator],autoStart:true,activate:(e,t,n,s,o)=>{t.setInlineCompleterFactory(n);const r=(o||a.nullTranslator).load("jupyterlab");const l=()=>!!e.shell.currentWidget&&!!t.inline;let d;e.commands.addCommand(g.nextInline,{execute:()=>{var n;(n=t.inline)===null||n===void 0?void 0:n.cycle(e.shell.currentWidget.id,"next")},label:r.__("Next Inline Completion"),isEnabled:l});e.commands.addCommand(g.previousInline,{execute:()=>{var n;(n=t.inline)===null||n===void 0?void 0:n.cycle(e.shell.currentWidget.id,"previous")},label:r.__("Previous Inline Completion"),isEnabled:l});e.commands.addCommand(g.acceptInline,{execute:()=>{var n;(n=t.inline)===null||n===void 0?void 0:n.accept(e.shell.currentWidget.id)},label:r.__("Accept Inline Completion"),isEnabled:()=>l()&&t.inline.isActive(e.shell.currentWidget.id)});e.commands.addCommand(g.invokeInline,{execute:()=>{var n;(n=t.inline)===null||n===void 0?void 0:n.invoke(e.shell.currentWidget.id)},label:r.__("Invoke Inline Completer"),isEnabled:l});const c=e=>{var n;d=e.composite;(n=t.inline)===null||n===void 0?void 0:n.configure(d)};e.restored.then((()=>{var e;const n=(e=t.inlineProviders)!==null&&e!==void 0?e:[];const i=e=>{var t,n;return{enabled:true,autoFillInMiddle:false,timeout:5e3,debouncerDelay:0,...(n=(t=e.schema)===null||t===void 0?void 0:t.default)!==null&&n!==void 0?n:{}}};s.transform(m,{compose:e=>{var t,s;const o=(t=e.data.composite["providers"])!==null&&t!==void 0?t:{};for(const r of n){const e=i(r);o[r.identifier]={...e,...(s=o[r.identifier])!==null&&s!==void 0?s:{}}}e.data["composite"]["providers"]=o;return e},fetch:e=>{var t,s;const o=e.schema.properties;const a={};for(const l of n){a[l.identifier]={title:r.__("%1 provider",l.name),properties:{...(s=(t=l.schema)===null||t===void 0?void 0:t.properties)!==null&&s!==void 0?s:{},timeout:{title:r.__("Timeout"),description:r.__("Timeout for %1 provider (in milliseconds).",l.name),type:"number",minimum:0},debouncerDelay:{title:r.__("Debouncer delay"),minimum:0,description:r.__("Time since the last key press to wait before requesting completions from %1 provider (in milliseconds).",l.name),type:"number"},enabled:{title:r.__("Enabled"),description:r.__("Whether to fetch completions %1 provider.",l.name),type:"boolean"},autoFillInMiddle:{title:r.__("Fill in middle on typing"),description:r.__("Whether to show completions in the middle of the code line from %1 provider on typing.",l.name),type:"boolean"}},default:i(l),type:"object"}}o["providers"]["properties"]=a;return e}});const o=s.load(m);o.then((e=>{c(e);e.changed.connect((e=>{c(e)}))})).catch(console.error)})).catch(console.error);const h=t=>e.commands.keyBindings.find((e=>e.command===t));const u={[g.acceptInline]:h(g.acceptInline),[g.invokeInline]:h(g.invokeInline)};e.commands.keyBindingChanged.connect(((e,t)=>{const n=t.binding.command;if(u.hasOwnProperty(n)){u[n]=h(n)}}));const p=t=>{if(!(t.target instanceof Element)){return}const n=t.target;switch(t.keyCode){case 9:{const s=[u[g.acceptInline],u[g.invokeInline]];for(const o of s){if(o&&o.keys.length===1&&o.keys[0]==="Tab"&&n.closest(o.selector)&&e.commands.isEnabled(o.command)){const s=n.closest("."+i.COMPLETER_ACTIVE_CLASS);if((d===null||d===void 0?void 0:d.suppressIfTabCompleterActive)&&s){return}e.commands.execute(o.command).catch(console.error);t.preventDefault();t.stopPropagation();t.stopImmediatePropagation();return}}break}default:return}};document.addEventListener("keydown",p,true)}};const y={id:p,description:"Provides the completion provider manager.",requires:[r.ISettingRegistry],optional:[s.IFormRendererRegistry],provides:o.ICompletionProviderManager,autoStart:true,activate:(e,t,n)=>{const i="availableProviders";const s=new o.CompletionProviderManager;const r=(e,t)=>{var n;const o=e.get(i);const r=e.composite;s.setTimeout(r.providerTimeout);s.setShowDocumentationPanel(r.showDocumentationPanel);s.setContinuousHinting(r.autoCompletion);s.setSuppressIfInlineCompleterActive(r.suppressIfInlineCompleterActive);const a=(n=o.user)!==null&&n!==void 0?n:o.composite;const l=Object.entries(a!==null&&a!==void 0?a:{}).filter((e=>e[1]>=0&&t.includes(e[0]))).sort((([,e],[,t])=>t-e)).map((e=>e[0]));s.activateProvider(l)};e.restored.then((()=>{const e=[...s.getProviders().entries()];const n=e.map((([e,t])=>e));t.transform(p,{fetch:t=>{const n=t.schema.properties;const s={};e.forEach((([e,t],n)=>{var i;s[e]=(i=t.rank)!==null&&i!==void 0?i:(n+1)*10}));n[i]["default"]=s;return t}});const o=t.load(p);o.then((e=>{r(e,n);e.changed.connect((e=>{r(e,n)}))})).catch(console.error)})).catch(console.error);if(n){const e={fieldRenderer:e=>u(e)};n.addRenderer(`${p}.availableProviders`,e)}return s}};const w=[y,f,v,_,b];const C=w},2129:(e,t,n)=>{"use strict";var i=n(40662);var s=n(17325);var o=n(3579);var r=n(36060)},33107:(e,t,n)=>{"use strict";n.r(t);n.d(t,{CONTEXT_PROVIDER_ID:()=>D,Completer:()=>E,CompleterModel:()=>g,CompletionHandler:()=>u,CompletionProviderManager:()=>ne,CompletionTriggerKind:()=>l,ContextCompleterProvider:()=>A,HistoryInlineCompletionProvider:()=>le,ICompletionProviderManager:()=>h,IInlineCompleterFactory:()=>c,InlineCompleter:()=>te,InlineCompletionTriggerKind:()=>d,KERNEL_PROVIDER_ID:()=>L,KernelCompleterProvider:()=>R,ProviderReconciliator:()=>M,completerWidgetIcon:()=>re,inlineCompleterIcon:()=>oe});var i=n(84958);var s=n(66646);var o=n(42856);var r=n(2336);var a=n(5592);var l;(function(e){e[e["Invoked"]=1]="Invoked";e[e["TriggerCharacter"]=2]="TriggerCharacter";e[e["TriggerForIncompleteCompletions"]=3]="TriggerForIncompleteCompletions"})(l||(l={}));var d;(function(e){e[e["Invoke"]=0]="Invoke";e[e["Automatic"]=1]="Automatic"})(d||(d={}));const c=new a.Token("@jupyterlab/completer:IInlineCompleterFactory","A factory of inline completer widgets.");const h=new a.Token("@jupyterlab/completer:ICompletionProviderManager","A service for the completion providers management.");class u{constructor(e){this._fetchingInline=0;this._editor=null;this._enabled=false;this._isDisposed=false;this._autoCompletion=false;this._continuousInline=true;this._tabCompleterActive=false;this.completer=e.completer;this.inlineCompleter=e.inlineCompleter;this.completer.selected.connect(this.onCompletionSelected,this);this.completer.visibilityChanged.connect(this.onVisibilityChanged,this);this._reconciliator=e.reconciliator}set reconciliator(e){this._reconciliator=e}get editor(){return this._editor}set editor(e){if(e===this._editor){return}let t=this._editor;if(t&&!t.isDisposed){const e=t.model;t.host.classList.remove(i.COMPLETER_ENABLED_CLASS);t.host.classList.remove(i.COMPLETER_ACTIVE_CLASS);e.selections.changed.disconnect(this.onSelectionsChanged,this);e.sharedModel.changed.disconnect(this._onSharedModelChanged,this)}this.completer.reset();this.completer.editor=e;t=this._editor=e;if(t){const e=t.model;this._enabled=false;e.selections.changed.connect(this.onSelectionsChanged,this);const n=e.sharedModel;n.changed.connect(this._onSharedModelChanged,this);this.onSelectionsChanged();if(this.inlineCompleter){this.inlineCompleter.editor=t}}}get isDisposed(){return this._isDisposed}set autoCompletion(e){this._autoCompletion=e}get autoCompletion(){return this._autoCompletion}dispose(){if(this.isDisposed){return}this._isDisposed=true;r.Signal.clearData(this)}invokeInline(){const e=this._editor;if(e){this._makeInlineRequest(e.getCursorPosition(),d.Invoke).catch((e=>{console.warn("Inline invoke request bailed",e)}))}}invoke(){o.MessageLoop.sendMessage(this,u.Msg.InvokeRequest)}processMessage(e){switch(e.type){case u.Msg.InvokeRequest.type:this.onInvokeRequest(e);break;default:break}}getState(e,t){return{text:e.model.sharedModel.getSource(),line:t.line,column:t.column}}onCompletionSelected(e,t){const n=e.model;const i=this._editor;if(!i||!n){return}const s=n.createPatch(t);if(!s){return}const{start:o,end:r,value:a}=s;const l=i.getOffsetAt(i.getCursorPosition());const d={changes:{from:o,to:r,insert:a}};if(l<=r&&l>=o){d.selection={anchor:o+a.length}}i.editor.dispatch(d)}onInvokeRequest(e){if(!this.completer.model){return}if(this.completer.model.original){return}const t=this._editor;if(t){this._makeRequest(t.getCursorPosition(),l.Invoked).catch((e=>{console.warn("Invoke request bailed",e)}))}}onSelectionsChanged(){var e;const t=this.completer.model;const n=this._editor;if(!n){return}const s=(e=this.inlineCompleter)===null||e===void 0?void 0:e.model;if(s){s.handleSelectionChange(n.getSelection())}const o=n.host;if(!t){this._enabled=false;o.classList.remove(i.COMPLETER_ENABLED_CLASS);return}if(t.subsetMatch){return}const r=n.getCursorPosition();const a=n.getLine(r.line);const{start:l,end:d}=n.getSelection();if(l.column!==d.column||l.line!==d.line){this._enabled=false;t.reset(true);o.classList.remove(i.COMPLETER_ENABLED_CLASS);return}if(!a||d.column===0){o.classList.add(i.COMPLETER_LINE_BEGINNING_CLASS)}else if(a&&a.slice(0,r.column).match(/^\s*$/)){o.classList.add(i.COMPLETER_LINE_BEGINNING_CLASS)}else{o.classList.remove(i.COMPLETER_LINE_BEGINNING_CLASS)}if(!this._enabled){this._enabled=true;o.classList.add(i.COMPLETER_ENABLED_CLASS)}t.handleCursorChange(this.getState(n,n.getCursorPosition()))}async onTextChanged(e,t){var n;if(!this._enabled){return}const i=this.completer.model;const s=this.editor;if(!s){return}if(i&&this._autoCompletion&&this._reconciliator.shouldShowContinuousHint&&await this._reconciliator.shouldShowContinuousHint(this.completer.isVisible,t)){void this._makeRequest(s.getCursorPosition(),l.TriggerCharacter)}const o=(n=this.inlineCompleter)===null||n===void 0?void 0:n.model;if(o){o.handleTextChange(t);if(this._continuousInline){void this._makeInlineRequest(s.getCursorPosition(),d.Automatic)}}if(i){const{start:e,end:t}=s.getSelection();if(e.column!==t.column||e.line!==t.line){return}i.handleTextChange(this.getState(s,s.getCursorPosition()))}}onVisibilityChanged(e){var t;if(e.isDisposed||e.isHidden){this._tabCompleterActive=false;if(this._editor){this._editor.host.classList.remove(i.COMPLETER_ACTIVE_CLASS);this._editor.focus()}return}this._tabCompleterActive=true;(t=this._editor)===null||t===void 0?void 0:t.host.classList.add(i.COMPLETER_ACTIVE_CLASS)}async _onSharedModelChanged(e,t){if(t.sourceChange){await this.onTextChanged(e,t)}}_makeRequest(e,t){const n=this.editor;if(!n){return Promise.reject(new Error("No active editor"))}const i=this._composeRequest(n,e);const s=this.getState(n,e);return this._reconciliator.fetch(i,t).then((e=>{var t;if(!e){return}const n=this._updateModel(s,e.start,e.end);if(!n){return}if(this.completer.suppressIfInlineCompleterActive&&((t=this.inlineCompleter)===null||t===void 0?void 0:t.isActive)){return}if(n.setCompletionItems){n.setCompletionItems(e.items)}})).catch((e=>{}))}async _makeInlineRequest(e,t){const n=this.editor;if(!n){return Promise.reject(new Error("No active editor"))}if(!this.inlineCompleter){return Promise.reject(new Error("No inline completer"))}const i=n.getLine(e.line);if(t===d.Automatic&&(typeof i==="undefined"||i.slice(0,e.column).match(/^\s*$/))){this._fetchingInline+=1;return}let s=false;if(typeof i!=="undefined"&&e.column<i.length){s=true}const o=this._composeRequest(n,e);const r=this.inlineCompleter.model;if(!r){return}r.cursor=e;const a=++this._fetchingInline;const l=this._reconciliator.fetchInline(o,t,s);let c=false;const h=new Set;for(const d of l){d.then((e=>{var t;if(c||!e||!e.items){return}if(a!==this._fetchingInline){return}h.add(d);if(h.size===1){if(((t=this.inlineCompleter)===null||t===void 0?void 0:t.suppressIfTabCompleterActive)&&this._tabCompleterActive){c=true;return}r.setCompletions(e)}else{r.appendCompletions(e)}})).catch((e=>{console.warn(e)})).finally((()=>{h.add(d);const e=l.length-h.size;r.notifyProgress({pendingProviders:e,totalProviders:l.length})}))}}_composeRequest(e,t){const n=e.model.sharedModel.getSource();const i=e.model.mimeType;const o=s.Text.jsIndexToCharIndex(e.getOffsetAt(t),n);return{text:n,offset:o,mimeType:i}}_updateModel(e,t,n){const i=this.completer.model;const o=e.text;if(!i){return null}i.original=e;i.cursor={start:s.Text.charIndexToJsIndex(t,o),end:s.Text.charIndexToJsIndex(n,o)};return i}}(function(e){let t;(function(e){e[e["opened"]=0]="opened";e[e["update"]=1]="update";e[e["closed"]=2]="closed"})(t=e.StraemEvent||(e.StraemEvent={}));let n;(function(e){e.InvokeRequest=new o.Message("invoke-request")})(n=e.Msg||(e.Msg={}))})(u||(u={}));var p=n(34236);function m(e){const t=document.createElement("span");t.textContent=e;return t.innerHTML}class g{constructor(){this.processedItemsCache=null;this._current=null;this._cursor=null;this._isDisposed=false;this._completionItems=[];this._original=null;this._query="";this._subsetMatch=false;this._typeMap={};this._orderedTypes=[];this._stateChanged=new r.Signal(this);this._queryChanged=new r.Signal(this);this._processedToOriginalItem=null;this._resolvingItem=0}get stateChanged(){return this._stateChanged}get queryChanged(){return this._queryChanged}get original(){return this._original}set original(e){const t=this._original===e||this._original&&e&&a.JSONExt.deepEqual(e,this._original);if(t){return}this._reset();this._current=this._original=e;this._stateChanged.emit(undefined)}get current(){return this._current}set current(e){const t=this._current===e||this._current&&e&&a.JSONExt.deepEqual(e,this._current);if(t){return}const n=this._original;if(!n){return}const i=this._cursor;if(!i){return}const s=this._current=e;if(!s){this._stateChanged.emit(undefined);return}const o=n.text.split("\n")[n.line];const r=s.text.split("\n")[s.line];if(!this._subsetMatch&&r.length<o.length){this.reset(true);return}const{start:l,end:d}=i;let c=s.text.substring(l);const h=n.text.substring(d);c=c.substring(0,c.lastIndexOf(h));this._query=c;this.processedItemsCache=null;this._processedToOriginalItem=null;this._queryChanged.emit({newValue:this._query,origin:"editorUpdate"});this._stateChanged.emit(undefined)}get cursor(){return this._cursor}set cursor(e){if(!this.original){return}this._cursor=e}get query(){return this._query}set query(e){this._query=e;this.processedItemsCache=null;this._processedToOriginalItem=null;this._queryChanged.emit({newValue:this._query,origin:"setter"})}get subsetMatch(){return this._subsetMatch}set subsetMatch(e){this._subsetMatch=e}get isDisposed(){return this._isDisposed}dispose(){if(this._isDisposed){return}this._isDisposed=true;r.Signal.clearData(this)}completionItems(){if(!this.processedItemsCache){let e=this._query;if(e){const t=this._markup(e);this.processedItemsCache=t.map((e=>e.processedItem));this._processedToOriginalItem=new WeakMap(t.map((e=>[e.processedItem,e.originalItem])))}else{this.processedItemsCache=this._completionItems.map((e=>this._escapeItemLabel(e)));this._processedToOriginalItem=null}}return this.processedItemsCache}setCompletionItems(e){if(a.JSONExt.deepEqual(e,this._completionItems)){return}this._completionItems=e;this._orderedTypes=f.findOrderedCompletionItemTypes(this._completionItems);this.processedItemsCache=null;this._processedToOriginalItem=null;this._stateChanged.emit(undefined)}typeMap(){return this._typeMap}orderedTypes(){return this._orderedTypes}handleCursorChange(e){if(!this._original){return}const{column:t,line:n}=e;const{current:i,original:s}=this;if(!s){return}if(n!==s.line){this.reset(true);return}if(t<s.column){this.reset(true);return}const{cursor:o}=this;if(!o||!i){return}const r=o.end-o.start;const a=s.text.split("\n")[s.line];const l=i.text.split("\n")[i.line];const d=l.length-a.length;if(t>s.column+r+d){this.reset(true);return}}handleTextChange(e){const t=this._original;if(!t){return}const{text:n,column:i,line:s}=e;const o=n.split("\n")[s][i-1];if(o&&o.match(/\S/)||e.column>=t.column){this.current=e;return}this.reset(false)}createPatch(e){const t=this._original;const n=this._cursor;const i=this._current;if(!t||!n||!i){return undefined}let{start:s,end:o}=n;o=o+(i.text.length-t.text.length);return{start:s,end:o,value:e}}reset(e=false){if(!e&&this._subsetMatch){return}this._reset();this._stateChanged.emit(undefined)}_markup(e){var t;const n=this._completionItems;let i=[];for(const s of n){const n=s.label.indexOf("(");const o=n>-1?s.label.substring(0,n):s.label;const r=p.StringExt.matchSumOfSquares(m(o),e);if(r){let e=p.StringExt.highlight(m(s.label),r.indices,f.mark);const n=Object.assign({},s);n.label=e.join("");n.insertText=(t=s.insertText)!==null&&t!==void 0?t:s.label;i.push({item:n,score:r.score,originalItem:s})}}i.sort(f.scoreCmp);return i.map((e=>({processedItem:e.item,originalItem:e.originalItem})))}resolveItem(e){let t;if(typeof e==="number"){const n=this.completionItems();if(!n||!n[e]){return undefined}t=n[e]}else{t=e}if(!t){return undefined}let n;if(this._processedToOriginalItem){n=this._processedToOriginalItem.get(t)}else{n=t}if(!n){return undefined}return this._resolveItemByValue(n)}_resolveItemByValue(e){const t=++this._resolvingItem;let n;if(e.resolve){let t;if(e.insertText){t=this.createPatch(e.insertText)}n=e.resolve(t)}else{n=Promise.resolve(e)}return n.then((n=>{this._escapeItemLabel(n,true);Object.keys(n).forEach((t=>{e[t]=n[t]}));e.resolve=undefined;if(t!==this._resolvingItem){return Promise.resolve(null)}return n})).catch((t=>{console.error(t);return Promise.resolve(e)}))}_escapeItemLabel(e,t=false){var n;const i=m(e.label);if(i!==e.label){const s=t?e:Object.assign({},e);s.insertText=(n=e.insertText)!==null&&n!==void 0?n:e.label;s.label=i;return s}return e}_reset(){const e=this._query;this._current=null;this._cursor=null;this._completionItems=[];this._original=null;this._query="";this.processedItemsCache=null;this._processedToOriginalItem=null;this._subsetMatch=false;this._typeMap={};this._orderedTypes=[];if(e){this._queryChanged.emit({newValue:this._query,origin:"reset"})}}}var f;(function(e){const t=["function","instance","class","module","keyword"];const n=t.reduce(((e,t)=>{e[t]=null;return e}),{});function i(e){return`<mark>${e}</mark>`}e.mark=i;function s(e,t){var n,i,s;const o=e.score-t.score;if(o!==0){return o}return(s=(n=e.item.insertText)===null||n===void 0?void 0:n.localeCompare((i=t.item.insertText)!==null&&i!==void 0?i:""))!==null&&s!==void 0?s:0}e.scoreCmp=s;function o(e){const n=new Set;e.forEach((e=>{if(e.type&&!t.includes(e.type)&&!n.has(e.type)){n.add(e.type)}}));const i=Array.from(n);i.sort(((e,t)=>e.localeCompare(t)));return t.concat(i)}e.findOrderedCompletionItemTypes=o;function r(e){const i=Object.keys(e).map((t=>e[t])).filter((e=>!!e&&!(e in n))).sort(((e,t)=>e.localeCompare(t)));return t.concat(i)}e.findOrderedTypes=r})(f||(f={}));var v=n(48287);var _=n(61314);var b=n(78464);var y=n(76326);var w=n(1143);const C="jp-Completer-item";const x="jp-mod-active";const S="jp-Completer-list";const k="jp-Completer-docpanel";const j=true;const I=10;class E extends w.Widget{constructor(e){var t,n,i,s;super({node:document.createElement("div")});this._activeIndex=0;this._editor=null;this._model=null;this._selected=new r.Signal(this);this._visibilityChanged=new r.Signal(this);this._indexChanged=new r.Signal(this);this._lastSubsetMatch="";this._geometryLock=false;this._geometryCounter=0;this._docPanelExpanded=false;this._renderCounter=0;this.sanitizer=(t=e.sanitizer)!==null&&t!==void 0?t:new v.Sanitizer;this._defaultRenderer=E.getDefaultRenderer(this.sanitizer);this._renderer=(n=e.renderer)!==null&&n!==void 0?n:this._defaultRenderer;this._docPanel=this._createDocPanelNode();this.model=(i=e.model)!==null&&i!==void 0?i:null;this.editor=(s=e.editor)!==null&&s!==void 0?s:null;this.addClass("jp-Completer");this.addClass("jp-ThemedContainer");this._updateConstraints()}_updateConstraints(){const e=document.createElement("div");e.classList.add(S);e.style.visibility="hidden";e.style.overflowY="scroll";document.body.appendChild(e);const t=window.getComputedStyle(e);this._maxHeight=parseInt(t.maxHeight,10);this._minHeight=parseInt(t.minHeight,10);this._scrollbarWidth=e.offsetWidth-e.clientWidth;document.body.removeChild(e);const n=this._createDocPanelNode();this._docPanelWidth=T.measureSize(n,"inline-block").width}get activeIndex(){return this._activeIndex}get editor(){return this._editor}set editor(e){this._editor=e}get selected(){return this._selected}get visibilityChanged(){return this._visibilityChanged}get indexChanged(){return this._indexChanged}get model(){return this._model}set model(e){if(!e&&!this._model||e===this._model){return}if(this._model){this._model.stateChanged.disconnect(this.onModelStateChanged,this);this._model.queryChanged.disconnect(this.onModelQueryChanged,this)}this._model=e;if(this._model){this._model.stateChanged.connect(this.onModelStateChanged,this);this._model.queryChanged.connect(this.onModelQueryChanged,this)}}get renderer(){return this._renderer}set renderer(e){this._renderer=e}set showDocsPanel(e){this._showDoc=e}get showDocsPanel(){return this._showDoc}dispose(){this._sizeCache=undefined;this._model=null;super.dispose()}handleEvent(e){if(this.isHidden||!this._editor){return}switch(e.type){case"keydown":this._evtKeydown(e);break;case"pointerdown":this._evtPointerdown(e);break;case"scroll":this._evtScroll(e);break;default:break}}reset(){this._activeIndex=0;this._lastSubsetMatch="";if(this._model){this._model.reset(true)}this._docPanel.style.display="none";this._sizeCache=undefined;this.node.scrollTop=0}selectActive(){const e=this.node.querySelector(`.${x}`);if(!e){this.reset();return}this._selected.emit(e.getAttribute("data-value"));this.reset()}onAfterAttach(e){document.addEventListener("keydown",this,j);document.addEventListener("pointerdown",this,j);document.addEventListener("scroll",this,j)}onBeforeDetach(e){document.removeEventListener("keydown",this,j);document.removeEventListener("pointerdown",this,j);document.removeEventListener("scroll",this,j)}onModelStateChanged(){if(this.isAttached){this._activeIndex=0;this._indexChanged.emit(this._activeIndex);this.update()}}onModelQueryChanged(e,t){if(this._sizeCache&&t.origin==="editorUpdate"){const t=e.completionItems();const n=this._sizeCache.items;const i=n[this._findWidestItemIndex(n)];const s=t[this._findWidestItemIndex(t)];const o=this._getPreferredItemWidthHeuristic();if(t.length!==this._sizeCache.items.length||o(i)!==o(s)){this._sizeCache=undefined}}}onUpdateRequest(e){var t;const n=this._model;if(!n){return}if(!n.query){this._populateSubset()}let i=n.completionItems();if(!i.length){if(!this.isHidden){this.reset();this.hide();this._visibilityChanged.emit(undefined)}return}this._updateConstraints();this._geometryLock=true;const s=this._createCompleterNode(n,i);let o=s.querySelectorAll(`.${C}`)[this._activeIndex];o.classList.add(x);const r=(t=this.model)===null||t===void 0?void 0:t.resolveItem(i[this._activeIndex]);if(this._showDoc){this._docPanel.innerText="";s.appendChild(this._docPanel);this._docPanelExpanded=false;this._docPanel.style.display="none";this._updateDocPanel(r,o)}if(this.isHidden){this.show();this._setGeometry();this._visibilityChanged.emit(undefined)}else{this._setGeometry()}this._geometryLock=false}get sizeCache(){if(!this._sizeCache){return}return{width:this._sizeCache.width+this._sizeCache.docPanelWidth,height:Math.max(this._sizeCache.height,this._sizeCache.docPanelHeight)}}_createDocPanelNode(){const e=document.createElement("div");e.className=k;return e}_createCompleterNode(e,t){const n=++this._renderCounter;let i=this.node;i.textContent="";let s=e.orderedTypes();let o=document.createElement("ul");o.className=S;const r=this._renderer.createCompletionItemNode(t[0],s);const a=[r];const l=T.measureSize(r,"inline-grid");const d=Math.max(Math.ceil(this._maxHeight/l.height),5);const c=Math.min(d+1,t.length);const h=performance.now();for(let g=1;g<c;g++){const e=this._renderer.createCompletionItemNode(t[g],s);a.push(e)}for(const g of a){o.appendChild(g)}const u=this._findWidestItemIndex(t);const p=u<a.length?a[u]:this._renderer.createCompletionItemNode(t[u],s);const m=T.measureSize(p.cloneNode(true),"inline-grid");this._sizeCache={height:Math.min(this._maxHeight,l.height*t.length),width:m.width+this._scrollbarWidth,items:t,docPanelWidth:0,docPanelHeight:0};if(c<t.length){const e=(performance.now()-h)/c;const i=Math.max(5,Math.floor(12/e));let r=c;let d=a[a.length-1];const u=()=>{if(r>=t.length){return}const e=l.height*(t.length-r);d.style.marginBottom=`${e}px`;requestAnimationFrame((()=>{if(n!=this._renderCounter){return}d.style.marginBottom="";const e=Math.min(t.length,r+i);for(let n=r;n<e;n++){const e=this._renderer.createCompletionItemNode(t[n],s);o.appendChild(e);d=e}r=e;u()}))};u()}i.appendChild(o);return i}_findWidestItemIndex(e){const t=this._getPreferredItemWidthHeuristic();const n=e.map(t);return n.indexOf(Math.max(...n))}_getPreferredItemWidthHeuristic(){return this._renderer.itemWidthHeuristic?this._renderer.itemWidthHeuristic.bind(this._renderer):this._defaultRenderer.itemWidthHeuristic.bind(this._defaultRenderer)}_cycle(e){var t,n;const i=this.node.querySelectorAll(`.${C}`);const s=this._activeIndex;const o=i.length-1;let r=this.node.querySelector(`.${x}`);r.classList.remove(x);switch(e){case"up":this._activeIndex=s===0?o:s-1;break;case"down":this._activeIndex=s<o?s+1:0;break;case"pageUp":case"pageDown":{const t=this.node.getBoundingClientRect();const n=r.getBoundingClientRect();const i=Math.floor(t.height/n.height);const a=e==="pageUp"?-1:1;this._activeIndex=Math.min(Math.max(0,s+a*i),o);break}}r=i[this._activeIndex];r.classList.add(x);let a=this.node.querySelector(`.${S}`);y.ElementExt.scrollIntoViewIfNeeded(a,r);this._indexChanged.emit(this._activeIndex);const l=(t=this.model)===null||t===void 0?void 0:t.completionItems();const d=l===null||l===void 0?void 0:l[this._activeIndex];if(d){const e=(n=this.model)===null||n===void 0?void 0:n.resolveItem(d);if(this._showDoc){this._updateDocPanel(e,r)}}}_evtKeydown(e){if(this.isHidden||!this._editor){return}if(!this._editor.host.contains(e.target)){this.reset();return}switch(e.keyCode){case 9:{e.preventDefault();e.stopPropagation();e.stopImmediatePropagation();const t=this._model;if(!t){return}const n=t.completionItems();if(n&&n.length===1){this._selected.emit(n[0].insertText||n[0].label);this.reset();return}const i=this._populateSubset();if(t.query&&t.query!==this._lastSubsetMatch){t.subsetMatch=true;this._selected.emit(t.query);t.subsetMatch=false;this._lastSubsetMatch=t.query}if(i){this.update()}this._cycle(e.shiftKey?"up":"down");return}case 27:e.preventDefault();e.stopPropagation();e.stopImmediatePropagation();this.reset();return;case 33:case 34:case 38:case 40:{e.preventDefault();e.stopPropagation();e.stopImmediatePropagation();const t=T.keyCodeMap[e.keyCode];this._cycle(t);return}default:return}}_evtPointerdown(e){if(this.isHidden||!this._editor){return}if(T.nonstandardClick(e)){this.reset();return}let t=e.target;while(t!==document.documentElement){if(t.classList.contains(C)){e.preventDefault();e.stopPropagation();e.stopImmediatePropagation();this._selected.emit(t.getAttribute("data-value"));this.reset();return}if(t===this.node){e.preventDefault();e.stopPropagation();e.stopImmediatePropagation();return}t=t.parentElement}this.reset()}_evtScroll(e){if(this.isHidden||!this._editor){return}const{node:t}=this;if(t.contains(e.target)){return}requestAnimationFrame((()=>{this._setGeometry()}))}_populateSubset(){const{model:e}=this;if(!e){return false}const t=e.completionItems();const n=T.commonSubset(t.map((e=>e.insertText||e.label)));const{query:i}=e;if(n&&n!==i&&n.indexOf(i)===0){e.query=n;return true}return false}_setGeometry(){const{node:e}=this;const t=this._model;const n=this._editor;if(!n||!t||!t.original||!t.cursor){return}const i=t.cursor.start;const s=n.getPositionAt(i);const o=n.getCoordinateForPosition(s);if(!o){return}const r=window.getComputedStyle(e);const a=parseInt(r.borderLeftWidth,10)||0;const l=parseInt(r.paddingLeft,10)||0;const d=n.host.closest(".jp-MainAreaWidget > .lm-Widget")||n.host;const c=t.completionItems();if(this._sizeCache&&this._sizeCache.items.length!==c.length){this._sizeCache=undefined}b.HoverBox.setGeometry({anchor:o,host:d,maxHeight:this._maxHeight,minHeight:this._minHeight,node:e,size:this.sizeCache,offset:{horizontal:a+l},privilege:"below",style:r,outOfViewDisplay:{top:"stick-inside",bottom:"stick-inside",left:"stick-inside",right:"stick-outside"}});const h=++this._geometryCounter;if(!this._sizeCache){requestAnimationFrame((()=>{if(h!=this._geometryCounter){return}let t=e.getBoundingClientRect();let n=this._docPanel.getBoundingClientRect();this._sizeCache={width:t.width-n.width,height:t.height,items:c,docPanelWidth:n.width,docPanelHeight:n.height}}))}}_updateDocPanel(e,t){var n,i,s;let o=this._docPanel;if(!e){this._toggleDocPanel(false);return}const r=(s=(i=(n=this._renderer).createLoadingDocsIndicator)===null||i===void 0?void 0:i.call(n))!==null&&s!==void 0?s:this._defaultRenderer.createLoadingDocsIndicator();t.appendChild(r);e.then((e=>{var t,n,i;if(!e){return}if(!o){return}if(e.documentation){const s=(i=(n=(t=this._renderer).createDocumentationNode)===null||n===void 0?void 0:n.call(t,e))!==null&&i!==void 0?i:this._defaultRenderer.createDocumentationNode(e);o.textContent="";o.appendChild(s);this._toggleDocPanel(true)}else{this._toggleDocPanel(false)}})).catch((e=>console.error(e))).finally((()=>{t.removeChild(r)}))}_toggleDocPanel(e){let t=this._docPanel;if(e){if(this._docPanelExpanded){return}t.style.display="";this._docPanelExpanded=true}else{if(!this._docPanelExpanded){return}t.style.display="none";this._docPanelExpanded=false}const n=this._sizeCache;if(n){n.docPanelHeight=e?this._maxHeight:0;n.docPanelWidth=e?this._docPanelWidth:0;if(!this._geometryLock){this._setGeometry()}}}}(function(e){class t{constructor(e){this.sanitizer=(e===null||e===void 0?void 0:e.sanitizer)||new v.Sanitizer}createCompletionItemNode(e,t){let n=this._createWrapperNode(e.insertText||e.label);if(e.deprecated){n.classList.add("jp-Completer-deprecated")}return this._constructNode(n,this._createLabelNode(e.label),!!e.type,e.type,t,e.icon)}createDocumentationNode(e){const t=document.createElement("div");t.classList.add("jp-RenderedText");const n=this.sanitizer;const i=e.documentation||"";(0,_.renderText)({host:t,sanitizer:n,source:i}).catch(console.error);return t}itemWidthHeuristic(e){var t;const n=e.label.replace(/<(\/)?mark>/g,"");return n.length+(((t=e.type)===null||t===void 0?void 0:t.length)||0)}createLoadingDocsIndicator(){const e=document.createElement("div");e.classList.add("jp-Completer-loading-bar-container");const t=document.createElement("div");t.classList.add("jp-Completer-loading-bar");e.append(t);return e}_createWrapperNode(e){const t=document.createElement("li");t.className=C;t.setAttribute("data-value",e);return t}_createLabelNode(e){const t=document.createElement("code");t.className="jp-Completer-match";t.innerHTML=e;return t}_constructNode(e,t,n,i,s,o){if(o){const t=o.element({className:"jp-Completer-type jp-Completer-icon"});e.appendChild(t)}else if(n){const t=document.createElement("span");t.textContent=(i[0]||"").toLowerCase();const n=s.indexOf(i)%I+1;t.className="jp-Completer-type jp-Completer-monogram";t.setAttribute(`data-color-index`,n.toString());e.appendChild(t)}else{const t=document.createElement("span");t.className="jp-Completer-monogram";e.appendChild(t)}e.appendChild(t);if(n){e.title=i;const t=document.createElement("code");t.className="jp-Completer-typeExtended";t.textContent=i.toLocaleLowerCase();e.appendChild(t)}else{const t=document.createElement("span");t.className="jp-Completer-typeExtended";e.appendChild(t)}return e}}e.Renderer=t;let n;function i(e){if(!n||e&&n.sanitizer!==e){n=new t({sanitizer:e})}return n}e.getDefaultRenderer=i})(E||(E={}));var T;(function(e){e.keyCodeMap={38:"up",40:"down",33:"pageUp",34:"pageDown"};function t(e){const t=e.length;let n="";if(t<2){return n}const i=e[0].length;for(let s=0;s<i;s++){const i=e[0][s];for(let o=1;o<t;o++){if(e[o][s]!==i){return n}}n+=i}return n}e.commonSubset=t;function n(e){return e.button!==0||e.altKey||e.ctrlKey||e.shiftKey||e.metaKey}e.nonstandardClick=n;function i(e,t){if(e.isConnected){console.warn("Measuring connected elements with `measureSize` has side-effects")}e.style.visibility="hidden";e.style.display=t;document.body.appendChild(e);const n=e.getBoundingClientRect();document.body.removeChild(e);e.removeAttribute("style");return n}e.measureSize=i})(T||(T={}));class M{constructor(e){var t,n;this._resolveFactory=(e,t)=>e.resolve?n=>e.resolve(t,this._context,n):undefined;this._fetching=0;this._inlineFetching=0;this._providers=e.providers;this._inlineProviders=(t=e.inlineProviders)!==null&&t!==void 0?t:[];this._inlineProvidersSettings=(n=e.inlineProvidersSettings)!==null&&n!==void 0?n:{};this._context=e.context;this._timeout=e.timeout}async applicableProviders(){const e=this._providers.map((e=>e.isApplicable(this._context)));const t=await Promise.all(e);return this._providers.filter(((e,n)=>t[n]))}fetchInline(e,t,n){let i=[];const s=++this._inlineFetching;for(const o of this._inlineProviders){const a=this._inlineProvidersSettings[o.identifier];if(t!==d.Invoke&&n&&!a.autoFillInMiddle){continue}let l=0;if(t===d.Automatic){l=a.debouncerDelay}const c=()=>{const n=o.fetch(e,{...this._context,triggerKind:t}).then((e=>({...e,items:e.items.map((e=>{const t=e;t.stream=new r.Signal(t);t.provider=o;void this._stream(t,o);return t}))})));const i=new Promise((e=>setTimeout((()=>e(null)),l+a.timeout)));return Promise.race([n,i])};const h=l===0?c():new Promise(((e,t)=>setTimeout((()=>{if(s!=this._inlineFetching){return t(null)}else{return e(c())}}),l)));i.push(h.catch((e=>e)))}return i}async _stream(e,t){if(!e.isIncomplete||!t.stream||!e.token){return}const n=e.stream;const i=e.token;e.token=undefined;e.streaming=true;n.emit(u.StraemEvent.opened);for await(const s of t.stream(i)){const t=s.response;const i=t.insertText.substring(e.insertText.length);e.insertText=t.insertText;e.lastStreamed=i;e.error=s.response.error;n.emit(u.StraemEvent.update)}e.isIncomplete=false;e.lastStreamed=undefined;e.streaming=false;n.emit(u.StraemEvent.closed)}async fetch(e,t){const n=++this._fetching;let i=[];const s=await this.applicableProviders();for(const r of s){let s;s=r.fetch(e,this._context,t).then((e=>{if(n!==this._fetching){return Promise.reject(void 0)}const t=e.items.map((e=>({...e,resolve:this._resolveFactory(r,e)})));return{...e,items:t}}));const o=new Promise((e=>setTimeout((()=>e(null)),this._timeout)));s=Promise.race([s,o]);i.push(s.catch((e=>e)))}const o=Promise.all(i);return this._mergeCompletions(o)}async shouldShowContinuousHint(e,t){const n=await this.applicableProviders();if(n.length===0){return false}if(n[0].shouldShowContinuousHint){return n[0].shouldShowContinuousHint(e,t,this._context)}return this._defaultShouldShowContinuousHint(e,t)}_alignPrefixes(e,t,n){if(t!=n){const t=this._context.editor;if(!t){return e}const i=t.getCursorPosition();const s=t.getLine(i.line);if(!s){return e}const o=t.getOffsetAt({line:i.line,column:0});return e.map((e=>{const t=Math.max(e.start-o,0);const i=Math.max(n-o,0);if(t==i){return e}const r=s.substring(t,i);return{...e,items:e.items.map((e=>{let t=e.insertText||e.label;e.insertText=t.startsWith(r)?t.slice(r.length):t;return e}))}}))}return e}async _mergeCompletions(e){let t=(await e).filter((e=>{if(!e||e instanceof Error){return false}if(!e.items.length){return false}return true}));if(t.length==0){return null}else if(t.length==1){return t[0]}const n=Math.min(...t.map((e=>e.end)));const i=t.map((e=>e.start));const s=Math.min(...i);const o=Math.max(...i);t=this._alignPrefixes(t,s,o);const r=new Set;const a=new Array;for(const l of t){l.items.forEach((e=>{let t=(e.insertText||e.label).trim();if(r.has(t)){return}r.add(t);a.push(e)}))}return{start:o,end:n,items:a}}_defaultShouldShowContinuousHint(e,t){return!e&&(t.sourceChange==null||t.sourceChange.some((e=>e.insert!=null&&e.insert.length>0)))}}const D="CompletionProvider:context";class A{constructor(){this.identifier=D;this.rank=500;this.renderer=null}async isApplicable(e){return true}fetch(e,t){const n=t.editor;if(!n){return Promise.reject("No editor")}return new Promise((e=>{e(P.contextHint(n))}))}}var P;(function(e){function t(e){const t=e.getTokenAtCursor();const i=n(t,e);const s=i.filter((e=>e.type)).map((e=>e.value));const o=new Set(s);const r=new Array;o.forEach((e=>r.push({label:e})));return{start:t.offset,end:t.offset+t.value.length,items:r}}e.contextHint=t;function n(e,t){const n=t.getTokens();return n.filter((t=>t.value.indexOf(e.value)===0&&t.value!==e.value))}})(P||(P={}));const L="CompletionProvider:kernel";class R{constructor(){this.identifier=L;this.rank=550;this.renderer=null}async isApplicable(e){var t;const n=(t=e.session)===null||t===void 0?void 0:t.kernel;if(!n){return false}return true}async fetch(e,t){var n;const i=(n=t.session)===null||n===void 0?void 0:n.kernel;if(!i){throw new Error("No kernel for completion request.")}const s={code:e.text,cursor_pos:e.offset};const o=await i.requestComplete(s);const r=o.content;if(r.status!=="ok"){throw new Error("Completion fetch failed to return successfully.")}const a=new Array;const l=r.metadata._jupyter_types_experimental;r.matches.forEach(((e,t)=>{if(l&&l[t]){a.push({label:e,type:l[t].type,insertText:l[t].text})}else{a.push({label:e})}}));return{start:r.cursor_start,end:r.cursor_end,items:a}}async resolve(e,t,n){const{editor:i,session:o}=t;if(o&&i){let t=i.model.sharedModel.getSource();const r=i.getCursorPosition();let a=s.Text.jsIndexToCharIndex(i.getOffsetAt(r),t);const l=o.kernel;if(!t||!l){return Promise.resolve(e)}if(n){const{start:e,value:i}=n;t=t.substring(0,e)+i;a=a+i.length}const d={code:t,cursor_pos:a,detail_level:0};const c=await l.requestInspect(d);const h=c.content;if(h.status!=="ok"||!h.found){return e}e.documentation=h.data["text/plain"];return e}return e}shouldShowContinuousHint(e,t){const n=t.sourceChange;if(n==null){return true}if(n.some((e=>e.delete!=null))){return false}return n.some((t=>t.insert!=null&&(t.insert==="."||!e&&t.insert.trim().length>0)))}}var N=n(22819);var O=n(71674);const B="jp-GhostText-lineSpacer";const F="jp-GhostText-letterSpacer";const z="jp-GhostText";const H="jp-GhostText-streamedToken";const W="jp-GhostText-streamingIndicator";const V="jp-GhostText-errorIndicator";const U="jp-GhostText-hiddenLines";class q{constructor(e){this.options=e}placeGhost(e,t){const n=[Y.addMark.of(t)];if(!e.state.field(Y.markField,false)){n.push(O.StateEffect.appendConfig.of([Y.markField]));n.push(O.StateEffect.appendConfig.of([N.EditorView.domEventHandlers({blur:t=>{if(this.options.onBlur(t)===false){return true}const n=[Y.removeMark.of(null)];setTimeout((()=>{e.dispatch({effects:n})}),0)}})]))}e.dispatch({effects:n})}clearGhosts(e){const t=[Y.removeMark.of(null)];e.dispatch({effects:t})}}q.streamingAnimation="uncover";q.spacerRemovalDelay=700;q.spacerRemovalDuration=300;class $ extends N.WidgetType{constructor(e){super();this.options=e;this.isSpacer=false;this._clearErrorTimeout=null}eq(e){return e.content==this.content&&e.options.streaming===this.options.streaming&&e.options.error===this.options.error}get lineBreaks(){return(this.content.match(/\n/g)||"").length}updateDOM(e,t){this._updateDOM(e);return true}get content(){return this.options.content}toDOM(){let e=document.createElement("span");if(this.options.onPointerOver){e.addEventListener("pointerover",this.options.onPointerOver)}if(this.options.onPointerLeave){e.addEventListener("pointerleave",this.options.onPointerLeave)}e.classList.add(z);e.dataset.animation=q.streamingAnimation;e.dataset.providedBy=this.options.providerId;this._updateDOM(e);return e}_removeErrorAnimation(e){const t=e.querySelectorAll(`.${V}`);t.forEach((e=>{e.remove()}))}_mountErrorAnimation(e){const t=document.createElement("span");t.className=V;const n=this.options.error;if(n===null||n===void 0?void 0:n.message){t.title=n===null||n===void 0?void 0:n.message}const i=e.querySelectorAll(`.${W}, .${V}`);i.forEach((e=>{e.remove()}));e.appendChild(t)}_updateDOM(e){var t,n;if(this.options.error){this._mountErrorAnimation(e);this._clearErrorTimeout=setTimeout((()=>{this._removeErrorAnimation(e);this._clearErrorTimeout=null}),5e3);return}if(this._clearErrorTimeout!==null){clearTimeout(this._clearErrorTimeout);this._removeErrorAnimation(e);this._clearErrorTimeout=null}let i=this.content;let s="";let o=this.options.addedPart;if(o){if(o.startsWith("\n")){o=o.substring(1)}i=i.substring(0,i.length-o.length)}if(this.options.maxLines){const e=i.split("\n");i=e.slice(0,this.options.maxLines).join("\n");s=e.slice(this.options.maxLines).join("\n")}const r=Math.min((t=this.options.minLines)!==null&&t!==void 0?t:0,(n=this.options.maxLines)!==null&&n!==void 0?n:Infinity);const a=Math.max(0,r-i.split("\n").length+1);const l=new Array(a).fill("").join("\n");if(this.isSpacer){e.innerText=i+l;return}e.innerText=i;let d=e;if(s.length>0){const t=document.createElement("span");t.className="jp-GhostText-hiddenWrapper";e.appendChild(t);const n=document.createElement("span");n.className="jp-GhostText-expandHidden";n.innerText="";const i=document.createElement("span");t.appendChild(n);i.className=U;i.innerText="\n"+s;t.appendChild(i);d=i}if(o){const e=document.createElement("span");e.className=H;e.innerText=o;d.appendChild(e)}if(this.options.streaming){const e=document.createElement("span");e.className=W;d.appendChild(e)}if(l.length>0){const e=document.createTextNode(l);d.appendChild(e)}}destroy(e){if(this.options.onPointerOver){e.removeEventListener("pointerover",this.options.onPointerOver)}if(this.options.onPointerLeave){e.removeEventListener("pointerleave",this.options.onPointerLeave)}super.destroy(e)}}class K extends ${constructor(){super(...arguments);this.isSpacer=true}}class J extends K{toDOM(){const e=super.toDOM();e.classList.add(B);e.style.animationDelay=q.spacerRemovalDelay+"ms";e.style.animationDuration=q.spacerRemovalDuration+"ms";return e}}class G extends K{get content(){return this.options.content[0]}toDOM(){const e=super.toDOM();e.classList.add(F);return e}}var Y;(function(e){let t;(function(e){e[e["Set"]=0]="Set";e[e["Remove"]=1]="Remove";e[e["FilterAndUpdate"]=2]="FilterAndUpdate"})(t||(t={}));e.addMark=O.StateEffect.define({map:(e,t)=>({...e,from:t.mapPos(e.from),to:t.mapPos(e.from+e.content.length)})});e.removeMark=O.StateEffect.define();function n(n){for(let i of n.effects){if(i.is(e.addMark)){return{action:t.Set,spec:i.value}}else if(i.is(e.removeMark)){return{action:t.Remove}}}if(n.docChanged||n.selection){return{action:t.FilterAndUpdate}}return null}function i(e,t){const n=N.Decoration.widget({widget:new $(e),side:1,ghostSpec:e});return n.range(Math.min(e.from,t.newDoc.length),Math.min(e.from,t.newDoc.length))}function s(e,t,n=1e3){if(e.content.length<2){return[]}const i={elapsed:false};setTimeout((()=>{i.elapsed=true}),n);const s=N.Decoration.widget({widget:new G(e),side:1,timeoutInfo:i});const o=N.Decoration.widget({widget:new J(e),side:1,timeoutInfo:i});return[s.range(Math.min(e.from,t.newDoc.length),Math.min(e.from,t.newDoc.length)),o.range(Math.min(e.from,t.newDoc.length),Math.min(e.from,t.newDoc.length))]}e.markField=O.StateField.define({create(){return N.Decoration.none},update(e,o){const r=n(o);e=e.update({filter:(e,t,n)=>{if(n.spec.widget instanceof K){return!n.spec.timeoutInfo.elapsed}return true}});if(!r){return e.map(o.changes)}switch(r.action){case t.Set:{const t=r.spec;const n=i(t,o);return e.update({add:[n],filter:(e,t,i)=>i===n.value})}case t.Remove:return e.update({filter:()=>false});case t.FilterAndUpdate:{let t=e.iter();while(t.value&&t.value.spec.widget instanceof K){t.next()}if(!t.value){return e.map(o.changes)}const n=t.value.spec.ghostSpec;const r={...n};let l=false;o.changes.iterChanges(((e,t,n,i,s)=>{if(l){return}if(e===t&&n!==i){for(let e=0;e<s.lines;e++){const t=s.lineAt(e).text;const n=e>0?"\n"+t:t;if(r.content.startsWith(n)){r.content=r.content.slice(n.length);r.from+=n.length}else{l=true;break}}}else if(n===i&&e!==t){l=true}else{l=true}}));const d=l?s(n,o):[i(r,o)];const c=d.map((e=>e.value));e=e.update({add:d,filter:(e,t,n)=>c.includes(n)});if(l){try{e=e.map(o.changes)}catch(a){console.warn(a);return N.Decoration.none}}return e}}},provide:e=>N.EditorView.decorations.from(e)})})(Y||(Y={}));const X="jp-InlineCompleter";const Q="jp-mod-inline-completer-active";const Z="jp-InlineCompleter-hover";const ee="jp-InlineCompleter-progressBar";class te extends w.Widget{constructor(e){var t,n;super({node:document.createElement("div")});this._clearHoverTimeout=null;this._current=0;this._editor=null;this._lastItem=null;this._model=null;this._providerWidget=new w.Widget;this._showShortcuts=te.defaultSettings.showShortcuts;this._showWidget=te.defaultSettings.showWidget;this._suggestionsCounter=new w.Widget;this._toolbar=new b.Toolbar;this.model=(t=e.model)!==null&&t!==void 0?t:null;this.editor=(n=e.editor)!==null&&n!==void 0?n:null;this.addClass(X);this.addClass("jp-ThemedContainer");this._ghostManager=new q({onBlur:this._onEditorBlur.bind(this)});this._trans=e.trans;const i=this.layout=new w.PanelLayout;i.addWidget(this._suggestionsCounter);i.addWidget(this.toolbar);i.addWidget(this._providerWidget);this._progressBar=document.createElement("div");this._progressBar.className=ee;this.node.appendChild(this._progressBar);this._updateShortcutsVisibility();this._updateDisplay();this.node.tabIndex=0}get toolbar(){return this._toolbar}get editor(){return this._editor}set editor(e){var t;(t=this.model)===null||t===void 0?void 0:t.reset();this._editor=e}get model(){return this._model}set model(e){if(!e&&!this._model||e===this._model){return}if(this._model){this._model.suggestionsChanged.disconnect(this._onModelSuggestionsChanged,this);this._model.filterTextChanged.disconnect(this._onModelFilterTextChanged,this);this._model.provisionProgress.disconnect(this._onProvisionProgress,this)}this._model=e;if(this._model){this._model.suggestionsChanged.connect(this._onModelSuggestionsChanged,this);this._model.filterTextChanged.connect(this._onModelFilterTextChanged,this);this._model.provisionProgress.connect(this._onProvisionProgress,this)}}cycle(e){var t,n;const i=(n=(t=this.model)===null||t===void 0?void 0:t.completions)===null||n===void 0?void 0:n.items;if(!i){return}if(e==="next"){const e=this._current+1;this._current=e===i.length?0:e}else{const e=this._current-1;this._current=e===-1?i.length-1:e}this._updateStreamTracking();this._render()}accept(){const e=this.model;const t=this.current;const n=this._editor;if(!n||!e||!t){return}const i=e.cursor;const s=t.insertText;const o=n.getOffsetAt(n.getCursorPosition());const r=n.getOffsetAt(i);const a=r;const l=o;const d={changes:{from:a,to:l,insert:s}};if(o<=l&&o>=a){d.selection={anchor:a+s.length}}n.editor.dispatch(d);e.reset();this.update()}get current(){var e;const t=(e=this.model)===null||e===void 0?void 0:e.completions;if(!t){return null}return t.items[this._current]}_updateStreamTracking(){if(this._lastItem){this._lastItem.stream.disconnect(this._onStream,this)}const e=this.current;if(e){e.stream.connect(this._onStream,this)}this._lastItem=e}_onStream(e,t){var n;const i=(n=this.model)===null||n===void 0?void 0:n.completions;if(!i||!i.items||i.items.length===0){return}if(this.isHidden){return}const s=i.items[this._current];this._setText(s)}configure(e){this._showWidget=e.showWidget;this._updateDisplay();if(e.showShortcuts!==this._showShortcuts){this._showShortcuts=e.showShortcuts;this._updateShortcutsVisibility()}q.streamingAnimation=e.streamingAnimation;q.spacerRemovalDelay=Math.max(0,e.editorResizeDelay-300);q.spacerRemovalDuration=Math.max(0,Math.min(300,e.editorResizeDelay-300));this._minLines=e.minLines;this._maxLines=e.maxLines;this._reserveSpaceForLongest=e.reserveSpaceForLongest;this._suppressIfTabCompleterActive=e.suppressIfTabCompleterActive}get suppressIfTabCompleterActive(){return this._suppressIfTabCompleterActive}get isActive(){var e;return!!((e=this.editor)===null||e===void 0?void 0:e.host.classList.contains(Q))}handleEvent(e){if(this.isHidden||!this._editor){return}switch(e.type){case"pointerdown":this._evtPointerdown(e);break;case"scroll":this._evtScroll(e);break;default:break}}onUpdateRequest(e){super.onUpdateRequest(e);const t=this._model;if(!t){return}let n=t.completions;if(!n||!n.items||n.items.length===0){if(!this.isHidden){this.hide()}return}if(this.isHidden){this.show();this._setGeometry()}}onAfterAttach(e){document.addEventListener("scroll",this,true);document.addEventListener("pointerdown",this,true)}onBeforeDetach(e){document.removeEventListener("scroll",this,true);document.removeEventListener("pointerdown",this,true)}_evtPointerdown(e){var t;if(this.isHidden||!this._editor){return}const n=e.target;if(this.node.contains(n)){return true}this.hide();(t=this.model)===null||t===void 0?void 0:t.reset()}_evtScroll(e){if(this.isHidden||!this._editor){return}const{node:t}=this;if(t.contains(e.target)){return}requestAnimationFrame((()=>{this._setGeometry()}))}_onEditorBlur(e){var t;if(this.node.contains(e.relatedTarget)){return false}(t=this._editor)===null||t===void 0?void 0:t.host.classList.remove(Q);this.hide()}_onModelSuggestionsChanged(e,t){var n;if(!this.isAttached){this.update();return}if(t.event==="set"){this._current=(n=t.indexMap.get(this._current))!==null&&n!==void 0?n:0}else if(t.event==="clear"){const e=this.editor;if(e){this._ghostManager.clearGhosts(e.editor);e.host.classList.remove(Q)}}this._updateStreamTracking();this.update();this._render()}_onModelFilterTextChanged(e,t){var n,i;const s=(n=this.model)===null||n===void 0?void 0:n.completions;if(!s||!s.items||s.items.length===0){return}this._current=(i=t.get(this._current))!==null&&i!==void 0?i:0;this._updateStreamTracking();setTimeout((()=>{this._render();this._setGeometry()}),0)}_onProvisionProgress(e,t){requestAnimationFrame((()=>{if(t.pendingProviders===0){this._progressBar.style.display="none"}else{this._progressBar.style.display="";this._progressBar.style.width=100*t.pendingProviders/t.totalProviders+"%"}}))}_render(){var e,t;const n=(e=this.model)===null||e===void 0?void 0:e.completions;if(!n||!n.items||n.items.length===0){return}const i=n.items[this._current];this._setText(i);if(this._showWidget==="never"){return}this._suggestionsCounter.node.innerText=this._trans.__("%1/%2",this._current+1,n.items.length);this._providerWidget.node.title=this._trans.__("Provider: %1",i.provider.name);const s=(t=i.provider.icon)!==null&&t!==void 0?t:b.kernelIcon;s.render(this._providerWidget.node)}_setText(e){var t,n,i;const s=e.insertText;const o=this._editor;const r=this._model;if(!r||!o){return}const a=o.editor;let l;if(this._reserveSpaceForLongest){const e=(i=(n=(t=this.model)===null||t===void 0?void 0:t.completions)===null||n===void 0?void 0:n.items)!==null&&i!==void 0?i:[];const s=Math.max(...e.map((e=>e.insertText.split("\n").length)));l=Math.max(this._minLines,s)}else{l=this._minLines}this._ghostManager.placeGhost(a,{from:o.getOffsetAt(r.cursor),content:s,providerId:e.provider.identifier,addedPart:e.lastStreamed,streaming:e.streaming,minLines:l,maxLines:this._maxLines,onPointerOver:this._onPointerOverGhost.bind(this),onPointerLeave:this._onPointerLeaveGhost.bind(this),error:e.error});o.host.classList.add(Q)}_onPointerOverGhost(){if(this._clearHoverTimeout!==null){window.clearTimeout(this._clearHoverTimeout);this._clearHoverTimeout=null}this.node.classList.add(Z)}_onPointerLeaveGhost(){this._clearHoverTimeout=window.setTimeout((()=>this.node.classList.remove(Z)),500)}_setGeometry(){const{node:e}=this;const t=this._model;const n=this._editor;if(!n||!t||!t.cursor){return}const i=n.host.closest(".jp-MainAreaWidget > .lm-Widget")||n.host;let s;try{const e=n.getCoordinateForPosition(t.cursor);if(!e){throw Error("No coordinates for cursor position")}s=e}catch(o){this.hide();return}b.HoverBox.setGeometry({anchor:s,host:i,maxHeight:40,minHeight:20,node:e,privilege:"forceAbove",outOfViewDisplay:{top:"stick-outside",bottom:"stick-inside",left:"stick-inside",right:"stick-outside"}})}_updateShortcutsVisibility(){this.node.dataset.showShortcuts=this._showShortcuts+""}_updateDisplay(){this.node.dataset.display=this._showWidget}}(function(e){e.defaultSettings={showWidget:"onHover",showShortcuts:true,streamingAnimation:"uncover",providers:{},minLines:2,maxLines:4,editorResizeDelay:1e3,reserveSpaceForLongest:false,suppressIfTabCompleterActive:true};class t{constructor(){this.suggestionsChanged=new r.Signal(this);this.filterTextChanged=new r.Signal(this);this.provisionProgress=new r.Signal(this);this._isDisposed=false;this._completions=null}setCompletions(e){var t,n;const i=new Map((n=(t=this._completions)===null||t===void 0?void 0:t.items)===null||n===void 0?void 0:n.map(((e,t)=>[e.insertText,t])));this._completions=e;const s=new Map(e.items.map(((e,t)=>[i.get(e.insertText),t])));this.suggestionsChanged.emit({event:"set",indexMap:s})}appendCompletions(e){if(!this._completions||!this._completions.items){console.warn("No completions to append to");return}this._completions.items.push(...e.items);this.suggestionsChanged.emit({event:"append"})}notifyProgress(e){this.provisionProgress.emit(e)}get cursor(){return this._cursor}set cursor(e){this._cursor=e}get completions(){return this._completions}reset(){this._completions=null;this.suggestionsChanged.emit({event:"clear"})}get isDisposed(){return this._isDisposed}handleTextChange(e){var t;const n=this._completions;if(!n||!n.items||n.items.length===0){return}const i=new Map(n.items.map(((e,t)=>[e,t])));for(let o of(t=e.sourceChange)!==null&&t!==void 0?t:[]){const e=o.insert;if(e){const t=n.items.filter((t=>{var n;const i=(n=t.filterText)!==null&&n!==void 0?n:t.insertText;if(!i.startsWith(e)){return false}t.filterText=i.substring(e.length);t.insertText=t.insertText.substring(e.length);return true}));if(t.length===0){this._completions=null}n.items=t}else{if(!o.retain){this._completions=null}}}const s=new Map(n.items.map(((e,t)=>[i.get(e),t])));this.filterTextChanged.emit(s)}handleSelectionChange(e){const t=this.cursor;if(!t){return}const{start:n,end:i}=e;if(n.column!==i.column||n.line!==i.line){this.reset()}if(n.line!==t.line||n.column<t.column){this.reset()}}dispose(){if(this._isDisposed){return}this._isDisposed=true;r.Signal.clearData(this)}}e.Model=t})(te||(te={}));class ne{constructor(){this._activeProviders=new Set([L,D]);this._inlineCompleterSettings=te.defaultSettings;this._providers=new Map;this._inlineProviders=new Map;this._panelHandlers=new Map;this._mostRecentContext=new Map;this._activeProvidersChanged=new r.Signal(this);this._selected=new r.Signal(this);this._inlineCompleterFactory=null}get activeProvidersChanged(){return this._activeProvidersChanged}get selected(){return this._selected}setTimeout(e){this._timeout=e}setShowDocumentationPanel(e){this._panelHandlers.forEach((t=>t.completer.showDocsPanel=e));this._showDoc=e}setSuppressIfInlineCompleterActive(e){this._panelHandlers.forEach((t=>t.completer.suppressIfInlineCompleterActive=e));this._suppressIfInlineCompleterActive=e}setContinuousHinting(e){this._panelHandlers.forEach((t=>t.autoCompletion=e));this._autoCompletion=e}registerProvider(e){const t=e.identifier;if(this._providers.has(t)){console.warn(`Completion provider with identifier ${t} is already registered`)}else{this._providers.set(t,e);this._panelHandlers.forEach(((e,t)=>{void this.updateCompleter(this._mostRecentContext.get(t))}))}}registerInlineProvider(e){const t=e.identifier;if(this._inlineProviders.has(t)){console.warn(`Completion provider with identifier ${t} is already registered`)}else{this._inlineProviders.set(t,e);this._panelHandlers.forEach(((e,t)=>{void this.updateCompleter(this._mostRecentContext.get(t))}))}}getProviders(){return this._providers}activateProvider(e){this._activeProviders=new Set([]);e.forEach((e=>{if(this._providers.has(e)){this._activeProviders.add(e)}}));if(this._activeProviders.size===0){this._activeProviders.add(L);this._activeProviders.add(D)}this._activeProvidersChanged.emit()}async updateCompleter(e){var t,n;const{widget:i,editor:s,sanitizer:o}=e;const r=i.id;const a=this._panelHandlers.get(r);const l=[...this._activeProviders][0];const d=this._providers.get(l);let c=(t=d===null||d===void 0?void 0:d.renderer)!==null&&t!==void 0?t:E.getDefaultRenderer(o);const h=d===null||d===void 0?void 0:d.modelFactory;let u;if(h){u=await h.call(d,e)}else{u=new g}this._mostRecentContext.set(i.id,e);const p={model:u,editor:s,renderer:c,sanitizer:o,showDoc:this._showDoc};if(!a){const t=await this._generateHandler(e,p);this._panelHandlers.set(i.id,t);t.completer.selected.connect(((e,t)=>this._selected.emit({insertText:t})));i.disposed.connect((e=>{this.disposeHandler(e.id,t);this._mostRecentContext.delete(r)}))}else{const t=a.completer;(n=t.model)===null||n===void 0?void 0:n.dispose();t.model=p.model;t.renderer=p.renderer;t.showDocsPanel=p.showDoc;t.suppressIfInlineCompleterActive=this._suppressIfInlineCompleterActive;a.autoCompletion=this._autoCompletion;if(s){a.editor=s;a.reconciliator=await this.generateReconciliator(e)}}}invoke(e){const t=this._panelHandlers.get(e);if(t){t.invoke()}}select(e){const t=this._panelHandlers.get(e);if(t){t.completer.selectActive()}}setInlineCompleterFactory(e){this._inlineCompleterFactory=e;this._panelHandlers.forEach(((e,t)=>{void this.updateCompleter(this._mostRecentContext.get(t))}));if(this.inline){return}this.inline={invoke:e=>{const t=this._panelHandlers.get(e);if(t&&t.inlineCompleter){t.invokeInline()}},isActive:e=>{const t=this._panelHandlers.get(e);if(t&&t.inlineCompleter){return t.inlineCompleter.isActive}return false},cycle:(e,t)=>{const n=this._panelHandlers.get(e);if(n&&n.inlineCompleter){n.inlineCompleter.cycle(t)}},accept:e=>{const t=this._panelHandlers.get(e);if(t&&t.inlineCompleter){t.inlineCompleter.accept()}},configure:e=>{this._inlineCompleterSettings=e;for(const[t,n]of this._inlineProviders.entries()){if(n.configure){n.configure(e.providers[t])}}this._panelHandlers.forEach(((t,n)=>{if(t.inlineCompleter){t.inlineCompleter.configure(e)}void this.updateCompleter(this._mostRecentContext.get(n))}))}}}get inlineProviders(){return[...this._inlineProviders.values()]}async generateReconciliator(e){const t=[];for(const[s,o]of Object.entries(this._inlineCompleterSettings.providers)){if(o.enabled===true){t.push(s)}}const n=[...this._inlineProviders.values()].filter((e=>t.includes(e.identifier)));const i=[];for(const s of this._activeProviders){const e=this._providers.get(s);if(e){i.push(e)}}return new M({context:e,providers:i,inlineProviders:n,inlineProvidersSettings:this._inlineCompleterSettings.providers,timeout:this._timeout})}disposeHandler(e,t){var n,i,s,o;(n=t.completer.model)===null||n===void 0?void 0:n.dispose();t.completer.dispose();(s=(i=t.inlineCompleter)===null||i===void 0?void 0:i.model)===null||s===void 0?void 0:s.dispose();(o=t.inlineCompleter)===null||o===void 0?void 0:o.dispose();t.dispose();this._panelHandlers.delete(e)}async _generateHandler(e,t){const n=new E(t);const i=this._inlineCompleterFactory?this._inlineCompleterFactory.factory({...t,model:new te.Model}):undefined;n.hide();w.Widget.attach(n,document.body);if(i){w.Widget.attach(i,document.body);i.hide();i.configure(this._inlineCompleterSettings)}const s=await this.generateReconciliator(e);const o=new u({completer:n,inlineCompleter:i,reconciliator:s});o.editor=e.editor;return o}}const ie='<svg xmlns="http://www.w3.org/2000/svg" width="16" viewBox="0 0 24 24">\n  <path class="jp-icon4" fill="#bbbbbb" d="M17 15H3v2h14v-2Zm0-8h-6v2h6V7ZM3 13h18v-2H3v2Zm0 8h18v-2H3v2Z"/>\n  <path class="jp-icon1" fill="#616161" d="M3 3v2h18V3H3ZM3 7v2h8V7H3Z"/>\n</svg>\n';const se='<svg xmlns="http://www.w3.org/2000/svg" width="16" viewBox="0 0 24 24">\n<g fill="#616161" class="jp-icon2 jp-icon-selectable">\n  <path d="M6 8h16v14.3H6z" style="fill:#eee;stroke:#444;stroke-linejoin:round"/>\n  <path d="M3 3v2h10V3H3Z" transform="matrix(.8 0 0 1 .5 0)"/>\n</g>\n<g class="jp-icon3 jp-icon-selectable">\n  <path fill="#616161" d="M18 14.1H8v2h11v-2ZM8 12.1H20V10.1H8v2Zm0 8H20v-2H8v3Z"/>\n</g>\n</svg>\n';const oe=new b.LabIcon({name:"completer:inline",svgstr:ie});const re=new b.LabIcon({name:"completer:widget",svgstr:se});var ae=n(21760);class le{constructor(e){this.options=e;this.identifier="@jupyterlab/inline-completer:history";this._maxSuggestions=100;const t=e.translator||ae.nullTranslator;this._trans=t.load("jupyterlab")}get name(){return this._trans.__("History")}get icon(){return b.historyIcon}get schema(){return{properties:{maxSuggestions:{title:this._trans.__("Maximum number of suggestions"),description:this._trans.__("The maximum number of suggestions to retrieve from history."),type:"number"}},default:{enabled:false,maxSuggestions:100}}}configure(e){var t;this._maxSuggestions=(t=e.maxSuggestions)!==null&&t!==void 0?t:100}async fetch(e,t,n){var i;const s=(i=t.session)===null||i===void 0?void 0:i.kernel;if(!s){throw new Error("No kernel for completion request.")}const o=e.text.slice(0,e.offset);const r=o.split("\n").slice(-1)[0];const a=e.text.slice(e.offset).split("\n")[0];let l;const d=[];if(r===""){l={output:false,raw:true,hist_access_type:"tail",n:this._maxSuggestions};const e=await s.requestHistory(l);if(e.content.status==="ok"){let t=e.content.history;const n=new Map;for(const e of t.reverse()){const t=e[2];n.set(t,(n.get(t)||0)+1)}const i=Array.from(n.entries());const s=i.sort(((e,t)=>{if(e[1]>t[1]){return-1}else if(e[1]<t[1]){return 1}else{return 0}}));for(const e of s){d.push({insertText:e[0]})}}}else{l={output:false,raw:true,hist_access_type:"search",pattern:r+"*"+(a?a+"*":""),unique:true,n:this._maxSuggestions};const e=await s.requestHistory(l);if(e.content.status==="ok"){for(const t of e.content.history){const e=t[2].split("\n");for(let t=0;t<e.length;t++){const n=e[t];if(n.startsWith(r)){let i=n.slice(r.length);if(t+1<e.length){i+="\n"+e.slice(t+1).join("\n")}if(a){i=i.slice(0,i.indexOf(a))}d.push({insertText:i})}}}}}return{items:d}}}},36060:(e,t,n)=>{"use strict";var i=n(10395);var s=n(40662);var o=n(97913);var r=n(23359);var a=n(5893);var l=n(85072);var d=n.n(l);var c=n(97825);var h=n.n(c);var u=n(77659);var p=n.n(u);var m=n(55056);var g=n.n(m);var f=n(10540);var v=n.n(f);var _=n(41113);var b=n.n(_);var y=n(57331);var w={};w.styleTagTransform=b();w.setAttributes=g();w.insert=p().bind(null,"head");w.domAPI=h();w.insertStyleElement=v();var C=d()(y.A,w);const x=y.A&&y.A.locals?y.A.locals:undefined},70802:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>A});var i=n(30244);var s=n(48287);var o=n(84958);var r=n(67296);var a=n(32976);var l=n(51172);var d=n(85406);var c=n(59574);var h=n(61314);var u=n(90600);var p=n(21760);var m=n(78464);var g=n(34236);var f=n(5592);var v=n(90044);var _=n(1143);var b=n(94466);const y={id:"@jupyterlab/console-extension:foreign",description:"Add foreign handler of IOPub messages to the console.",requires:[a.IConsoleTracker,u.ISettingRegistry,p.ITranslator],optional:[s.ICommandPalette],activate:C,autoStart:true};const w=y;function C(e,t,n,i,s){var o;const r=i.load("jupyterlab");const{shell:l}=e;t.widgetAdded.connect(((e,t)=>{const i=t.console;const s=new a.ForeignHandler({sessionContext:i.sessionContext,parent:i});x.foreignHandlerProperty.set(i,s);void n.get("@jupyterlab/console-extension:tracker","showAllKernelActivity").then((({composite:e})=>{const t=e;s.enabled=t}));i.disposed.connect((()=>{s.dispose()}))}));const{commands:d}=e;const c=r.__("Console");const h="console:toggle-show-all-kernel-activity";function u(e){const n=t.currentWidget;const i=e["activate"]!==false;if(i&&n){l.activateById(n.id)}return n}d.addCommand(h,{label:e=>r.__("Show All Kernel Activity"),execute:e=>{const t=u(e);if(!t){return}const n=x.foreignHandlerProperty.get(t.console);if(n){n.enabled=!n.enabled}},isToggled:()=>{var e;return t.currentWidget!==null&&!!((e=x.foreignHandlerProperty.get(t.currentWidget.console))===null||e===void 0?void 0:e.enabled)},isEnabled:()=>t.currentWidget!==null&&t.currentWidget===l.currentWidget});const p=()=>{d.notifyCommandChanged(h)};t.currentChanged.connect(p);(o=l.currentChanged)===null||o===void 0?void 0:o.connect(p);if(s){s.addItem({command:h,category:c,args:{isPalette:true}})}}var x;(function(e){e.foreignHandlerProperty=new b.AttachedProperty({name:"foreignHandler",create:()=>undefined})})(x||(x={}));const S={id:"@jupyterlab/console-extension:cell-executor",description:"Provides the console cell executor.",autoStart:true,provides:a.IConsoleCellExecutor,activate:()=>Object.freeze({runCell:a.runCell})};var k;(function(e){e.autoClosingBrackets="console:toggle-autoclosing-brackets";e.create="console:create";e.clear="console:clear";e.runUnforced="console:run-unforced";e.runForced="console:run-forced";e.linebreak="console:linebreak";e.interrupt="console:interrupt-kernel";e.restart="console:restart-kernel";e.closeAndShutdown="console:close-and-shutdown";e.open="console:open";e.inject="console:inject";e.changeKernel="console:change-kernel";e.getKernel="console:get-kernel";e.interactionMode="console:interaction-mode";e.redo="console:redo";e.replaceSelection="console:replace-selection";e.shutdown="console:shutdown";e.undo="console:undo";e.invokeCompleter="completer:invoke-console";e.selectCompleter="completer:select-console"})(k||(k={}));const j={id:"@jupyterlab/console-extension:tracker",description:"Provides the console widget tracker.",provides:a.IConsoleTracker,requires:[a.ConsolePanel.IContentFactory,o.IEditorServices,a.IConsoleCellExecutor,h.IRenderMimeRegistry,u.ISettingRegistry],optional:[i.ILayoutRestorer,l.IDefaultFileBrowser,c.IMainMenu,s.ICommandPalette,d.ILauncher,i.ILabStatus,s.ISessionContextDialogs,m.IFormRendererRegistry,p.ITranslator,s.ISessionContextDialogs,s.IToolbarWidgetRegistry],activate:P,autoStart:true};const I={id:"@jupyterlab/console-extension:factory",description:"Provides the console widget content factory.",provides:a.ConsolePanel.IContentFactory,requires:[o.IEditorServices],autoStart:true,activate:(e,t)=>{const n=t.factoryService.newInlineEditor;return new a.ConsolePanel.ContentFactory({editorFactory:n})}};const E={id:"@jupyterlab/console-extension:kernel-status",description:"Adds the console to the kernel status indicator model.",autoStart:true,requires:[a.IConsoleTracker,s.IKernelStatusModel],activate:(e,t,n)=>{const i=e=>{let n=null;if(e&&t.has(e)){return e.sessionContext}return n};n.addSessionProvider(i)}};const T={id:"@jupyterlab/console-extension:cursor-position",description:"Adds the console to the code editor cursor position model.",autoStart:true,requires:[a.IConsoleTracker,o.IPositionModel],activate:(e,t,n)=>{let i=null;const s=async e=>{let s=null;if(e!==i){i===null||i===void 0?void 0:i.console.promptCellCreated.disconnect(n.update);i=null;if(e&&t.has(e)){e.console.promptCellCreated.connect(n.update);const t=e.console.promptCell;s=null;if(t){await t.ready;s=t.editor}i=e}}else if(e){const t=e.console.promptCell;s=null;if(t){await t.ready;s=t.editor}}return s};n.addEditorProvider(s)}};const M={id:"@jupyterlab/console-extension:completer",description:"Adds completion to the console.",autoStart:true,requires:[a.IConsoleTracker],optional:[r.ICompletionProviderManager,p.ITranslator,s.ISanitizer],activate:L};const D=[I,j,w,E,T,M,S];const A=D;async function P(e,t,n,i,o,r,l,d,c,h,u,b,y,w,C,x,S){var j;const I=C!==null&&C!==void 0?C:p.nullTranslator;const E=I.load("jupyterlab");const T=e.serviceManager;const{commands:M,shell:D}=e;const A=E.__("Console");const P=y!==null&&y!==void 0?y:new s.SessionContextDialogs({translator:I});const L="@jupyterlab/console-extension:tracker";const R=["top","bottom","left","right"];let N;if(S){const e="ConsolePanel";N=(0,s.createToolbarFactory)(S,r,e,L,I);if(x){S.addFactory(e,"kernelName",(e=>s.Toolbar.createKernelNameItem(e.sessionContext,x,I)))}S.addFactory(e,"kernelStatus",(e=>{const t=e.sessionContext;const n=s.Toolbar.createKernelStatusItem(t);return n}));const t=new _.Menu({commands:M});t.addClass("jp-CodeConsolePromptMenu");R.forEach((e=>{t.addItem({command:`console:prompt-to-${e}`})}));S.addFactory(e,"promptPosition",(e=>{const n=new m.ToolbarButton({tooltip:E.__("Change Console Prompt Position"),icon:m.dotsIcon,onClick:()=>{const e=n.node.getBoundingClientRect().right;const i=n.node.getBoundingClientRect().bottom;t.open(e,i,{horizontalAlignment:"right"})}});return n}))}const O=new s.WidgetTracker({namespace:"console"});if(l){void l.restore(O,{command:k.create,args:e=>{const{path:t,name:n,kernelPreference:i}=e.console.sessionContext;return{path:t,name:n,kernelPreference:{...i}}},name:e=>{var t;return(t=e.console.sessionContext.path)!==null&&t!==void 0?t:f.UUID.uuid4()},when:T.ready})}if(u){void T.ready.then((()=>{let e=null;const t=()=>{if(e){e.dispose();e=null}const t=T.kernelspecs.specs;if(!t){return}e=new v.DisposableSet;for(const n in t.kernelspecs){const i=n===t.default?0:Infinity;const s=t.kernelspecs[n];const o=s.resources["logo-svg"]||s.resources["logo-64x64"];e.add(u.add({command:k.create,args:{isLauncher:true,kernelPreference:{name:n}},category:E.__("Console"),rank:i,kernelIconUrl:o,metadata:{kernel:f.JSONExt.deepCopy(s.metadata||{})}}))}};t();T.kernelspecs.specsChanged.connect(t)}))}async function B(e){var l,d;await T.ready;const c=new a.ConsolePanel({manager:T,contentFactory:t,mimeTypeService:n.mimeTypeService,rendermime:o,sessionDialogs:P,executor:i,translator:I,setBusy:(l=b&&(()=>b.setBusy()))!==null&&l!==void 0?l:undefined,...e});if(N){(0,s.setToolbar)(c,N)}const h=(await r.get("@jupyterlab/console-extension:tracker","interactionMode")).composite;c.console.node.dataset.jpInteractionMode=h;await O.add(c);c.sessionContext.propertyChanged.connect((()=>{void O.save(c)}));if(e.subshell){c.sessionContext.kernelChanged.connect((async()=>{if(!c.sessionContext.isDisposed){c.sessionContext.ready.then((async()=>{if(c.sessionContext.session===null){console.error("Cannot create subshell without session")}else if(c.sessionContext.session.kernel===null){console.error("Cannot create subshell without kernel")}else{const{kernel:e}=c.sessionContext.session;await e.info;const t=await e.requestCreateSubshell({}).done;e.subshellId=t.content.subshell_id}})).catch((e=>{console.error("Failed to initialize SessionContext or create new subshell.",e)}))}}))}D.add(c,"main",{ref:e.ref,mode:e.insertMode,activate:e.activate!==false,type:(d=e.type)!==null&&d!==void 0?d:"Console"});return c}let F;let z;let H;let W;let V={};let U;let q;async function $(e){F=(await r.get(L,"clearCellsOnExecute")).composite;z=(await r.get(L,"clearCodeContentOnExecute")).composite;H=(await r.get(L,"hideCodeInput")).composite;W=(await r.get(L,"interactionMode")).composite;V=(await r.get(L,"promptCellConfig")).composite;U=(await r.get(L,"promptCellPosition")).composite;q=(await r.get(L,"showBanner")).composite;const t=e=>{var t,n;e.console.node.dataset.jpInteractionMode=W;e.console.editorConfig=V;(n=(t=e.console.promptCell)===null||t===void 0?void 0:t.editor)===null||n===void 0?void 0:n.setOptions(V);e.console.setConfig({clearCellsOnExecute:F,clearCodeContentOnExecute:z,hideCodeInput:H,promptCellPosition:U,showBanner:q})};if(e){t(e)}else{O.forEach(t)}}r.pluginChanged.connect(((e,t)=>{if(t===L){void $()}}));await $();if(w){const e=w.getRenderer("@jupyterlab/codemirror-extension:plugin.defaultConfig");if(e){w.addRenderer("@jupyterlab/console-extension:tracker.promptCellConfig",e)}}O.widgetAdded.connect(((e,t)=>{void $(t)}));M.addCommand(k.autoClosingBrackets,{execute:async e=>{var t;V.autoClosingBrackets=!!((t=e["force"])!==null&&t!==void 0?t:!V.autoClosingBrackets);await r.set(L,"promptCellConfig",V)},label:E.__("Auto Close Brackets for Code Console Prompt"),isToggled:()=>V.autoClosingBrackets});function K(){return O.currentWidget!==null&&O.currentWidget===D.currentWidget}M.addCommand(k.open,{label:E.__("Open a console for the provided `path`."),execute:e=>{const t=e["path"];const n=O.find((e=>{var n;return((n=e.console.sessionContext.session)===null||n===void 0?void 0:n.path)===t}));if(n){if(e.activate!==false){D.activateById(n.id)}return n}else{return T.ready.then((()=>{const n=(0,g.find)(T.sessions.running(),(e=>e.path===t));if(n){return B(e)}return Promise.reject(`No running kernel session for path: ${t}`)}))}}});M.addCommand(k.create,{label:e=>{var t,n,i,s;if(e["isPalette"]){return E.__("New Console")}else if(e["isLauncher"]&&e["kernelPreference"]){const o=e["kernelPreference"];return(s=(i=(n=(t=T.kernelspecs)===null||t===void 0?void 0:t.specs)===null||n===void 0?void 0:n.kernelspecs[o.name||""])===null||i===void 0?void 0:i.display_name)!==null&&s!==void 0?s:""}return E.__("Console")},icon:e=>e["isPalette"]?undefined:m.consoleIcon,execute:e=>{var t;const n=(t=e["basePath"]||e["cwd"]||(d===null||d===void 0?void 0:d.model.path))!==null&&t!==void 0?t:"";return B({basePath:n,...e})}});function J(e){var t;const n=e[s.SemanticCommand.WIDGET]?(t=O.find((t=>t.id===e[s.SemanticCommand.WIDGET])))!==null&&t!==void 0?t:null:O.currentWidget;const i=e["activate"]!==false;if(i&&n){D.activateById(n.id)}return n}const G={top:m.dockTopIcon,bottom:m.dockBottomIcon,right:m.dockRightIcon,left:m.dockLeftIcon};R.forEach((e=>{const t=`console:prompt-to-${e}`;M.addCommand(t,{execute:t=>{const n=J(t);if(!n){return}n.console.setConfig({promptCellPosition:e})},isEnabled:K,label:E.__(`Prompt to ${e}`),icon:t=>t["isPalette"]?undefined:G[e]});if(h){h.addItem({command:t,category:A,args:{isPalette:true}})}}));M.addCommand(k.undo,{execute:e=>{var t;const n=J(e);if(!n){return}const i=(t=n.console.promptCell)===null||t===void 0?void 0:t.editor;if(!i){return}i.undo()},isEnabled:e=>{var t,n,i;if(!K()){return false}const s=(i=(n=(t=J(e))===null||t===void 0?void 0:t.console)===null||n===void 0?void 0:n.promptCell)===null||i===void 0?void 0:i.editor;if(!s){return false}return s.model.sharedModel.canUndo()},icon:m.undoIcon.bindprops({stylesheet:"menuItem"}),label:E.__("Undo")});M.addCommand(k.redo,{execute:e=>{var t;const n=J(e);if(!n){return}const i=(t=n.console.promptCell)===null||t===void 0?void 0:t.editor;if(!i){return}i.redo()},isEnabled:e=>{var t,n,i;if(!K()){return false}const s=(i=(n=(t=J(e))===null||t===void 0?void 0:t.console)===null||n===void 0?void 0:n.promptCell)===null||i===void 0?void 0:i.editor;if(!s){return false}return s.model.sharedModel.canRedo()},icon:m.redoIcon.bindprops({stylesheet:"menuItem"}),label:E.__("Redo")});M.addCommand(k.clear,{label:E.__("Clear Console Cells"),icon:e=>e.toolbar?m.clearIcon:undefined,execute:e=>{const t=J(e);if(!t){return}t.console.clear()},isEnabled:K});M.addCommand(k.runUnforced,{label:E.__("Run Cell (unforced)"),icon:e=>e.toolbar?m.runIcon:undefined,execute:e=>{const t=J(e);if(!t){return}return t.console.execute()},isEnabled:K});M.addCommand(k.runForced,{label:E.__("Run Cell (forced)"),icon:e=>e.toolbar?m.runIcon:undefined,execute:e=>{const t=J(e);if(!t){return}return t.console.execute(true)},isEnabled:K});M.addCommand(k.linebreak,{label:E.__("Insert Line Break"),execute:e=>{const t=J(e);if(!t){return}t.console.insertLinebreak()},isEnabled:K});M.addCommand(k.replaceSelection,{label:E.__("Replace Selection in Console"),execute:e=>{const t=J(e);if(!t){return}const n=e["text"]||"";t.console.replaceSelection(n)},isEnabled:K});M.addCommand(k.interrupt,{label:E.__("Interrupt Kernel"),execute:e=>{var t;const n=J(e);if(!n){return}const i=(t=n.console.sessionContext.session)===null||t===void 0?void 0:t.kernel;if(i){return i.interrupt()}},isEnabled:K});M.addCommand(k.restart,{label:E.__("Restart Kernel"),icon:e=>e.toolbar?m.refreshIcon:undefined,execute:e=>{const t=J(e);if(!t){return}return P.restart(t.console.sessionContext)},isEnabled:K});M.addCommand(k.shutdown,{label:E.__("Shut Down"),execute:e=>{const t=J(e);if(!t){return}return t.console.sessionContext.shutdown()}});M.addCommand(k.closeAndShutdown,{label:E.__("Close and Shut Down"),execute:e=>{const t=J(e);if(!t){return}return(0,s.showDialog)({title:E.__("Shut down the console?"),body:E.__('Are you sure you want to close "%1"?',t.title.label),buttons:[s.Dialog.cancelButton({ariaLabel:E.__("Cancel console Shut Down")}),s.Dialog.warnButton({ariaLabel:E.__("Confirm console Shut Down")})]}).then((e=>{if(e.button.accept){return M.execute(k.shutdown,{activate:false}).then((()=>{t.dispose();return true}))}else{return false}}))},isEnabled:K});M.addCommand(k.inject,{label:E.__("Inject some code in a console."),execute:e=>{const t=e["path"];O.find((n=>{var i;if(((i=n.console.sessionContext.session)===null||i===void 0?void 0:i.path)===t){if(e["activate"]!==false){D.activateById(n.id)}void n.console.inject(e["code"],e["metadata"]);return true}return false}))},isEnabled:K});M.addCommand(k.changeKernel,{label:E.__("Change Kernel"),execute:e=>{const t=J(e);if(!t){return}return P.selectKernel(t.console.sessionContext)},isEnabled:K});M.addCommand(k.getKernel,{label:E.__("Get Kernel"),execute:e=>{var t;const n=J({activate:false,...e});if(!n){return}return(t=n.sessionContext.session)===null||t===void 0?void 0:t.kernel},isEnabled:K});const Y=[k.create];const X=()=>{Object.values(k).filter((e=>!Y.includes(e))).forEach((t=>e.commands.notifyCommandChanged(t)))};O.currentChanged.connect(X);(j=D.currentChanged)===null||j===void 0?void 0:j.connect(X);if(h){[k.create,k.linebreak,k.clear,k.runUnforced,k.runForced,k.restart,k.interrupt,k.changeKernel,k.closeAndShutdown].forEach((e=>{h.addItem({command:e,category:A,args:{isPalette:true}})}))}if(c){c.fileMenu.closeAndCleaners.add({id:k.closeAndShutdown,isEnabled:K});c.kernelMenu.kernelUsers.changeKernel.add({id:k.changeKernel,isEnabled:K});c.kernelMenu.kernelUsers.clearWidget.add({id:k.clear,isEnabled:K});c.kernelMenu.kernelUsers.interruptKernel.add({id:k.interrupt,isEnabled:K});c.kernelMenu.kernelUsers.restartKernel.add({id:k.restart,isEnabled:K});c.kernelMenu.kernelUsers.shutdownKernel.add({id:k.shutdown,isEnabled:K});c.runMenu.codeRunners.run.add({id:k.runForced,isEnabled:K});c.editMenu.clearers.clearCurrent.add({id:k.clear,isEnabled:K});c.editMenu.undoers.redo.add({id:k.redo,isEnabled:K});c.editMenu.undoers.undo.add({id:k.undo,isEnabled:K});c.helpMenu.getKernel.add({id:k.getKernel,isEnabled:K})}const Q={notebook:E.__("Execute with Shift+Enter"),terminal:E.__("Execute with Enter")};M.addCommand(k.interactionMode,{label:e=>{var t;return(t=Q[e["interactionMode"]])!==null&&t!==void 0?t:"Set the console interaction mode."},execute:async e=>{const t="keyMap";try{await r.set(L,"interactionMode",e["interactionMode"])}catch(n){console.error(`Failed to set ${L}:${t} - ${n.message}`)}},isToggled:e=>e["interactionMode"]===W});return O}function L(e,t,n,i,o){if(!n){return}const r=(i!==null&&i!==void 0?i:p.nullTranslator).load("jupyterlab");const a=o!==null&&o!==void 0?o:new s.Sanitizer;e.commands.addCommand(k.invokeCompleter,{label:r.__("Display the completion helper."),execute:()=>{const e=t.currentWidget&&t.currentWidget.id;if(e){return n.invoke(e)}}});e.commands.addCommand(k.selectCompleter,{label:r.__("Select the completion suggestion."),execute:()=>{const e=t.currentWidget&&t.currentWidget.id;if(e){return n.select(e)}}});e.commands.addKeyBinding({command:k.selectCompleter,keys:["Enter"],selector:".jp-ConsolePanel .jp-mod-completer-active"});const l=async(e,t)=>{var i,s;const o={editor:(s=(i=t.console.promptCell)===null||i===void 0?void 0:i.editor)!==null&&s!==void 0?s:null,session:t.console.sessionContext.session,widget:t};await n.updateCompleter(o);t.console.promptCellCreated.connect(((e,i)=>{const s={editor:i.editor,session:e.sessionContext.session,widget:t,sanitzer:a};n.updateCompleter(s).catch(console.error)}));t.console.sessionContext.sessionChanged.connect((()=>{var e,i;const s={editor:(i=(e=t.console.promptCell)===null||e===void 0?void 0:e.editor)!==null&&i!==void 0?i:null,session:t.console.sessionContext.session,widget:t,sanitizer:a};n.updateCompleter(s).catch(console.error)}))};t.widgetAdded.connect(l);n.activeProvidersChanged.connect((()=>{t.forEach((e=>{l(undefined,e).catch((e=>console.error(e)))}))}))}},99382:(e,t,n)=>{"use strict";var i=n(10395);var s=n(40662);var o=n(97913);var r=n(17325);var a=n(5893);var l=n(3579);var d=n(36060);var c=n(39063);var h=n(50286);var u=n(75797);var p=n(67996);var m=n(85072);var g=n.n(m);var f=n(97825);var v=n.n(f);var _=n(77659);var b=n.n(_);var y=n(55056);var w=n.n(y);var C=n(10540);var x=n.n(C);var S=n(41113);var k=n.n(S);var j=n(19961);var I={};I.styleTagTransform=k();I.setAttributes=w();I.insert=b().bind(null,"head");I.domAPI=v();I.insertStyleElement=x();var E=g()(j.A,I);const T=j.A&&j.A.locals?j.A.locals:undefined},57958:(e,t,n)=>{"use strict";n.r(t);n.d(t,{CodeConsole:()=>A,ConsoleHistory:()=>l,ConsolePanel:()=>R,ForeignHandler:()=>a,IConsoleCellExecutor:()=>B,IConsoleTracker:()=>O,runCell:()=>s});var i=n(87274);async function s({cell:e,onCellExecuted:t,sessionContext:n}){const s=n=>{if(n&&n.content.status==="ok"){const i=n.content;if(i.payload&&i.payload.length){const t=i.payload.filter((e=>e.source==="set_next_input"))[0];if(t){const n=t.text;e.model.sharedModel.setSource(n)}}t({cell:e,executionDate:new Date,success:true});return true}else if(n&&n.content.status==="error"){const i=n.content.ename;const s=n.content.evalue;t({cell:e,executionDate:new Date,success:false,error:new Error(`KernelReplyNotOK: ${i} ${s}`)});return false}t({cell:e,executionDate:new Date,success:false});return false};const o=n=>{t({cell:e,executionDate:new Date,success:false,error:new Error(n)});return false};return i.CodeCell.execute(e,n).then(s,o)}var o=n(2336);const r="jp-CodeConsole-foreignCell";class a{constructor(e){this._enabled=false;this._isDisposed=false;this.sessionContext=e.sessionContext;this.sessionContext.iopubMessage.connect(this.onIOPubMessage,this);this._parent=e.parent}get enabled(){return this._enabled}set enabled(e){this._enabled=e}get parent(){return this._parent}get isDisposed(){return this._isDisposed}dispose(){if(this.isDisposed){return}this._isDisposed=true;o.Signal.clearData(this)}onIOPubMessage(e,t){var n;if(!this._enabled){return false}const i=(n=this.sessionContext.session)===null||n===void 0?void 0:n.kernel;if(!i){return false}const s=this._parent;const o=t.parent_header.session;if(o===i.clientId){return false}const r=t.header.msg_type;const a=t.parent_header;const l=a.msg_id;let d;switch(r){case"execute_input":{const e=t;d=this._newCell(l);const n=d.model;n.executionCount=e.content.execution_count;n.sharedModel.setSource(e.content.code);n.trusted=true;s.update();return true}case"execute_result":case"display_data":case"stream":case"error":{d=this._parent.getCell(l);if(!d){return false}const e={...t.content,output_type:r};d.model.outputs.add(e);s.update();return true}case"clear_output":{const e=t.content.wait;d=this._parent.getCell(l);if(d){d.model.outputs.clear(e)}return true}default:return false}}_newCell(e){const t=this.parent.createCodeCell();t.addClass(r);this._parent.addCell(t,e);return t}}class l{constructor(e){this._cursor=0;this._hasSession=false;this._history=[];this._placeholder="";this._setByHistory=false;this._isDisposed=false;this._editor=null;this._filtered=[];const{sessionContext:t}=e;if(t){this.sessionContext=t;void this._handleKernel();this.sessionContext.kernelChanged.connect(this._handleKernel,this)}}get editor(){return this._editor}set editor(e){if(this._editor===e){return}const t=this._editor;if(t){t.edgeRequested.disconnect(this.onEdgeRequest,this);t.model.sharedModel.changed.disconnect(this.onTextChange,this)}this._editor=e;if(e){e.edgeRequested.connect(this.onEdgeRequest,this);e.model.sharedModel.changed.connect(this.onTextChange,this)}}get placeholder(){return this._placeholder}get isDisposed(){return this._isDisposed}dispose(){this._isDisposed=true;this._history.length=0;o.Signal.clearData(this)}back(e){if(!this._hasSession){this._hasSession=true;this._placeholder=e;this.setFilter(e);this._cursor=this._filtered.length-1}--this._cursor;this._cursor=Math.max(0,this._cursor);const t=this._filtered[this._cursor];return Promise.resolve(t)}forward(e){if(!this._hasSession){this._hasSession=true;this._placeholder=e;this.setFilter(e);this._cursor=this._filtered.length}++this._cursor;this._cursor=Math.min(this._filtered.length-1,this._cursor);const t=this._filtered[this._cursor];return Promise.resolve(t)}push(e){if(e&&e!==this._history[this._history.length-1]){this._history.push(e)}this.reset()}reset(){this._cursor=this._history.length;this._hasSession=false;this._placeholder=""}onHistory(e){this._history.length=0;let t="";let n="";if(e.content.status==="ok"){for(let i=0;i<e.content.history.length;i++){n=e.content.history[i][2];if(n!==t){this._history.push(t=n)}}}this._cursor=this._history.length}onTextChange(){if(this._setByHistory){this._setByHistory=false;return}this.reset()}onEdgeRequest(e,t){const n=e.model.sharedModel;const i=n.getSource();if(t==="top"||t==="topLine"){void this.back(i).then((t=>{if(this.isDisposed||!t){return}if(n.getSource()===t){return}this._setByHistory=true;n.setSource(t);let i=0;i=t.indexOf("\n");if(i<0){i=t.length}e.setCursorPosition({line:0,column:i})}))}else{void this.forward(i).then((t=>{if(this.isDisposed){return}const i=t||this.placeholder;if(n.getSource()===i){return}this._setByHistory=true;n.setSource(i);const s=e.getPositionAt(i.length);if(s){e.setCursorPosition(s)}}))}}async _handleKernel(){var e,t;const n=(t=(e=this.sessionContext)===null||e===void 0?void 0:e.session)===null||t===void 0?void 0:t.kernel;if(!n){this._history.length=0;return}return n.requestHistory(d.initialRequest).then((e=>{this.onHistory(e)}))}setFilter(e=""){this._filtered.length=0;let t="";let n="";for(let i=0;i<this._history.length;i++){n=this._history[i];if(n!==t&&e===n.slice(0,e.length)){this._filtered.push(t=n)}}this._filtered.push(e)}}var d;(function(e){e.initialRequest={output:false,raw:true,hist_access_type:"tail",n:500}})(d||(d={}));var c=n(48287);var h=n(66646);var u=n(61314);var p=n(21760);var m=n(78464);var g=n(5592);var f=n(1143);var v=n(95917);var _=n(97539);var b=n(10970);const y="jpKernelUser";const w="jpCodeRunner";const C="jp-CodeConsole";const x="jp-Console-cell";const S="jp-CodeConsole-banner";const k="jp-CodeConsole-promptCell";const j="jp-CodeConsole-content";const I="jp-CodeConsole-input";const E="jp-mod-readWrite";const T=250;const M="application/vnd.jupyter.cells";const D="jpUndoer";class A extends f.Widget{constructor(e){var t,n,i;super();this.editorConfig=A.defaultEditorConfig;this._banner=null;this._executed=new o.Signal(this);this._config={};this._mimetype="text/x-ipython";this._msgIds=new Map;this._msgIdCells=new Map;this._promptCellCreated=new o.Signal(this);this._dragData=null;this._drag=null;this._focusedCell=null;this._translator=(t=e.translator)!==null&&t!==void 0?t:p.nullTranslator;this._executor=(n=e.executor)!==null&&n!==void 0?n:Object.freeze({runCell:s});this.addClass(C);this.node.dataset[y]="true";this.node.dataset[w]="true";this.node.dataset[D]="true";this.node.tabIndex=-1;const r=this.layout=new f.PanelLayout;this._cells=new _.ObservableList;this._content=new f.Panel;this._input=new f.Panel;this._splitPanel=new f.SplitPanel({spacing:0});this._splitPanel.addClass("jp-CodeConsole-split");this.contentFactory=e.contentFactory;this.modelFactory=(i=e.modelFactory)!==null&&i!==void 0?i:A.defaultModelFactory;this.rendermime=e.rendermime;this.sessionContext=e.sessionContext;this._mimeTypeService=e.mimeTypeService;this._content.addClass(j);this._input.addClass(I);r.addWidget(this._splitPanel);this.setConfig({clearCellsOnExecute:false,clearCodeContentOnExecute:true,hideCodeInput:false,promptCellPosition:"bottom",showBanner:true});this._history=new l({sessionContext:this.sessionContext});void this._onKernelChanged();this.sessionContext.kernelChanged.connect(this._onKernelChanged,this);this.sessionContext.statusChanged.connect(this._onKernelStatusChanged,this)}get executed(){return this._executed}get promptCellCreated(){return this._promptCellCreated}get cells(){return this._cells}get promptCell(){const e=this._input.layout;return e.widgets[0]||null}addCell(e,t){if(this._config.clearCellsOnExecute){this.clear()}e.addClass(x);this._content.addWidget(e);this._cells.push(e);if(t){this._msgIds.set(t,e);this._msgIdCells.set(e,t)}e.disposed.connect(this._onCellDisposed,this);this.update()}addBanner(){if(this._banner){const e=this._banner;this._cells.push(this._banner);e.disposed.connect(this._onCellDisposed,this)}const e=this.modelFactory.createRawCell({sharedModel:(0,v.createStandaloneCell)({cell_type:"raw",source:"..."})});const t=(this._banner=new i.RawCell({model:e,contentFactory:this.contentFactory,placeholder:false,editorConfig:{autoClosingBrackets:false,codeFolding:false,highlightActiveLine:false,highlightTrailingWhitespace:false,highlightWhitespace:false,indentUnit:"4",lineNumbers:false,lineWrap:true,matchBrackets:false,readOnly:true,rulers:[],scrollPastEnd:false,smartIndent:false,tabSize:4,theme:"jupyter"}})).initializeState();t.addClass(S);t.readOnly=true;this._content.addWidget(t)}clear(){const e=this._cells;while(e.length>0){e.get(0).dispose()}}createCodeCell(){const e=this.contentFactory;const t=this._createCodeCellOptions();const n=e.createCodeCell(t);n.readOnly=true;n.model.mimeType=this._mimetype;return n}dispose(){if(this.isDisposed){return}this._msgIdCells=null;this._msgIds=null;this._history.dispose();super.dispose()}async execute(e=false,t=T){var n,i;if(((i=(n=this.sessionContext.session)===null||n===void 0?void 0:n.kernel)===null||i===void 0?void 0:i.status)==="dead"){return}const s=this.promptCell;if(!s){throw new Error("Cannot execute without a prompt cell")}s.model.trusted=true;if(e){this.newPromptCell();await this._execute(s);return}const o=await this._shouldExecute(t);if(this.isDisposed){return}if(o){this.newPromptCell();this.promptCell.editor.focus();await this._execute(s)}else{s.editor.newIndentedLine()}}getCell(e){return this._msgIds.get(e)}inject(e,t={}){const n=this.createCodeCell();n.model.sharedModel.setSource(e);for(const i of Object.keys(t)){n.model.setMetadata(i,t[i])}this.addCell(n);return this._execute(n)}insertLinebreak(){const e=this.promptCell;if(!e){return}e.editor.newIndentedLine()}replaceSelection(e){var t,n;const i=this.promptCell;if(!i){return}(n=(t=i.editor).replaceSelection)===null||n===void 0?void 0:n.call(t,e)}setConfig(e){const{clearCellsOnExecute:t,clearCodeContentOnExecute:n,hideCodeInput:i,promptCellPosition:s,showBanner:o}=e;this._config={clearCellsOnExecute:t!==null&&t!==void 0?t:this._config.clearCellsOnExecute,clearCodeContentOnExecute:n!==null&&n!==void 0?n:this._config.clearCodeContentOnExecute,hideCodeInput:i!==null&&i!==void 0?i:this._config.hideCodeInput,promptCellPosition:s!==null&&s!==void 0?s:this._config.promptCellPosition,showBanner:o!==null&&o!==void 0?o:this._config.showBanner};this._updateLayout()}serialize(){const e=[];for(const t of this._cells){const n=t.model;if((0,i.isCodeCellModel)(n)){e.push(n.toJSON())}}if(this.promptCell){e.push(this.promptCell.model.toJSON())}return e}_evtMouseDown(e){const{button:t,shiftKey:n}=e;if(!(t===0||t===2)||n&&t===2){return}let s=e.target;const o=e=>e.classList.contains(x);let r=i.CellDragUtils.findCell(s,this._cells,o);if(r===-1){s=document.elementFromPoint(e.clientX,e.clientY);r=i.CellDragUtils.findCell(s,this._cells,o)}if(r===-1){return}const a=this._cells.get(r);const l=i.CellDragUtils.detectTargetArea(a,e.target);if(l==="prompt"){this._dragData={pressX:e.clientX,pressY:e.clientY,index:r};this._focusedCell=a;document.addEventListener("mouseup",this,true);document.addEventListener("mousemove",this,true);e.preventDefault()}}_evtMouseMove(e){const t=this._dragData;if(t&&i.CellDragUtils.shouldStartDrag(t.pressX,t.pressY,e.clientX,e.clientY)){void this._startDrag(t.index,e.clientX,e.clientY)}}_startDrag(e,t,n){const s=this._focusedCell.model;const o=[s.toJSON()];const r=i.CellDragUtils.createCellDragImage(this._focusedCell,o);this._drag=new b.Drag({mimeData:new g.MimeData,dragImage:r,proposedAction:"copy",supportedActions:"copy",source:this});this._drag.mimeData.setData(M,o);const a=s.sharedModel.getSource();this._drag.mimeData.setData("text/plain",a);this._focusedCell=null;document.removeEventListener("mousemove",this,true);document.removeEventListener("mouseup",this,true);return this._drag.start(t,n).then((()=>{if(this.isDisposed){return}this._drag=null;this._dragData=null}))}handleEvent(e){switch(e.type){case"keydown":this._evtKeyDown(e);break;case"mousedown":this._evtMouseDown(e);break;case"mousemove":this._evtMouseMove(e);break;case"mouseup":this._evtMouseUp(e);break;case"resize":this._splitPanel.fit();break;case"focusin":this._evtFocusIn(e);break;case"focusout":this._evtFocusOut(e);break;default:break}}onAfterAttach(e){const t=this.node;t.addEventListener("keydown",this,true);t.addEventListener("click",this);t.addEventListener("mousedown",this);t.addEventListener("focusin",this);t.addEventListener("focusout",this);if(!this.promptCell){this.newPromptCell()}else{this.promptCell.editor.focus();this.update()}}onBeforeDetach(e){const t=this.node;t.removeEventListener("keydown",this,true);t.removeEventListener("click",this);t.removeEventListener("focusin",this);t.removeEventListener("focusout",this)}onActivateRequest(e){const t=this.promptCell&&this.promptCell.editor;if(t){t.focus()}this.update()}newPromptCell(){var e,t,n,i,s;let r=this.promptCell;const a=this._input;const l=(e=r===null||r===void 0?void 0:r.model.sharedModel.getSource())!==null&&e!==void 0?e:"";const d=(t=r===null||r===void 0?void 0:r.editor)===null||t===void 0?void 0:t.getCursorPosition();if(r){r.readOnly=true;r.removeClass(k);const e=r;requestIdleCallback((()=>{o.Signal.clearData(e.editor)}));(n=r.editor)===null||n===void 0?void 0:n.blur();const t=a.widgets[0];t.parent=null;if(this._config.hideCodeInput){(i=r.inputArea)===null||i===void 0?void 0:i.setHidden(true)}this.addCell(r)}const c=this.contentFactory;const h=this._createCodeCellOptions();r=c.createCodeCell(h);r.model.mimeType=this._mimetype;r.addClass(k);this._input.addWidget(r);this._history.editor=r.editor;if(!this._config.clearCodeContentOnExecute){r.model.sharedModel.setSource(l);if(d){(s=r.editor)===null||s===void 0?void 0:s.setCursorPosition(d)}}this._promptCellCreated.emit(r)}onUpdateRequest(e){P.scrollToBottom(this._content.node)}_evtKeyDown(e){const t=this.promptCell&&this.promptCell.editor;if(!t){return}if(e.keyCode===13&&!t.hasFocus()){e.preventDefault();t.focus()}else if(e.keyCode===27&&t.hasFocus()){e.preventDefault();e.stopPropagation();this.node.focus()}}_evtMouseUp(e){if(this.promptCell&&this.promptCell.node.contains(e.target)){this.promptCell.editor.focus()}}_evtFocusIn(e){this._updateReadWrite()}_evtFocusOut(e){this._updateReadWrite()}async _execute(e){const t=e.model.sharedModel.getSource();this._history.push(t);if(t==="clear"||t==="%clear"){this.clear();return Promise.resolve(void 0)}e.model.contentChanged.connect(this.update,this);const n={cell:e,sessionContext:this.sessionContext,onCellExecuted:e=>{this._executed.emit(e.executionDate);if(e.error){for(const e of this._cells){if(e.model.executionCount===null){e.model.executionState="idle"}}}}};try{await this._executor.runCell(n)}finally{if(!this.isDisposed){e.model.contentChanged.disconnect(this.update,this);this.update()}}}_handleInfo(e){if(e.status!=="ok"){if(this._banner){this._banner.model.sharedModel.setSource("Error in getting kernel banner")}return}if(this._banner){this._banner.model.sharedModel.setSource(e.banner)}const t=e.language_info;this._mimetype=this._mimeTypeService.getMimeTypeByLanguage(t);if(this.promptCell){this.promptCell.model.mimeType=this._mimetype}}_createCodeCellOptions(){const e=this.contentFactory;const t=this.modelFactory;const n=t.createCodeCell({});const i=this.rendermime;const s=this.editorConfig;return{model:n,rendermime:i,contentFactory:e,editorConfig:s,placeholder:false,translator:this._translator}}_onCellDisposed(e,t){if(!this.isDisposed){this._cells.removeValue(e);const t=this._msgIdCells.get(e);if(t){this._msgIdCells.delete(e);this._msgIds.delete(t)}}}_shouldExecute(e){const t=this.promptCell;if(!t){return Promise.resolve(false)}const n=t.model;const i=n.sharedModel.getSource();return new Promise(((t,n)=>{var s;const o=setTimeout((()=>{t(true)}),e);const r=(s=this.sessionContext.session)===null||s===void 0?void 0:s.kernel;if(!r){t(false);return}r.requestIsComplete({code:i}).then((e=>{clearTimeout(o);if(this.isDisposed){t(false)}if(e.content.status!=="incomplete"){t(true);return}t(false)})).catch((()=>{t(true)}))}))}async _onKernelChanged(){var e;this.clear();if(this._banner){this._banner.dispose();this._banner=null}if(this._config.showBanner){this.addBanner()}if((e=this.sessionContext.session)===null||e===void 0?void 0:e.kernel){this._handleInfo(await this.sessionContext.session.kernel.info)}}async _onKernelStatusChanged(){var e;const t=(e=this.sessionContext.session)===null||e===void 0?void 0:e.kernel;if((t===null||t===void 0?void 0:t.status)==="restarting"){if(this._config.showBanner){this.addBanner()}this._handleInfo(await(t===null||t===void 0?void 0:t.info))}}_updateReadWrite(){const e=c.DOMUtils.hasActiveEditableElement(this.node);this.node.classList.toggle(E,e)}_updateLayout(){const{promptCellPosition:e="bottom"}=this._config;this._splitPanel.orientation=["left","right"].includes(e)?"horizontal":"vertical";f.SplitPanel.setStretch(this._content,1);f.SplitPanel.setStretch(this._input,1);if(e==="bottom"||e==="right"){this._splitPanel.insertWidget(0,this._content);this._splitPanel.insertWidget(1,this._input)}else{this._splitPanel.insertWidget(0,this._input);this._splitPanel.insertWidget(1,this._content)}let t=[1,1];if(e==="top"){t=[1,100]}else if(e==="bottom"){t=[100,1]}this._splitPanel.setRelativeSizes(t)}}(function(e){e.defaultEditorConfig={codeFolding:false,lineNumbers:false};class t extends i.Cell.ContentFactory{createCodeCell(e){return new i.CodeCell(e).initializeState()}createRawCell(e){return new i.RawCell(e).initializeState()}}e.ContentFactory=t;class n{constructor(e={}){this.codeCellContentFactory=e.codeCellContentFactory||i.CodeCellModel.defaultContentFactory}createCodeCell(e={}){if(!e.contentFactory){e.contentFactory=this.codeCellContentFactory}return new i.CodeCellModel(e)}createRawCell(e){return new i.RawCellModel(e)}}e.ModelFactory=n;e.defaultModelFactory=new n({})})(A||(A={}));var P;(function(e){function t(e){e.scrollTop=e.scrollHeight-e.clientHeight}e.scrollToBottom=t})(P||(P={}));const L="jp-ConsolePanel";class R extends c.MainAreaWidget{constructor(e){super({content:new f.Panel});this._executed=null;this._connected=null;this.addClass(L);let{executor:t,rendermime:n,mimeTypeService:i,path:s,basePath:o,name:r,manager:a,modelFactory:l,sessionContext:d,translator:v}=e;this.translator=v!==null&&v!==void 0?v:p.nullTranslator;const _=this.translator.load("jupyterlab");const b=this.contentFactory=e.contentFactory;const y=N.count++;if(!s){s=h.PathExt.join(o||"",`console-${y}-${g.UUID.uuid4()}`)}d=this._sessionContext=d!==null&&d!==void 0?d:new c.SessionContext({kernelManager:a.kernels,sessionManager:a.sessions,specsManager:a.kernelspecs,path:a.contents.localPath(s),name:r||_.__("Console %1",y),type:"console",kernelPreference:e.kernelPreference,setBusy:e.setBusy});const w=new u.RenderMimeRegistry.UrlResolver({path:s,contents:a.contents});n=n.clone({resolver:w});this.console=b.createConsole({executor:t,rendermime:n,sessionContext:d,mimeTypeService:i,contentFactory:b,modelFactory:l,translator:v});this.content.addWidget(this.console);void d.initialize().then((async t=>{var n;if(t){await((n=e.sessionDialogs)!==null&&n!==void 0?n:new c.SessionContextDialogs({translator:v})).selectKernel(d)}this._connected=new Date;this._updateTitlePanel()}));this.console.executed.connect(this._onExecuted,this);this._updateTitlePanel();d.kernelChanged.connect(this._updateTitlePanel,this);d.propertyChanged.connect(this._updateTitlePanel,this);this.title.icon=m.consoleIcon;this.title.closable=true;this.id=`console-${y}`}get sessionContext(){return this._sessionContext}dispose(){this.sessionContext.dispose();this.console.dispose();super.dispose()}onActivateRequest(e){const t=this.console.promptCell;if(t){t.editor.focus()}}onCloseRequest(e){super.onCloseRequest(e);this.dispose()}_onExecuted(e,t){this._executed=t;this._updateTitlePanel()}_updateTitlePanel(){N.updateTitle(this,this._connected,this._executed,this.translator)}}(function(e){class t extends A.ContentFactory{createConsole(e){return new A(e)}}e.ContentFactory=t;e.IContentFactory=new g.Token("@jupyterlab/console:IContentFactory","A factory object that creates new code consoles. Use this if you want to create and host code consoles in your own UI elements.")})(R||(R={}));var N;(function(e){e.count=1;function t(e,t,n,i){i=i||p.nullTranslator;const s=i.load("jupyterlab");const o=e.console.sessionContext.session;if(o){let i=s.__("Name: %1\n",o.name)+s.__("Directory: %1\n",h.PathExt.dirname(o.path))+s.__("Kernel: %1",e.console.sessionContext.kernelDisplayName);if(t){i+=s.__("\nConnected: %1",h.Time.format(t.toISOString()))}if(n){i+=s.__("\nLast Execution: %1")}e.title.label=o.name;e.title.caption=i}else{e.title.label=s.__("Console");e.title.caption=""}}e.updateTitle=t})(N||(N={}));const O=new g.Token("@jupyterlab/console:IConsoleTracker",`A widget tracker for code consoles.\n  Use this if you want to be able to iterate over and interact with code consoles\n  created by the application.`);const B=new g.Token("@jupyterlab/console:IConsoleCellExecutor",`The console cell executor`)},50286:(e,t,n)=>{"use strict";var i=n(10395);var s=n(40662);var o=n(97913);var r=n(5893);var a=n(38457);var l=n(17325);var d=n(53377);var c=n(85072);var h=n.n(c);var u=n(97825);var p=n.n(u);var m=n(77659);var g=n.n(m);var f=n(55056);var v=n.n(f);var _=n(10540);var b=n.n(_);var y=n(41113);var w=n.n(y);var C=n(16513);var x={};x.styleTagTransform=w();x.setAttributes=v();x.insert=g().bind(null,"head");x.domAPI=p();x.insertStyleElement=b();var S=h()(C.A,x);const k=C.A&&C.A.locals?C.A.locals:undefined},75013:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ActivityMonitor=void 0;const i=n(2336);class s{constructor(e){this._timer=-1;this._timeout=-1;this._isDisposed=false;this._activityStopped=new i.Signal(this);e.signal.connect(this._onSignalFired,this);this._timeout=e.timeout||1e3}get activityStopped(){return this._activityStopped}get timeout(){return this._timeout}set timeout(e){this._timeout=e}get isDisposed(){return this._isDisposed}dispose(){if(this._isDisposed){return}this._isDisposed=true;i.Signal.clearData(this)}_onSignalFired(e,t){clearTimeout(this._timer);this._sender=e;this._args=t;this._timer=setTimeout((()=>{this._activityStopped.emit({sender:this._sender,args:this._args})}),this._timeout)}}t.ActivityMonitor=s},26376:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){if(i===undefined)i=n;var s=Object.getOwnPropertyDescriptor(t,n);if(!s||("get"in s?!t.__esModule:s.writable||s.configurable)){s={enumerable:true,get:function(){return t[n]}}}Object.defineProperty(e,i,s)}:function(e,t,n,i){if(i===undefined)i=n;e[i]=t[n]});var s=this&&this.__exportStar||function(e,t){for(var n in e)if(n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n))i(t,e,n)};Object.defineProperty(t,"__esModule",{value:true});s(n(75013),t);s(n(23106),t);s(n(24477),t);s(n(87484),t);s(n(92279),t);s(n(67169),t);s(n(97058),t);s(n(80121),t);s(n(9659),t);s(n(67881),t)},23106:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},24477:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.LruCache=void 0;const n=128;class i{constructor(e={}){this._map=new Map;this._maxSize=(e===null||e===void 0?void 0:e.maxSize)||n}get size(){return this._map.size}clear(){this._map.clear()}get(e){const t=this._map.get(e)||null;if(t!=null){this._map.delete(e);this._map.set(e,t)}return t}set(e,t){if(this._map.size>=this._maxSize){this._map.delete(this._map.keys().next().value)}this._map.set(e,t)}}t.LruCache=i},87484:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.MarkdownCodeBlocks=void 0;var n;(function(e){e.CODE_BLOCK_MARKER="```";const t=[".markdown",".mdown",".mkdn",".md",".mkd",".mdwn",".mdtxt",".mdtext",".text",".txt",".Rmd"];class n{constructor(e){this.startLine=e;this.code="";this.endLine=-1}}e.MarkdownCodeBlock=n;function i(e){return t.indexOf(e)>-1}e.isMarkdown=i;function s(t){if(!t||t===""){return[]}const i=t.split("\n");const s=[];let o=null;for(let r=0;r<i.length;r++){const t=i[r];const a=t.indexOf(e.CODE_BLOCK_MARKER)===0;const l=o!=null;if(!a&&!l){continue}if(!l){o=new n(r);const i=t.indexOf(e.CODE_BLOCK_MARKER);const a=t.lastIndexOf(e.CODE_BLOCK_MARKER);const l=i!==a;if(l){o.code=t.substring(i+e.CODE_BLOCK_MARKER.length,a);o.endLine=r;s.push(o);o=null}}else if(o){if(a){o.endLine=r-1;s.push(o);o=null}else{o.code+=t+"\n"}}}return s}e.findMarkdownCodeBlocks=s})(n||(t.MarkdownCodeBlocks=n={}))},92279:function(__unused_webpack_module,exports,__webpack_require__){"use strict";var process=__webpack_require__(65606);var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:true});exports.PageConfig=void 0;const coreutils_1=__webpack_require__(5592);const minimist_1=__importDefault(__webpack_require__(89031));const url_1=__webpack_require__(67881);var PageConfig;(function(PageConfig){function getOption(name){if(configData){return configData[name]||getBodyData(name)}configData=Object.create(null);let found=false;if(typeof document!=="undefined"&&document){const e=document.getElementById("jupyter-config-data");if(e){configData=JSON.parse(e.textContent||"");found=true}}if(!found&&typeof process!=="undefined"&&process.argv){try{const cli=(0,minimist_1.default)(process.argv.slice(2));const path=__webpack_require__(57975);let fullPath="";if("jupyter-config-data"in cli){fullPath=path.resolve(cli["jupyter-config-data"])}else if("JUPYTER_CONFIG_DATA"in process.env){fullPath=path.resolve(process.env["JUPYTER_CONFIG_DATA"])}if(fullPath){configData=eval("require")(fullPath)}}catch(e){console.error(e)}}if(!coreutils_1.JSONExt.isObject(configData)){configData=Object.create(null)}else{for(const e in configData){if(typeof configData[e]!=="string"){configData[e]=JSON.stringify(configData[e])}}}return configData[name]||getBodyData(name)}PageConfig.getOption=getOption;function setOption(e,t){const n=getOption(e);configData[e]=t;return n}PageConfig.setOption=setOption;function getBaseUrl(){return url_1.URLExt.normalize(getOption("baseUrl")||"/")}PageConfig.getBaseUrl=getBaseUrl;function getTreeUrl(){return url_1.URLExt.join(getBaseUrl(),getOption("treeUrl"))}PageConfig.getTreeUrl=getTreeUrl;function getShareUrl(){return url_1.URLExt.normalize(getOption("shareUrl")||getBaseUrl())}PageConfig.getShareUrl=getShareUrl;function getTreeShareUrl(){return url_1.URLExt.normalize(url_1.URLExt.join(getShareUrl(),getOption("treeUrl")))}PageConfig.getTreeShareUrl=getTreeShareUrl;function getUrl(e){var t,n,i,s;let o=e.toShare?getShareUrl():getBaseUrl();const r=(t=e.mode)!==null&&t!==void 0?t:getOption("mode");const a=(n=e.workspace)!==null&&n!==void 0?n:getOption("workspace");const l=r==="single-document"?"doc":"lab";o=url_1.URLExt.join(o,l);if(a!==PageConfig.defaultWorkspace){o=url_1.URLExt.join(o,"workspaces",encodeURIComponent((i=getOption("workspace"))!==null&&i!==void 0?i:PageConfig.defaultWorkspace))}const d=(s=e.treePath)!==null&&s!==void 0?s:getOption("treePath");if(d){o=url_1.URLExt.join(o,"tree",url_1.URLExt.encodeParts(d))}return o}PageConfig.getUrl=getUrl;PageConfig.defaultWorkspace="default";function getWsUrl(e){let t=getOption("wsUrl");if(!t){e=e?url_1.URLExt.normalize(e):getBaseUrl();if(e.indexOf("http")!==0){return""}t="ws"+e.slice(4)}return url_1.URLExt.normalize(t)}PageConfig.getWsUrl=getWsUrl;function getNBConvertURL({path:e,format:t,download:n}){const i=url_1.URLExt.encodeParts(e);const s=url_1.URLExt.join(getBaseUrl(),"nbconvert",t,i);if(n){return s+"?download=true"}return s}PageConfig.getNBConvertURL=getNBConvertURL;function getToken(){return getOption("token")||getBodyData("jupyterApiToken")}PageConfig.getToken=getToken;function getNotebookVersion(){const e=getOption("notebookVersion");if(e===""){return[0,0,0]}return JSON.parse(e)}PageConfig.getNotebookVersion=getNotebookVersion;let configData=null;function getBodyData(e){if(typeof document==="undefined"||!document.body){return""}const t=document.body.dataset[e];if(typeof t==="undefined"){return""}return decodeURIComponent(t)}let Extension;(function(e){function t(e){try{const t=getOption(e);if(t){return JSON.parse(t)}}catch(t){console.warn(`Unable to parse ${e}.`,t)}return[]}e.deferred=t("deferredExtensions");e.disabled=t("disabledExtensions");function n(t){const n=t.indexOf(":");let i="";if(n!==-1){i=t.slice(0,n)}return e.deferred.some((e=>e===t||i&&e===i))}e.isDeferred=n;function i(t){const n=t.indexOf(":");let i="";if(n!==-1){i=t.slice(0,n)}return e.disabled.some((e=>e===t||i&&e===i))}e.isDisabled=i})(Extension=PageConfig.Extension||(PageConfig.Extension={}))})(PageConfig||(exports.PageConfig=PageConfig={}))},67169:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.PathExt=void 0;const i=n(57975);var s;(function(e){function t(...e){const t=i.posix.join(...e);return t==="."?"":h(t)}e.join=t;function n(...e){const t=i.posix.join(...e);return t==="."?"":t}e.joinWithLeadingSlash=n;function s(e,t){return i.posix.basename(e,t)}e.basename=s;function o(e){const t=h(i.posix.dirname(e));return t==="."?"":t}e.dirname=o;function r(e){return i.posix.extname(e)}e.extname=r;function a(e){if(e===""){return""}return h(i.posix.normalize(e))}e.normalize=a;function l(...e){return h(i.posix.resolve(...e))}e.resolve=l;function d(e,t){return h(i.posix.relative(e,t))}e.relative=d;function c(e){if(e.length>0&&e.indexOf(".")!==0){e=`.${e}`}return e}e.normalizeExtension=c;function h(e){if(e.indexOf("/")===0){e=e.slice(1)}return e}e.removeSlash=h})(s||(t.PathExt=s={}))},97058:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.signalToPromise=s;const i=n(5592);function s(e,t){const n=new i.PromiseDelegate;function s(){e.disconnect(o)}function o(e,t){s();n.resolve([e,t])}e.connect(o);if((t!==null&&t!==void 0?t:0)>0){setTimeout((()=>{s();n.reject(`Signal not emitted within ${t} ms.`)}),t)}return n.promise}},80121:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Text=void 0;var n;(function(e){const t="".length>1;function n(e,n){if(t){return e}let i=e;for(let t=0;t+1<n.length&&t<e;t++){const e=n.charCodeAt(t);if(e>=55296&&e<=56319){const e=n.charCodeAt(t+1);if(e>=56320&&e<=57343){i--;t++}}}return i}e.jsIndexToCharIndex=n;function i(e,n){if(t){return e}let i=e;for(let t=0;t+1<n.length&&t<i;t++){const e=n.charCodeAt(t);if(e>=55296&&e<=56319){const e=n.charCodeAt(t+1);if(e>=56320&&e<=57343){i++;t++}}}return i}e.charIndexToJsIndex=i;function s(e,t=false){return e.replace(/^(\w)|[\s-_:]+(\w)/g,(function(e,n,i){if(i){return i.toUpperCase()}else{return t?n.toUpperCase():n.toLowerCase()}}))}e.camelCase=s;function o(e){return(e||"").toLowerCase().split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")}e.titleCase=o})(n||(t.Text=n={}))},9659:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Time=void 0;const n=[{name:"years",milliseconds:365*24*60*60*1e3},{name:"months",milliseconds:30*24*60*60*1e3},{name:"days",milliseconds:24*60*60*1e3},{name:"hours",milliseconds:60*60*1e3},{name:"minutes",milliseconds:60*1e3},{name:"seconds",milliseconds:1e3}];var i;(function(e){function t(e,t="long"){const i=document.documentElement.lang||"en";const s=new Intl.RelativeTimeFormat(i,{numeric:"auto",style:t});const o=new Date(e).getTime()-Date.now();for(let r of n){const e=Math.ceil(o/r.milliseconds);if(e===0){continue}return s.format(e,r.name)}return s.format(0,"seconds")}e.formatHuman=t;function i(e){const t=document.documentElement.lang||"en";const n=new Intl.DateTimeFormat(t,{dateStyle:"short",timeStyle:"short"});return n.format(new Date(e))}e.format=i})(i||(t.Time=i={}))},67881:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.URLExt=void 0;const s=n(57975);const o=i(n(61160));var r;(function(e){function t(e){if(typeof document!=="undefined"&&document){const t=document.createElement("a");t.href=e;return t}return(0,o.default)(e)}e.parse=t;function n(e){return(0,o.default)(e).hostname}e.getHostName=n;function i(e){return e&&t(e).toString()}e.normalize=i;function r(...e){let t=(0,o.default)(e[0],{});const n=t.protocol===""&&t.slashes;if(n){t=(0,o.default)(e[0],"https:"+e[0])}const i=`${n?"":t.protocol}${t.slashes?"//":""}${t.auth}${t.auth?"@":""}${t.host}`;const r=s.posix.join(`${!!i&&t.pathname[0]!=="/"?"/":""}${t.pathname}`,...e.slice(1));return`${i}${r==="."?"":r}`}e.join=r;function a(e){return r(...e.split("/").map(encodeURIComponent))}e.encodeParts=a;function l(e){const t=Object.keys(e).filter((e=>e.length>0));if(!t.length){return""}return"?"+t.map((t=>{const n=encodeURIComponent(String(e[t]));return t+(n?"="+n:"")})).join("&")}e.objectToQueryString=l;function d(e){return e.replace(/^\?/,"").split("&").reduce(((e,t)=>{const[n,i]=t.split("=");if(n.length>0){e[n]=decodeURIComponent(i||"")}return e}),{})}e.queryStringToObject=d;function c(e,n=false){const{protocol:i}=t(e);return(!i||e.toLowerCase().indexOf(i)!==0)&&(n?e.indexOf("//")!==0:e.indexOf("/")!==0)}e.isLocal=c})(r||(t.URLExt=r={}))},32254:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>k});var i=n(30244);var s=n.n(i);var o=n(48287);var r=n.n(o);var a=n(92500);var l=n(69105);var d=n(99264);var c=n.n(d);var h=n(59574);var u=n.n(h);var p=n(90600);var m=n.n(p);var g=n(21760);var f=n.n(g);const v="CSVTable";const _="TSVTable";var b;(function(e){e.CSVGoToLine="csv:go-to-line";e.TSVGoToLine="tsv:go-to-line"})(b||(b={}));const y={activate:C,id:"@jupyterlab/csvviewer-extension:csv",description:"Adds viewer for CSV file types",requires:[g.ITranslator],optional:[i.ILayoutRestorer,o.IThemeManager,h.IMainMenu,d.ISearchProviderRegistry,p.ISettingRegistry,o.IToolbarWidgetRegistry],autoStart:true};const w={activate:x,id:"@jupyterlab/csvviewer-extension:tsv",description:"Adds viewer for TSV file types.",requires:[g.ITranslator],optional:[i.ILayoutRestorer,o.IThemeManager,h.IMainMenu,d.ISearchProviderRegistry,p.ISettingRegistry,o.IToolbarWidgetRegistry],autoStart:true};function C(e,t,i,s,r,d,c,h){var u;const{commands:p,shell:m}=e;let g;if(h){h.addFactory(v,"delimiter",(e=>new l.G({widget:e.content,translator:t})));if(c){g=(0,o.createToolbarFactory)(h,c,v,y.id,t)}}const f=t.load("jupyterlab");const _=new a.Pb({name:v,label:f.__("CSV Viewer"),fileTypes:["csv"],defaultFor:["csv"],readOnly:true,toolbarFactory:g,translator:t});const w=new o.WidgetTracker({namespace:"csvviewer"});let C=j.LIGHT_STYLE;let x=j.LIGHT_TEXT_CONFIG;if(i){void i.restore(w,{command:"docmanager:open",args:e=>({path:e.context.path,factory:v}),name:e=>e.context.path})}e.docRegistry.addWidgetFactory(_);const S=e.docRegistry.getFileType("csv");let k=false;_.widgetCreated.connect((async(e,t)=>{void w.add(t);t.context.pathChanged.connect((()=>{void w.save(t)}));if(S){t.title.icon=S.icon;t.title.iconClass=S.iconClass;t.title.iconLabel=S.iconLabel}if(d&&!k){const{CSVSearchProvider:e}=await Promise.all([n.e(4470),n.e(3528)]).then(n.bind(n,54041));d.add("csv",e);k=true}await t.content.ready;t.content.style=C;t.content.rendererConfig=x;I()}));const I=()=>{const e=s&&s.theme?s.isLight(s.theme):true;C=e?j.LIGHT_STYLE:j.DARK_STYLE;x=e?j.LIGHT_TEXT_CONFIG:j.DARK_TEXT_CONFIG;w.forEach((async e=>{await e.content.ready;e.content.style=C;e.content.rendererConfig=x}))};if(s){s.themeChanged.connect(I)}const E=()=>w.currentWidget!==null&&w.currentWidget===m.currentWidget;p.addCommand(b.CSVGoToLine,{label:f.__("Go to Line"),execute:async()=>{const e=w.currentWidget;if(e===null){return}const t=await o.InputDialog.getNumber({title:f.__("Go to Line"),value:0});if(t.button.accept&&t.value!==null){e.content.goToLine(t.value)}},isEnabled:E});if(r){r.editMenu.goToLiners.add({id:b.CSVGoToLine,isEnabled:E})}const T=()=>{p.notifyCommandChanged(b.CSVGoToLine)};w.currentChanged.connect(T);(u=m.currentChanged)===null||u===void 0?void 0:u.connect(T)}function x(e,t,i,s,r,d,c,h){const{commands:u,shell:p}=e;let m;if(h){h.addFactory(_,"delimiter",(e=>new l.G({widget:e.content,translator:t})));if(c){m=(0,o.createToolbarFactory)(h,c,_,w.id,t)}}const g=t.load("jupyterlab");const f=new a.og({name:_,label:g.__("TSV Viewer"),fileTypes:["tsv"],defaultFor:["tsv"],readOnly:true,toolbarFactory:m,translator:t});const v=new o.WidgetTracker({namespace:"tsvviewer"});let y=j.LIGHT_STYLE;let C=j.LIGHT_TEXT_CONFIG;if(i){void i.restore(v,{command:"docmanager:open",args:e=>({path:e.context.path,factory:_}),name:e=>e.context.path})}e.docRegistry.addWidgetFactory(f);const x=e.docRegistry.getFileType("tsv");let S=false;f.widgetCreated.connect((async(e,t)=>{void v.add(t);t.context.pathChanged.connect((()=>{void v.save(t)}));if(x){t.title.icon=x.icon;t.title.iconClass=x.iconClass;t.title.iconLabel=x.iconLabel}if(d&&!S){const{CSVSearchProvider:e}=await Promise.all([n.e(4470),n.e(3528)]).then(n.bind(n,54041));d.add("tsv",e);S=true}await t.content.ready;t.content.style=y;t.content.rendererConfig=C}));const k=()=>{const e=s&&s.theme?s.isLight(s.theme):true;y=e?j.LIGHT_STYLE:j.DARK_STYLE;C=e?j.LIGHT_TEXT_CONFIG:j.DARK_TEXT_CONFIG;v.forEach((async e=>{await e.content.ready;e.content.style=y;e.content.rendererConfig=C}))};if(s){s.themeChanged.connect(k)}const I=()=>v.currentWidget!==null&&v.currentWidget===p.currentWidget;u.addCommand(b.TSVGoToLine,{label:g.__("Go to Line"),execute:async()=>{const e=v.currentWidget;if(e===null){return}const t=await o.InputDialog.getNumber({title:g.__("Go to Line"),value:0});if(t.button.accept&&t.value!==null){e.content.goToLine(t.value)}},isEnabled:I});if(r){r.editMenu.goToLiners.add({id:b.TSVGoToLine,isEnabled:I})}v.currentChanged.connect((()=>{u.notifyCommandChanged(b.TSVGoToLine)}))}const S=[y,w];const k=S;var j;(function(e){e.LIGHT_STYLE={voidColor:"#F3F3F3",backgroundColor:"white",headerBackgroundColor:"#EEEEEE",gridLineColor:"rgba(20, 20, 20, 0.15)",headerGridLineColor:"rgba(20, 20, 20, 0.25)",rowBackgroundColor:e=>e%2===0?"#F5F5F5":"white"};e.DARK_STYLE={voidColor:"black",backgroundColor:"#111111",headerBackgroundColor:"#424242",gridLineColor:"rgba(235, 235, 235, 0.15)",headerGridLineColor:"rgba(235, 235, 235, 0.25)",rowBackgroundColor:e=>e%2===0?"#212121":"#111111"};e.LIGHT_TEXT_CONFIG={textColor:"#111111",matchBackgroundColor:"#FFFFE0",currentMatchBackgroundColor:"#FFFF00",horizontalAlignment:"right"};e.DARK_TEXT_CONFIG={textColor:"#F5F5F5",matchBackgroundColor:"#838423",currentMatchBackgroundColor:"#A3807A",horizontalAlignment:"right"}})(j||(j={}))},54041:(e,t,n)=>{"use strict";n.d(t,{CSVSearchProvider:()=>d});var i=n(53528);var s=n.n(i);var o=n(97494);var r=n.n(o);var a=n(99264);var l=n.n(a);class d extends a.SearchProvider{constructor(){super(...arguments);this.isReadOnly=true}static createNew(e,t){return new d(e)}static isApplicable(e){return e instanceof o.DocumentWidget&&e.content instanceof i.CSVViewer}clearHighlight(){return Promise.resolve()}highlightNext(e){this.widget.content.searchService.find(this._query);return Promise.resolve(undefined)}highlightPrevious(e){this.widget.content.searchService.find(this._query,true);return Promise.resolve(undefined)}replaceCurrentMatch(e,t){return Promise.resolve(false)}replaceAllMatches(e){return Promise.resolve(false)}startQuery(e){this._query=e;this.widget.content.searchService.find(e);return Promise.resolve()}endQuery(){this.widget.content.searchService.clear();return Promise.resolve()}}},36672:(e,t,n)=>{"use strict";var i=n(10395);var s=n(97913);var o=n(79010);var r=n(3579);var a=n(40662);var l=n(85072);var d=n.n(l);var c=n(97825);var h=n.n(c);var u=n(77659);var p=n.n(u);var m=n(55056);var g=n.n(m);var f=n(10540);var v=n.n(f);var _=n(41113);var b=n.n(_);var y=n(40538);var w={};w.styleTagTransform=b();w.setAttributes=g();w.insert=p().bind(null,"head");w.domAPI=h();w.insertStyleElement=v();var C=d()(y.A,w);const x=y.A&&y.A.locals?y.A.locals:undefined;var S=n(19562);var k=n(67996)},77678:(e,t,n)=>{"use strict";n.r(t);n.d(t,{CSVDelimiter:()=>o.G,CSVDocumentWidget:()=>r.Am,CSVViewer:()=>r.t2,CSVViewerFactory:()=>r.Pb,DSVModel:()=>i.DSVModel,GridSearchService:()=>r.Mv,TSVViewerFactory:()=>r.og,TextRenderConfig:()=>r.Gg,parseDSV:()=>s.h,parseDSVNoQuotes:()=>s.l});var i=n(77515);var s=n(69181);var o=n(69105);var r=n(92500)},77515:(e,t,n)=>{"use strict";n.r(t);n.d(t,{DSVModel:()=>d});var i=n(5592);var s=n.n(i);var o=n(28426);var r=n.n(o);var a=n(69181);const l={quotes:a.h,noquotes:a.l};class d extends o.DataModel{constructor(e){super();this._rowCount=0;this._header=[];this._columnOffsets=new Uint32Array(0);this._columnOffsetsStartingRow=0;this._maxCacheGet=1e3;this._rowOffsets=new Uint32Array(0);this._delayedParse=null;this._startedParsing=false;this._doneParsing=false;this._isDisposed=false;this._ready=new i.PromiseDelegate;let{data:t,delimiter:n=",",rowDelimiter:s=undefined,quote:o='"',quoteParser:r=undefined,header:a=true,initialRows:l=500}=e;this._rawData=t;this._delimiter=n;this._quote=o;this._quoteEscaped=new RegExp(o+o,"g");this._initialRows=l;if(s===undefined){const e=t.slice(0,5e3).indexOf("\r");if(e===-1){s="\n"}else if(t[e+1]==="\n"){s="\r\n"}else{s="\r"}}this._rowDelimiter=s;if(r===undefined){r=t.indexOf(o)>=0}this._parser=r?"quotes":"noquotes";this.parseAsync();if(a===true&&this._columnCount>0){const e=[];for(let t=0;t<this._columnCount;t++){e.push(this._getField(0,t))}this._header=e}}get isDisposed(){return this._isDisposed}get ready(){return this._ready.promise}get rawData(){return this._rawData}set rawData(e){this._rawData=e}get initialRows(){return this._initialRows}set initialRows(e){this._initialRows=e}get header(){return this._header}set header(e){this._header=e}get delimiter(){return this._delimiter}get rowDelimiter(){return this._rowDelimiter}get doneParsing(){return this._doneParsing}rowCount(e){if(e==="body"){if(this._header.length===0){return this._rowCount}else{return this._rowCount-1}}return 1}columnCount(e){if(e==="body"){return this._columnCount}return 1}data(e,t,n){let i;switch(e){case"body":if(this._header.length===0){i=this._getField(t,n)}else{i=this._getField(t+1,n)}break;case"column-header":if(this._header.length===0){i=(n+1).toString()}else{i=this._header[n]}break;case"row-header":i=(t+1).toString();break;case"corner-header":i="";break;default:throw"unreachable"}return i}dispose(){if(this._isDisposed){return}this._isDisposed=true;this._columnCount=undefined;this._rowCount=undefined;this._rowOffsets=null;this._columnOffsets=null;this._rawData=null;if(this._doneParsing===false){this.ready.catch((()=>{}));this._ready.reject(undefined)}if(this._delayedParse!==null){window.clearTimeout(this._delayedParse)}}getOffsetIndex(e,t){const n=this._columnCount;let i=(e-this._columnOffsetsStartingRow)*n;if(i<0||i>this._columnOffsets.length){this._columnOffsets.fill(4294967295);this._columnOffsetsStartingRow=e;i=0}if(this._columnOffsets[i]===4294967295){let t=1;while(t<=this._maxCacheGet&&this._columnOffsets[i+t*n]===16777215){t++}const{offsets:s}=l[this._parser]({data:this._rawData,delimiter:this._delimiter,rowDelimiter:this._rowDelimiter,quote:this._quote,columnOffsets:true,maxRows:t,ncols:n,startIndex:this._rowOffsets[e]});for(let e=0;e<s.length;e++){this._columnOffsets[i+e]=s[e]}}return this._columnOffsets[i+t]}parseAsync(){let e=this._initialRows;let t=Math.pow(2,32)-1;const n=30;const i=e=>{try{this._computeRowOffsets(e)}catch(t){if(this._parser==="quotes"){console.warn(t);this._parser="noquotes";this._resetParser();this._computeRowOffsets(e)}else{throw t}}return this._doneParsing};this._resetParser();const s=i(e);if(s){return}const o=()=>{const s=i(e+t);e+=t;if(t<1e6){t*=2}if(s){this._delayedParse=null}else{this._delayedParse=window.setTimeout(o,n)}};this._delayedParse=window.setTimeout(o,n)}_computeRowOffsets(e=4294967295){var t;if(this._rowCount>=e||this._doneParsing===true){return}if(this._columnCount===undefined){this._columnCount=l[this._parser]({data:this._rawData,delimiter:this._delimiter,rowDelimiter:this._rowDelimiter,quote:this._quote,columnOffsets:true,maxRows:1}).ncols}const n=this._rowCount>0?1:0;const{nrows:i,offsets:s}=l[this._parser]({data:this._rawData,startIndex:(t=this._rowOffsets[this._rowCount-n])!==null&&t!==void 0?t:0,delimiter:this._delimiter,rowDelimiter:this._rowDelimiter,quote:this._quote,columnOffsets:false,maxRows:e-this._rowCount+n});if(this._startedParsing&&i<=n){this._doneParsing=true;this._ready.resolve(undefined);return}this._startedParsing=true;const o=this._rowCount;const r=Math.min(i,n);this._rowCount=o+i-r;if(this._rowCount<e){this._doneParsing=true;this._ready.resolve(undefined)}if(this._rowCount>o){const e=this._rowOffsets;this._rowOffsets=new Uint32Array(this._rowCount);this._rowOffsets.set(e);this._rowOffsets.set(s,o-r)}const a=Math.floor(33554432/this._columnCount);if(o<=a){if(this._rowCount<=a){const e=this._columnOffsets;this._columnOffsets=new Uint32Array(this._rowCount*this._columnCount);this._columnOffsets.set(e);this._columnOffsets.fill(4294967295,e.length)}else{const e=this._columnOffsets;this._columnOffsets=new Uint32Array(Math.min(this._maxCacheGet,a)*this._columnCount);this._columnOffsets.set(e.subarray(0,this._columnOffsets.length));this._columnOffsets.fill(4294967295,e.length);this._columnOffsetsStartingRow=0}}let d=o;if(this._header.length>0){d-=1}this.emitChanged({type:"rows-inserted",region:"body",index:d,span:this._rowCount-o})}_getField(e,t){let n;let i;const s=this.getOffsetIndex(e,t);let o=0;let r=0;if(t===this._columnCount-1){if(e<this._rowCount-1){i=this.getOffsetIndex(e+1,0);o+=this._rowDelimiter.length}else{i=this._rawData.length;if(this._rawData[i-1]===this._rowDelimiter[this._rowDelimiter.length-1]){o+=this._rowDelimiter.length}}}else{i=this.getOffsetIndex(e,t+1);if(s<i&&this._rawData[i-1]===this._delimiter){o+=1}}if(this._rawData[s]===this._quote){r+=1;o+=1}n=this._rawData.slice(s+r,i-o);if(r===1&&n.indexOf(this._quote)!==-1){n=n.replace(this._quoteEscaped,this._quote)}return n}_resetParser(){this._columnCount=undefined;this._rowOffsets=new Uint32Array(0);this._rowCount=0;this._startedParsing=false;this._columnOffsets=new Uint32Array(0);if(this._doneParsing===false){this.ready.catch((()=>{}));this._ready.reject(undefined)}this._doneParsing=false;this._ready=new i.PromiseDelegate;if(this._delayedParse!==null){window.clearTimeout(this._delayedParse);this._delayedParse=null}this.emitChanged({type:"model-reset"})}}},69181:(e,t,n)=>{"use strict";n.d(t,{h:()=>o,l:()=>r});var i;(function(e){e[e["QUOTED_FIELD"]=0]="QUOTED_FIELD";e[e["QUOTED_FIELD_QUOTE"]=1]="QUOTED_FIELD_QUOTE";e[e["UNQUOTED_FIELD"]=2]="UNQUOTED_FIELD";e[e["NEW_FIELD"]=3]="NEW_FIELD";e[e["NEW_ROW"]=4]="NEW_ROW"})(i||(i={}));var s;(function(e){e[e["CR"]=0]="CR";e[e["CRLF"]=1]="CRLF";e[e["LF"]=2]="LF"})(s||(s={}));function o(e){const{data:t,columnOffsets:n,delimiter:o=",",startIndex:r=0,maxRows:a=4294967295,rowDelimiter:l="\r\n",quote:d='"'}=e;let c=e.ncols;let h=0;const u=[];const p=o.charCodeAt(0);const m=d.charCodeAt(0);const g=10;const f=13;const v=t.length;const{QUOTED_FIELD:_,QUOTED_FIELD_QUOTE:b,UNQUOTED_FIELD:y,NEW_FIELD:w,NEW_ROW:C}=i;const{CR:x,LF:S,CRLF:k}=s;const[j,I]=l==="\r\n"?[k,2]:l==="\r"?[x,1]:[S,1];let E=C;let T=r;let M=0;let D;while(T<v){if(E===C){u.push(T);M=1}D=t.charCodeAt(T);switch(E){case C:case w:switch(D){case m:E=_;break;case p:E=w;break;case f:if(j===x){E=C}else if(j===k&&t.charCodeAt(T+1)===g){T++;E=C}else{throw`string index ${T} (in row ${h}, column ${M}): carriage return found, but not as part of a row delimiter C ${t.charCodeAt(T+1)}`}break;case g:if(j===S){E=C}else{throw`string index ${T} (in row ${h}, column ${M}): line feed found, but row delimiter starts with a carriage return`}break;default:E=y;break}break;case _:T=t.indexOf(d,T);if(T<0){throw`string index ${T} (in row ${h}, column ${M}): mismatched quote`}E=b;break;case b:switch(D){case m:E=_;break;case p:E=w;break;case f:if(j===x){E=C}else if(j===k&&t.charCodeAt(T+1)===g){T++;E=C}else{throw`string index ${T} (in row ${h}, column ${M}): carriage return found, but not as part of a row delimiter C ${t.char